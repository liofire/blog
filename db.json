{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/jsimple/source/404.html","path":"404.html","modified":0,"renderable":1},{"_id":"themes/jsimple/source/CNAME","path":"CNAME","modified":0,"renderable":1},{"_id":"themes/jsimple/source/warn.html","path":"warn.html","modified":0,"renderable":1},{"_id":"themes/jsimple/source/css/SimpleStyle.css","path":"css/SimpleStyle.css","modified":0,"renderable":1},{"_id":"themes/jsimple/source/css/SimpleStyle.min.css","path":"css/SimpleStyle.min.css","modified":0,"renderable":1},{"_id":"themes/jsimple/source/css/insight.styl","path":"css/insight.styl","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/JSimple-iPhone-Landscape-Night-Demo.jpg","path":"images/JSimple-iPhone-Landscape-Night-Demo.jpg","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/donate-qr.png","path":"images/donate-qr.png","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/favicon.png","path":"images/favicon.png","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/rssFeed-bg.jpg","path":"images/rssFeed-bg.jpg","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/sns-qrcode.png","path":"images/sns-qrcode.png","modified":0,"renderable":1},{"_id":"themes/jsimple/source/js/InsightSearch.js","path":"js/InsightSearch.js","modified":0,"renderable":1},{"_id":"themes/jsimple/source/js/SimpleCore.js","path":"js/SimpleCore.js","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/404-bg.jpg","path":"images/404-bg.jpg","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/tags-bg.jpg","path":"images/tags-bg.jpg","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/category-bg.jpg","path":"images/category-bg.jpg","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/cover-night.jpg","path":"images/cover-night.jpg","modified":0,"renderable":1},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.woff","path":"css/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.woff2","path":"css/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/cover-day_01.jpg","path":"images/cover-day_01.jpg","modified":0,"renderable":1},{"_id":"themes/jsimple/source/css/fonts/FontAwesome.otf","path":"css/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.eot","path":"css/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.ttf","path":"css/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/jsimple/source/images/cover-day.jpg","path":"images/cover-day.jpg","modified":0,"renderable":1},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.svg","path":"css/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"source/welcome.md","hash":"7ac62314612f5dbbc0f20597458cde857a45c111","modified":1502875636000},{"_id":"themes/jsimple/.travis.yml","hash":"2450c9868853751b63ae5707cff322ed9810c3b0","modified":1533103001891},{"_id":"themes/jsimple/.gitignore","hash":"eb2da2a9db75960d217edd08147a30519e05adea","modified":1533103001889},{"_id":"themes/jsimple/LICENSE","hash":"53bb975b001b0d0bb2ddd7c302a9c8a20195f0be","modified":1533103001893},{"_id":"themes/jsimple/README.md","hash":"8a19132059f3103d0678550c3173a46499482815","modified":1533103001895},{"_id":"themes/jsimple/README.zhCN.md","hash":"0278a3fd867b298143d5fae6742b15e356ad0bf5","modified":1533103001896},{"_id":"themes/jsimple/_config - 副本.yml","hash":"80ca1a7fa9a80d02b64c69ff588ce58b915c5ce7","modified":1533103873299},{"_id":"themes/jsimple/_config.yml","hash":"d3112811356c724c7c5ed6dbac2ef35b3d86a68f","modified":1533181341438},{"_id":"themes/jsimple/package.json","hash":"78ad956282085c89242844f81f29860cd6598f31","modified":1533103001941},{"_id":"source/_posts/hello-world.md","hash":"029f91fccbe8f87c0f3ea10c4042300d2fa7edc0","modified":1533090565212},{"_id":"themes/jsimple/languages/en.yml","hash":"69396cdb0ecb70ca679ecfd83e098f6f7503083e","modified":1533103001900},{"_id":"themes/jsimple/languages/zh-cn.yml","hash":"a4d4e13907ae9169987329ea6a4b082dd6420b4d","modified":1533103001902},{"_id":"themes/jsimple/layout/archive.ejs","hash":"e7a766260b3b55f194593bb2bc520af93f918b22","modified":1533103001929},{"_id":"themes/jsimple/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1533103001931},{"_id":"themes/jsimple/layout/index.ejs","hash":"aa1b4456907bdb43e629be3931547e2d29ac58c8","modified":1533103001932},{"_id":"themes/jsimple/layout/layout.ejs","hash":"9f5eff1c3e21ec66fdd86bd0300f8fa6bf12cd01","modified":1533103001934},{"_id":"themes/jsimple/layout/page.ejs","hash":"4a2ddc7c5868279d368a527a340a7d7fddeb975c","modified":1533103001935},{"_id":"themes/jsimple/layout/post.ejs","hash":"32457bc480205dd9be7c3bebbd9b04beb2a60992","modified":1533103001937},{"_id":"themes/jsimple/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1533103001938},{"_id":"themes/jsimple/layout/tags.ejs","hash":"a52e85a4054952387fbbff470a0a0790417a7c00","modified":1533103001940},{"_id":"themes/jsimple/source/404.html","hash":"affee378fb0abbdacd130f143c88f5db80f225bb","modified":1533103001944},{"_id":"themes/jsimple/source/CNAME","hash":"55322c1421b50edf7927ccbec329c7ee30f1446a","modified":1533103001945},{"_id":"themes/jsimple/source/warn.html","hash":"da397b7361f4005c1c996cacebc07cf06389d1e2","modified":1533103002000},{"_id":"source/_posts/blog/welcome.md","hash":"7ac62314612f5dbbc0f20597458cde857a45c111","modified":1502875636000},{"_id":"source/_posts/blog.tar.gz","hash":"777f18dcbf1ccbee4ed889c47ca5ac6a0c1ba09d","modified":1533092461752},{"_id":"themes/jsimple/layout/_partial/_page.ejs","hash":"00679f0a6acd9cfbfad352b27053afc4e07b8b93","modified":1533103001905},{"_id":"themes/jsimple/layout/_partial/_post.ejs","hash":"24f70c17413b4d7bf6d4ea20b69a17b0b46cba3a","modified":1533103001907},{"_id":"themes/jsimple/layout/_partial/archive.ejs","hash":"b5e80900f57d0796a8fcba0831c96026f562db30","modified":1533103001908},{"_id":"themes/jsimple/layout/_partial/comments.ejs","hash":"08cc14e2e1b34c88ba10cb347bc4715e4fda9425","modified":1533103001910},{"_id":"themes/jsimple/layout/_partial/footer.ejs","hash":"4d371ad675f788cdc13da4a81230721251985eef","modified":1533103001912},{"_id":"themes/jsimple/layout/_partial/head.ejs","hash":"3d2d51e6baca781514cebecea6285bbf41dfb170","modified":1533103001913},{"_id":"themes/jsimple/layout/_partial/leftMenu.ejs","hash":"144b20397febac1f6ed1057ec9af1b77327520eb","modified":1533103001915},{"_id":"themes/jsimple/layout/_partial/middleCover.ejs","hash":"c9eb82327955c35967bd2deedbb814030deabfa8","modified":1533103001916},{"_id":"themes/jsimple/layout/_widget/category-items.ejs","hash":"def37c7ac1281db27b75b5aa1b4435de802365e1","modified":1533103001918},{"_id":"themes/jsimple/layout/_widget/common-article.ejs","hash":"02b5b87472a5f508a3ab64ebec7ea31165bb8b41","modified":1533103001920},{"_id":"themes/jsimple/layout/_widget/search-bar.ejs","hash":"b5538a832673ff1aeeebb13da967cc07dc5ef381","modified":1533103001922},{"_id":"themes/jsimple/layout/_widget/site-analytics.ejs","hash":"c7880add872c90d70be73ad8dad63c52d73932eb","modified":1533103001926},{"_id":"themes/jsimple/layout/_widget/user-entry.ejs","hash":"c9be5f267b28836bf2aaa059935e51bf7d6b6eb2","modified":1533103001927},{"_id":"themes/jsimple/source/css/SimpleStyle.css","hash":"c7dbcd088b865c96453dab9d3f69799ccb851f8e","modified":1533103001948},{"_id":"themes/jsimple/source/css/SimpleStyle.min.css","hash":"f69da0a43dbb9b72ce73e7352077c56004839c9b","modified":1533103001950},{"_id":"themes/jsimple/source/css/insight.styl","hash":"ae5daddd9461355fe8c03b8476198e3caa28bb25","modified":1533103001972},{"_id":"themes/jsimple/source/images/JSimple-iPhone-Landscape-Night-Demo.jpg","hash":"81e23ff03c4ec8d58aaf18a566f1168da4f92363","modified":1533103001977},{"_id":"themes/jsimple/source/images/donate-qr.png","hash":"f0dcb8820298d554e87d209e7b53b1953eed12db","modified":1533114818814},{"_id":"themes/jsimple/source/images/favicon.png","hash":"4429951b118d50bda2575d846fd9d9a88f1762f7","modified":1533103001989},{"_id":"themes/jsimple/source/images/rssFeed-bg.jpg","hash":"152d21e2a733e94c8a2c726fca8b2555b3d05979","modified":1533103001990},{"_id":"themes/jsimple/source/images/sns-qrcode.png","hash":"e2c026527fbf1393caccdd2f8e44bac437232184","modified":1533103001992},{"_id":"themes/jsimple/source/js/InsightSearch.js","hash":"a69c9f5aecea2eae8f740b5857ee28694609373d","modified":1533103001996},{"_id":"themes/jsimple/source/js/SimpleCore.js","hash":"dc8335bc082918c25d415741c4c1416d7f0e5193","modified":1533103001998},{"_id":"themes/jsimple/source/images/404-bg.jpg","hash":"85480e340d2af57c4e4b3ae93525ed608ea343b7","modified":1533103001976},{"_id":"themes/jsimple/source/images/tags-bg.jpg","hash":"c6e6461a60986eab08062fee324e2ce1e86fa2d7","modified":1533103001994},{"_id":"source/_posts/blog/img/logo_128x128.png","hash":"b80103e79bd67f8d489492c6adb491f5f5435772","modified":1502875643000},{"_id":"source/_posts/blog/img/logo_32x32.png","hash":"eceb0bd6c5f69d409d43dc70f562de249b90fdda","modified":1502875643000},{"_id":"source/_posts/blog/img/logo_64x64.png","hash":"d7dc88e2d293a6e2c39699fa12cc6defbe79f988","modified":1502875643000},{"_id":"source/_posts/blog/life/5鏈堝皬缁_md","hash":"e645ac198f6a71a1dc3ba400a15e45088ded92d4","modified":1533111434621},{"_id":"source/_posts/blog/life/鎭愭儳鏄嚜宸辨垚闀跨殑绮.md","hash":"5dc2d0ff201f8f3f7440e7a5c20980d41a7f443f","modified":1533111287775},{"_id":"source/_posts/blog/life/鎴戠殑宸ヤ綔.md","hash":"4d987ff77158d78a4c47c9ce6a619dc5e059e2d9","modified":1533111299107},{"_id":"source/_posts/blog/linux/MySQL鏁版嵁搴撳熀鏈搷浣_md","hash":"58fa56e3dbd85b5b2765c6c3f16df82a528ce363","modified":1533111649925},{"_id":"source/_posts/blog/linux/Rsync+inotify.md","hash":"2e3b0c670dc4dc049f672cfb862e4737ce53383b","modified":1533111649726},{"_id":"source/_posts/blog/linux/awk鐢ㄦ硶.md","hash":"7a7d72ee11def7da103fac906b89ccd537eeecbb","modified":1533096969923},{"_id":"source/_posts/blog/linux/boot鍒嗗尯婊′簡+鏇存柊鍐呮牳鏃跺鑷碼pt鍑虹幇閿欒.md","hash":"55e2de0fcf3a290c60d816561738fcd19e450335","modified":1533111649658},{"_id":"source/_posts/blog/linux/centos6鍐呮牳鍗囩骇涓_.10.md","hash":"12446e7d9fb2200517dda70c19fc826784adf0ca","modified":1533111649897},{"_id":"source/_posts/blog/linux/centos鍚姩绠＄悊.md","hash":"c79c1dbea0f691f6a291efebecec1f73cfee22ab","modified":1533111649676},{"_id":"source/_posts/blog/linux/cobbler閰嶇疆鍙婂潙.md","hash":"b6b371fa34855ab1462b28aab1b5fc6bb20ef9d5","modified":1533111649787},{"_id":"source/_posts/blog/linux/docker鍩虹鎿嶄綔.md","hash":"831acc9467a67619b71d59686126688f2c84df29","modified":1533111649762},{"_id":"source/_posts/blog/linux/fedora瀹夎浣跨敤.md","hash":"7d3231f19bebae0fcbbaeb71c4ee1fd411525376","modified":1533111649816},{"_id":"source/_posts/blog/linux/lamp鏋勬灦涓嬬殑缃戠珯鐜鎼缓.md","hash":"fa021766a2aab471a03faab51daddeb390cbc96c","modified":1533179643055},{"_id":"source/_posts/blog/linux/sed鍒濈骇.md","hash":"2db5355704da16aa2c834e2a3a2b624a23c31ce1","modified":1533111650000},{"_id":"source/_posts/blog/linux/zabbix鐨勫畨瑁_md","hash":"ade828905a498e61c5e7d17aacaf91430b29f4fb","modified":1533111649861},{"_id":"source/_posts/blog/linux/灞€鍩熺綉dns鎼缓.md","hash":"2bf895b8fb85e094c05f204fc319894581d53972","modified":1533111445650},{"_id":"source/_posts/blog/linux/鍒╃敤ngrok杩滅▼鍐呯綉鏈哄櫒.md","hash":"fef99ffcc67bc2e5ebc4f9845bcefa98619c731a","modified":1533111454029},{"_id":"source/_posts/blog/mysql/Mysql涓讳粠鍚屾.md","hash":"7aa14b15bca1cbea224401ec89928bafcd18217b","modified":1533111872065},{"_id":"source/_posts/blog/netword/h3cne鑰冭瘯鍑嗗锛屽鑰冧竴涓湀锛屼竷鏈堜唤鍑嗗锛屽叓鏈堝紑鑰_md","hash":"5ce5b204d482c48d16012c1c06019d8f74eebfaf","modified":1533112451558},{"_id":"source/_posts/blog/python/h3cne鑰冭瘯鏀惧純.md","hash":"406c5b3ebffb4434f3b8c96b26965b158bae8286","modified":1533111725113},{"_id":"source/_posts/blog/python/numpy鍑芥暟split鐨勭敤娉昣.md","hash":"03682b94419cfd9896ce611c39f6e287a3775481","modified":1533111725406},{"_id":"source/_posts/blog/python/wingide6鐨勬惌寤轰笌鐮磋В.md","hash":"304e0ea23cfe4699d1373239f58d0f5218702892","modified":1533112264763},{"_id":"source/_posts/blog/python/浠婃棩澶存潯琛楁媿鍥_md","hash":"7f2bd00bba3c8711632e7f22285abafbf9a1e4cc","modified":1533111725080},{"_id":"source/_posts/blog/python/瀛︿範python鍐欎釜浠婂勾杩樺墿澶氬皯澶╃殑灏忕▼搴_md","hash":"2720625f987d4daa1dc05caf9e57300d180421a8","modified":1533111725145},{"_id":"source/_posts/blog/python/璺崇悆娆℃暟_鍙栬窛绂籣瑙ｆ硶.md","hash":"6e9cfc9fa1d61de9a065232c6a45687c1fdad25e","modified":1533111725185},{"_id":"source/_posts/blog/python/鎼缓jupyter-notebook鏈嶅姟鍣_md","hash":"14aa6318bd2b8105264aa7c5c9ef0b89678c65c1","modified":1533111725319},{"_id":"source/_posts/blog/python/鏆村姏鏀诲嚮.md","hash":"f3e1cdaff5cff9777ce374060ed10682b4ffcc22","modified":1533111725229},{"_id":"source/_posts/blog/python/鐖彇绁炴极鐢荤綉绔_md","hash":"3aa00d37a9d49882c95da0d642c6bbc3a3591865","modified":1533111725055},{"_id":"source/_posts/blog/python/鐢╝tom鎵撻€爌ython-IDE.md","hash":"ead71d6e4bb144fa938e39b6e931dcd39b7b62b8","modified":1533111725511},{"_id":"source/_posts/blog/web/http鐘舵€佽〃.md","hash":"2fc22371d27409964369e8d5e7d4cd28eb5b509b","modified":1533112427144},{"_id":"source/_posts/blog/windows/thinkpad+x260绯荤粺閲嶈.md","hash":"761a62ad1d7fe4b81cf412d4f1e5c0c8282995dc","modified":1533111357940},{"_id":"source/_posts/blog/windows/windows涓嬪畨瑁卨inux鍏ㄦ柟浣嶈瀹炵敤.md","hash":"ecdbe7ccc0697d4520bc5685cf5bf519ba08331e","modified":1533179726872},{"_id":"source/_posts/blog/windows/windows纾佺洏绠＄悊鍜屼娇鐢ㄤ箣绗旇.md","hash":"e0948a97821c1ec3a5c11f068f069b16c55bd39d","modified":1533111387692},{"_id":"source/_posts/blog/windows/电脑蓝屏_PAGE_FAULT_IN_NONPAGED_AREA.md","hash":"930393dad6f2d489caa956d2e49c5a5f1d7139c0","modified":1533111331676},{"_id":"source/_posts/blog/windows/鍐呭瓨鍑洪棶棰樺鑷村鍒跺嚭鐜板樊閿_md","hash":"016e1d74a6504320bde3552cfa65c6be8b20792e","modified":1533111348634},{"_id":"source/_posts/blog/瀹夊叏/鍕掔储杞欢鏀诲嚮闃茶寖.md","hash":"70f6e10ed9f7353bb63cbdde6b7de843066afdc4","modified":1533096978645},{"_id":"themes/jsimple/layout/_widget/search/insight.ejs","hash":"c195fa7fd404e3520d88bf5c86d73eb31cb3ce45","modified":1533103001924},{"_id":"themes/jsimple/source/images/category-bg.jpg","hash":"f19159f9df99f7419fd6ce43eb8bdfc28cf9c01e","modified":1533103001979},{"_id":"themes/jsimple/source/images/cover-night.jpg","hash":"024e16a5f6a34afa7634526e467dfa4a725e5493","modified":1533103001985},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1533103001966},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1533103001969},{"_id":"themes/jsimple/source/images/cover-day_01.jpg","hash":"8b1aa6c2fec2455bd44ce089496c561296b21371","modified":1533103001983},{"_id":"themes/jsimple/source/css/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1533103001953},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1533103001956},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1533103001964},{"_id":"themes/jsimple/source/images/cover-day.jpg","hash":"7fb8a781d1d49c7e4d4b38ea136aed9b1a504f46","modified":1533104614796},{"_id":"themes/jsimple/source/css/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1533103001961},{"_id":"public/content.json","hash":"f7780c5b8e367546d394b6a3e5b8046720ccc2e2","modified":1533185010662},{"_id":"public/welcome.html","hash":"2c1b1c5750748c0caa4510785915673f0003da0d","modified":1533185010780},{"_id":"public/2018/08/02/blog/windows/windows涓嬪畨瑁卨inux鍏ㄦ柟浣嶈瀹炵敤/index.html","hash":"a43646ddfd2f05a91294827d29cf2ecccca81334","modified":1533179382277},{"_id":"public/2018/08/02/blog/welcome/index.html","hash":"a82020d4e3435531f4a8a964f1cff3d43e2940c5","modified":1533178602596},{"_id":"public/2018/08/02/hello-world/index.html","hash":"2d486b2a9cd948e28958baf4084490d26a7e8e97","modified":1533178602596},{"_id":"public/2018/07/20/blog/windows/电脑蓝屏_PAGE_FAULT_IN_NONPAGED_AREA/index.html","hash":"d62361cc09af9c513f26832068fd83a3259e64be","modified":1533185010786},{"_id":"public/2018/07/06/blog/linux/cobbler閰嶇疆鍙婂潙/index.html","hash":"94047a224995dc0a8fa24ed59306df320331b50b","modified":1533185010787},{"_id":"public/2017/11/23/blog/windows/thinkpad+x260绯荤粺閲嶈/index.html","hash":"272130c1cd53cfcadf51f25c07da12b0058ef229","modified":1533185010787},{"_id":"public/2017/10/26/blog/life/鎴戠殑宸ヤ綔/index.html","hash":"f6597046f1f3c1ca8b9723a9212d049c2e147c2a","modified":1533185010787},{"_id":"public/2017/09/19/blog/linux/centos鍚姩绠＄悊/index.html","hash":"e589c5790c6acc5f809902ece564bb761b790b78","modified":1533185010788},{"_id":"public/2017/09/11/blog/linux/sed鍒濈骇/index.html","hash":"3dd1e7b551ec3b5b4a35f749f88e6d69d6aa7aa3","modified":1533185010788},{"_id":"public/2017/08/18/blog/life/鎭愭儳鏄嚜宸辨垚闀跨殑绮/index.html","hash":"03e071d33a75afa4325e1f86a2f5b33fe15f007a","modified":1533185010788},{"_id":"public/2017/08/16/blog/linux/boot鍒嗗尯婊′簡+鏇存柊鍐呮牳鏃跺鑷碼pt鍑虹幇閿欒/index.html","hash":"fa85f686e7e9a66e8976d9280929a4fc64c31123","modified":1533185010788},{"_id":"public/2017/07/19/blog/python/h3cne鑰冭瘯鏀惧純/index.html","hash":"ba7497e7fd38b766407016df77d10a088c5750b1","modified":1533185010788},{"_id":"public/2017/07/04/blog/python/wingide6鐨勬惌寤轰笌鐮磋В/index.html","hash":"74c3836cd079c00f106cf5f130d044bc078c04ab","modified":1533185010788},{"_id":"public/2017/05/21/blog/python/鐢╝tom鎵撻€爌ython-IDE/index.html","hash":"544d2eee24e006e019ea5585ed85ed3ea724932e","modified":1533185010788},{"_id":"public/2017/05/13/blog/瀹夊叏/鍕掔储杞欢鏀诲嚮闃茶寖/index.html","hash":"86c4d9cc789e6218f009964a462cfadf8bbc798e","modified":1533185010788},{"_id":"public/2016/12/08/blog/linux/docker鍩虹鎿嶄綔/index.html","hash":"ac28b393e704cf73646aea2123091b83627fc4a6","modified":1533185010788},{"_id":"public/2016/11/03/blog/linux/centos6鍐呮牳鍗囩骇涓_.10/index.html","hash":"7dc30dc7cfbc7a0aec2ded3d19f6e6ecd344a702","modified":1533185010789},{"_id":"public/2016/10/03/blog/web/http鐘舵€佽〃/index.html","hash":"9761b18142d0096ba904965e24eb6aff9b4ef7f7","modified":1533185010789},{"_id":"public/categories/life/index.html","hash":"3f2266e6fcc23d09599b2631c13f4e9277f4036c","modified":1533185010789},{"_id":"public/categories/lifetime/index.html","hash":"751340779771d77648c8223af6fbceae32e7f0f5","modified":1533185010789},{"_id":"public/categories/linux/index.html","hash":"9fa5b8f1c5a066b372dc7519819e58ec5c11ca48","modified":1533185010789},{"_id":"public/categories/web/index.html","hash":"b775c98bae0cdcbcec2a52e272722ab67d861b2e","modified":1533185010789},{"_id":"public/categories/storage/index.html","hash":"4078a586b26b5025290227fc824b8986d14e63fc","modified":1533185010789},{"_id":"public/categories/python/index.html","hash":"493ee0a946758cdfd28a398f00ae58221cda1699","modified":1533185010789},{"_id":"public/categories/webnet/index.html","hash":"dd7b52dd77ad7dcfa8097477dce95bd0265ca85d","modified":1533185010789},{"_id":"public/categories/windows/index.html","hash":"8abfd6e5142103bdc45f110f83b8c8b43ab8baaa","modified":1533185010789},{"_id":"public/categories/security/index.html","hash":"441a8d90036d4f3a20a9aae8f8b7df034ba9d0bb","modified":1533185010790},{"_id":"public/page/3/index.html","hash":"880ae3b035eb9158de5cd03cd3be5df71883030e","modified":1533185010790},{"_id":"public/tags/GitBlog/index.html","hash":"5dc908c2ca06880093452540953dbc2a7858966d","modified":1533185010790},{"_id":"public/tags/工作/index.html","hash":"ebf89a11bf5563745a6136ad45f5042acfa41551","modified":1533185010790},{"_id":"public/tags/cobbler/index.html","hash":"36a18e0df83b60cb7d68a6bed893fcc8d023c28f","modified":1533185010790},{"_id":"public/tags/dns/index.html","hash":"6539017451d2eccbdc55e07c74907396c0352f06","modified":1533185010790},{"_id":"public/tags/python/index.html","hash":"f29ec108816a5b516cb000bb5387ecb08046ac7f","modified":1533185010790},{"_id":"public/tags/windows/index.html","hash":"af13ce945e1d1917e2788eb9dd69fbafd5e80d99","modified":1533185010790},{"_id":"public/tags/security/index.html","hash":"13c9e4607abf176bb7fef62db45c19dbe6a18c92","modified":1533185010790},{"_id":"public/2018/08/02/blog/linux/lamp鏋勬灦涓嬬殑缃戠珯鐜鎼缓/index.html","hash":"93df4657f1f90432b92f5caa5c27c9aa74f3b77e","modified":1533179382278},{"_id":"public/2018/04/27/blog/python/numpy鍑芥暟split鐨勭敤娉昣/index.html","hash":"c3bfac0eeacf7780c62643678badd542ef1622d8","modified":1533185010790},{"_id":"public/2018/01/16/blog/linux/灞€鍩熺綉dns鎼缓/index.html","hash":"134a7fa4bbf13ce61b39f784af1d0b81fb6a8698","modified":1533185010790},{"_id":"public/2017/10/29/blog/linux/鍒╃敤ngrok杩滅▼鍐呯綉鏈哄櫒/index.html","hash":"869525848a47f74c8ca49551e55fa56f11baf757","modified":1533185010791},{"_id":"public/2017/09/12/blog/linux/awk鐢ㄦ硶/index.html","hash":"b0b37f5298fae8704825b6f25b44ef35bfa58089","modified":1533185010791},{"_id":"public/2017/01/03/blog/linux/fedora瀹夎浣跨敤/index.html","hash":"db9705508bebea56732891586f1c2da367272fbc","modified":1533185010788},{"_id":"public/2016/09/29/blog/mysql/Mysql涓讳粠鍚屾/index.html","hash":"bd63ad4f26ba3835322849fab701d57dc8b403a3","modified":1533185010791},{"_id":"public/archives/index.html","hash":"6bde2e999f23f2b3ef03867c9f0be2cd2ec907f9","modified":1533185010791},{"_id":"public/archives/page/2/index.html","hash":"6bde2e999f23f2b3ef03867c9f0be2cd2ec907f9","modified":1533185010791},{"_id":"public/archives/page/3/index.html","hash":"6bde2e999f23f2b3ef03867c9f0be2cd2ec907f9","modified":1533185010791},{"_id":"public/archives/2016/index.html","hash":"1325c0061e740daff44172d52703fcfc2805af1a","modified":1533185010791},{"_id":"public/archives/2016/09/index.html","hash":"cb1e4bc01dc43845529594eda6b1ccc3236a5ca7","modified":1533185010791},{"_id":"public/archives/2016/10/index.html","hash":"d31b6e8085c8791882de83af992cba29d0ade6d4","modified":1533185010791},{"_id":"public/archives/2016/11/index.html","hash":"0a6bb463eb369d40f2abcf0bc5fce7bf402ab327","modified":1533185010791},{"_id":"public/archives/2016/12/index.html","hash":"7e8603e9af80b5a220b2c9fe4311ccf0c7c91889","modified":1533185010791},{"_id":"public/archives/2017/index.html","hash":"f5ad07dc81bdc2fab40909313f6b0614a14fd5a8","modified":1533185010792},{"_id":"public/archives/2017/page/2/index.html","hash":"f5ad07dc81bdc2fab40909313f6b0614a14fd5a8","modified":1533185010792},{"_id":"public/archives/2017/01/index.html","hash":"b98fb3a0fb1766ed82354d38505fd558afe0d443","modified":1533185010792},{"_id":"public/archives/2017/05/index.html","hash":"39ee8458216887423d1c322e4c6fc8766f592fdd","modified":1533185010792},{"_id":"public/archives/2017/07/index.html","hash":"71ee1c69139080f68e867af5916b7633eba37076","modified":1533185010792},{"_id":"public/archives/2017/08/index.html","hash":"e3952d0fc0e3f5389bfd1280e399dc5a0d03ee27","modified":1533185010792},{"_id":"public/archives/2017/09/index.html","hash":"22099523b754328d8b35333703a12418b1c6ca26","modified":1533185010792},{"_id":"public/archives/2017/10/index.html","hash":"74464ef4d5f825b590769f514c9857b40869a9be","modified":1533185010792},{"_id":"public/archives/2017/11/index.html","hash":"a638c9f10bf2bc8cce38578228e963dc2c13c4d9","modified":1533185010792},{"_id":"public/archives/2018/index.html","hash":"5044111a31d781caf7d2282362e99c5b8de1714d","modified":1533185010793},{"_id":"public/archives/2018/01/index.html","hash":"9691e68719d7863f40a2d542f89950ceadc49e82","modified":1533185010793},{"_id":"public/archives/2018/04/index.html","hash":"7cdaa333e24137eba14fd848b6711f78d2db440e","modified":1533185010793},{"_id":"public/archives/2018/07/index.html","hash":"a02ed784512df375067b9e2ee8623c0cbbc6425c","modified":1533185010794},{"_id":"public/archives/2018/08/index.html","hash":"3049392553b1bbe6daacbe8b52d71b8877229c07","modified":1533179382280},{"_id":"public/index.html","hash":"3990ce8d2e90324107b855f8654a156aae90b400","modified":1533185010794},{"_id":"public/page/2/index.html","hash":"e877db4c98528593518aa99aa3a9ab0bcf00f63c","modified":1533185010794},{"_id":"public/tags/linux/index.html","hash":"c2b8fdd0a5031a8208cbbcc47391c99f7f6f4ef8","modified":1533185010790},{"_id":"public/CNAME","hash":"55322c1421b50edf7927ccbec329c7ee30f1446a","modified":1533178602611},{"_id":"public/images/JSimple-iPhone-Landscape-Night-Demo.jpg","hash":"81e23ff03c4ec8d58aaf18a566f1168da4f92363","modified":1533178602611},{"_id":"public/images/donate-qr.png","hash":"f0dcb8820298d554e87d209e7b53b1953eed12db","modified":1533178602611},{"_id":"public/images/favicon.png","hash":"4429951b118d50bda2575d846fd9d9a88f1762f7","modified":1533178602611},{"_id":"public/images/sns-qrcode.png","hash":"e2c026527fbf1393caccdd2f8e44bac437232184","modified":1533178602611},{"_id":"public/images/rssFeed-bg.jpg","hash":"152d21e2a733e94c8a2c726fca8b2555b3d05979","modified":1533178602611},{"_id":"public/images/404-bg.jpg","hash":"85480e340d2af57c4e4b3ae93525ed608ea343b7","modified":1533178602717},{"_id":"public/images/tags-bg.jpg","hash":"c6e6461a60986eab08062fee324e2ce1e86fa2d7","modified":1533178602718},{"_id":"public/css/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1533178602718},{"_id":"public/css/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1533178602718},{"_id":"public/404.html","hash":"64ae9cf3ca9b6afdfa7f096c0f93b5c6fd605b34","modified":1533178602722},{"_id":"public/warn.html","hash":"1a2e9b6013fdf6b22f3790feffcc72533be385dd","modified":1533178602722},{"_id":"public/css/insight.css","hash":"daee9698b0f347d4ae50b585913a1f12d175561d","modified":1533178602722},{"_id":"public/js/InsightSearch.js","hash":"2995f3f94d0a9887b08e38a6f5053b6ca2997c19","modified":1533178602722},{"_id":"public/js/SimpleCore.js","hash":"7d003f683cb47b3547b0594cdf693bbff6aba9ec","modified":1533178602723},{"_id":"public/css/SimpleStyle.min.css","hash":"f69da0a43dbb9b72ce73e7352077c56004839c9b","modified":1533178602723},{"_id":"public/css/SimpleStyle.css","hash":"2457c9f301346ef2e82beae37443966660d0e043","modified":1533178602723},{"_id":"public/images/category-bg.jpg","hash":"f19159f9df99f7419fd6ce43eb8bdfc28cf9c01e","modified":1533178602723},{"_id":"public/images/cover-night.jpg","hash":"024e16a5f6a34afa7634526e467dfa4a725e5493","modified":1533178602723},{"_id":"public/css/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1533178602723},{"_id":"public/css/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1533178602723},{"_id":"public/css/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1533178602723},{"_id":"public/images/cover-day_01.jpg","hash":"8b1aa6c2fec2455bd44ce089496c561296b21371","modified":1533178602727},{"_id":"public/images/cover-day.jpg","hash":"7fb8a781d1d49c7e4d4b38ea136aed9b1a504f46","modified":1533178602731},{"_id":"public/css/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1533178602735},{"_id":"themes/jsimple/._config.yml.swp","hash":"c5c0f54bb7b281ac8f7c4f0bcd68d7f177c33b0e","modified":1533181435140},{"_id":"public/2017/07/13/blog/windows/windows涓嬪畨瑁卨inux鍏ㄦ柟浣嶈瀹炵敤/index.html","hash":"72d6dd06a6ca044a00fd98bf116f55b5bcde8de2","modified":1533185010798},{"_id":"public/2017/11/30/blog/linux/lamp鏋勬灦涓嬬殑缃戠珯鐜鎼缓/index.html","hash":"6dac9b2cde48c68703efdd0cd8ed2bd11763a1fd","modified":1533185010798}],"Category":[{"name":"life","_id":"cjkbvhve10005pym6lnitxict"},{"name":"生活","_id":"cjkbvhvel000apym61i4qnvdh"},{"name":"Linux","_id":"cjkbvhveu000gpym69w9xn7qf"},{"name":"linux","_id":"cjkbvhvf1000mpym6ojrlbpbf"},{"name":"web","_id":"cjkbvhvfa000vpym6w4y4jfdf"},{"name":"mysql","_id":"cjkbvhvg9001vpym66oevkbp2"},{"name":"python","_id":"cjkbvhvge0021pym6qp17nvld"},{"name":"coding","_id":"cjkbvhvgg0026pym6mr0t2qyf"},{"name":"webnet","_id":"cjkbvhvgl002hpym6ovtnh8o3"},{"name":"windows","_id":"cjkbvhvgn002lpym69fqv9yx3"},{"name":"安全","_id":"cjkbvhvgp002ppym6i465clnh"}],"Data":[],"Page":[{"_content":"<!--\nauthor: jockchou\nhead: http://pingodata.qiniudn.com/jockchou-avatar.jpg\ndate: 2015-07-31\ntitle: 欢迎使用GitBlog\ntags: GitBlog\nimages: http://pingodata.qiniudn.com/cube2.jpg\ncategory: GitBlog\nstatus: publish\nsummary: GitBlog是一个简单易用的Markdown博客系统，它不需要数据库，没有管理后台功能，更新博客只需要添加你写好的Markdown文件即可。\n-->\n\n## 一. 简介 ##\nGitBlog是一个简单易用的Markdown博客系统，它不需要数据库，没有管理后台功能，更新博客只需要添加你写好的Markdown文件即可。它摆脱了在线编辑器排版困难，无法实时预览的缺点，一切都交给Markdown来完成，一篇博客就是一个Markdown文件。同时也支持评论，代码高亮，数学公式，页面PV统计等常用功能。GitBlog提供了不同的主题样式，你可以根据自己的喜好配置，如果你想自己制作博客主题，也是非常容易的。GitBlog还支持整站静态导出，你完全可以导出整站静态网页部署到Github Pages。\n\n## 二. 功能特点 ##\n\n1. 使用Markdown  \n2. 评论框  \n3. 代码高亮  \n4. PV统计  \n5. Latex数学公式  \n6. 自制主题  \n7. 响应式  \n8. 全站静态导出  \n9. 良好的SEO  \n\n## 三. GitBlog优势 ##\n \n1. 无需数据库，系统更轻量，移植更方便  \n2. 使用Markdown编写，摆脱后台编辑排版困难，无法实时预览的缺点  \n3. 可全站静态导出  \n4. 配置灵活，可自由开关某些功能  \n5. 多主题支持，可自制主题  \n6. 博客，分类，标签，归档  \n\n## 四. 环境要求 ##\n\nPHP 5.2.4+\n\n## 五. 安装步骤 ##\n\n1. 下载GitBlog源代码  \n2. 解压上传到你的PHP网站根目录  \n3. 打开浏览器，访问网站首页  \n4. 上传Markdown文件到`posts`文件夹  \n\n## 六. 详细说明 ##\n\n[1. 安装][1]  \n[2. 目录结构][2]  \n[3. 配置说明][3]  \n[4. 编写博客][4]  \n[5. 评论，订阅，统计等][5]  \n[6. 缓存机制][6]  \n[7. 全站静态导出][7]  \n[8. 主题制作][8]  \n[9. 在Nginx上运行GitBlog][9]  \n[10. 在Apache上运行GitBlog][10]  \n[11. 在SAE上运行GitBlog][11]  \n[12. 使用GitBlog和Github Pages搭建博客][12]  \n[13. Gitblog升级][13]  \n[14. 从wordpress导入][14]\n\n## 七. 问题及bug反馈 ##\n\n如果在实际使用过程中对GitBlog有新的功能需求，或者在使用GitBlog的过程中发现了Bug，欢迎反馈给我。可以直接在Github上提交，也可以发邮件至`164068300[AT]qq.com`与我取得联系，我将及时回复。如果你自己制作了漂亮好用的主题，也非常欢迎你提交给我，我会在这里展示你的主题链接。如果你正在使用GitBlog，也可以告诉我，我将也会在这里列出使用者名单。如果你想和其他GitBlog使用者讨论交流，欢迎加入QQ群`84692078`。\n\n## 八. 使用者列表 ##\n\n- [Weeds][20]\n- [橙子][21]\n- [jockchou][22]\n- [GitBlog Doc][23]\n- [zxy][24]  \n\n## 九. 感谢 ##\n\nGitBlog的成长需要喜欢Markdown，喜欢写博客的各位亲们支持！感谢你们使用GitBlog，感激你们对Gitblog的良好建议与Bug反馈。\n\nQQ群：`84692078`  \n作者邮箱：`164068300[AT]qq.com`    \n\n\n[1]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/install.md\n[2]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/struct.md\n[3]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/config.md\n[4]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/edit.md\n[5]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/other-func.md\n[6]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/cache.md\n[7]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/export.md\n[8]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/theme.md\n[9]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/nginx.md\n[10]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/apache.md\n[11]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/sae.md\n[12]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/github-pages.md\n[13]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/update.md\n[14]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/wordpress.md\n\n\n[20]: http://blog.hiweeds.net\n[21]: http://xiaochengzi.sinaapp.com\n[22]: http://jockchou.com\n[23]: http://github.com/jockchou/gitblogdoc\n[24]: http://zxy.link\n\n","source":"welcome.md","raw":"<!--\nauthor: jockchou\nhead: http://pingodata.qiniudn.com/jockchou-avatar.jpg\ndate: 2015-07-31\ntitle: 欢迎使用GitBlog\ntags: GitBlog\nimages: http://pingodata.qiniudn.com/cube2.jpg\ncategory: GitBlog\nstatus: publish\nsummary: GitBlog是一个简单易用的Markdown博客系统，它不需要数据库，没有管理后台功能，更新博客只需要添加你写好的Markdown文件即可。\n-->\n\n## 一. 简介 ##\nGitBlog是一个简单易用的Markdown博客系统，它不需要数据库，没有管理后台功能，更新博客只需要添加你写好的Markdown文件即可。它摆脱了在线编辑器排版困难，无法实时预览的缺点，一切都交给Markdown来完成，一篇博客就是一个Markdown文件。同时也支持评论，代码高亮，数学公式，页面PV统计等常用功能。GitBlog提供了不同的主题样式，你可以根据自己的喜好配置，如果你想自己制作博客主题，也是非常容易的。GitBlog还支持整站静态导出，你完全可以导出整站静态网页部署到Github Pages。\n\n## 二. 功能特点 ##\n\n1. 使用Markdown  \n2. 评论框  \n3. 代码高亮  \n4. PV统计  \n5. Latex数学公式  \n6. 自制主题  \n7. 响应式  \n8. 全站静态导出  \n9. 良好的SEO  \n\n## 三. GitBlog优势 ##\n \n1. 无需数据库，系统更轻量，移植更方便  \n2. 使用Markdown编写，摆脱后台编辑排版困难，无法实时预览的缺点  \n3. 可全站静态导出  \n4. 配置灵活，可自由开关某些功能  \n5. 多主题支持，可自制主题  \n6. 博客，分类，标签，归档  \n\n## 四. 环境要求 ##\n\nPHP 5.2.4+\n\n## 五. 安装步骤 ##\n\n1. 下载GitBlog源代码  \n2. 解压上传到你的PHP网站根目录  \n3. 打开浏览器，访问网站首页  \n4. 上传Markdown文件到`posts`文件夹  \n\n## 六. 详细说明 ##\n\n[1. 安装][1]  \n[2. 目录结构][2]  \n[3. 配置说明][3]  \n[4. 编写博客][4]  \n[5. 评论，订阅，统计等][5]  \n[6. 缓存机制][6]  \n[7. 全站静态导出][7]  \n[8. 主题制作][8]  \n[9. 在Nginx上运行GitBlog][9]  \n[10. 在Apache上运行GitBlog][10]  \n[11. 在SAE上运行GitBlog][11]  \n[12. 使用GitBlog和Github Pages搭建博客][12]  \n[13. Gitblog升级][13]  \n[14. 从wordpress导入][14]\n\n## 七. 问题及bug反馈 ##\n\n如果在实际使用过程中对GitBlog有新的功能需求，或者在使用GitBlog的过程中发现了Bug，欢迎反馈给我。可以直接在Github上提交，也可以发邮件至`164068300[AT]qq.com`与我取得联系，我将及时回复。如果你自己制作了漂亮好用的主题，也非常欢迎你提交给我，我会在这里展示你的主题链接。如果你正在使用GitBlog，也可以告诉我，我将也会在这里列出使用者名单。如果你想和其他GitBlog使用者讨论交流，欢迎加入QQ群`84692078`。\n\n## 八. 使用者列表 ##\n\n- [Weeds][20]\n- [橙子][21]\n- [jockchou][22]\n- [GitBlog Doc][23]\n- [zxy][24]  \n\n## 九. 感谢 ##\n\nGitBlog的成长需要喜欢Markdown，喜欢写博客的各位亲们支持！感谢你们使用GitBlog，感激你们对Gitblog的良好建议与Bug反馈。\n\nQQ群：`84692078`  \n作者邮箱：`164068300[AT]qq.com`    \n\n\n[1]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/install.md\n[2]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/struct.md\n[3]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/config.md\n[4]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/edit.md\n[5]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/other-func.md\n[6]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/cache.md\n[7]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/export.md\n[8]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/theme.md\n[9]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/nginx.md\n[10]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/apache.md\n[11]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/sae.md\n[12]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/github-pages.md\n[13]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/update.md\n[14]:https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/wordpress.md\n\n\n[20]: http://blog.hiweeds.net\n[21]: http://xiaochengzi.sinaapp.com\n[22]: http://jockchou.com\n[23]: http://github.com/jockchou/gitblogdoc\n[24]: http://zxy.link\n\n","date":"2018-08-02T01:08:08.307Z","updated":"2017-08-16T09:27:16.000Z","path":"welcome.html","title":"","comments":1,"layout":"page","_id":"cjkbvhv6c0000pym6ktpybt8a","content":"<!--\nauthor: jockchou\nhead: http://pingodata.qiniudn.com/jockchou-avatar.jpg\ndate: 2015-07-31\ntitle: 欢迎使用GitBlog\ntags: GitBlog\nimages: http://pingodata.qiniudn.com/cube2.jpg\ncategory: GitBlog\nstatus: publish\nsummary: GitBlog是一个简单易用的Markdown博客系统，它不需要数据库，没有管理后台功能，更新博客只需要添加你写好的Markdown文件即可。\n-->\n<h2 id=\"一-简介\"><a href=\"#一-简介\" class=\"headerlink\" title=\"一. 简介\"></a>一. 简介</h2><p>GitBlog是一个简单易用的Markdown博客系统，它不需要数据库，没有管理后台功能，更新博客只需要添加你写好的Markdown文件即可。它摆脱了在线编辑器排版困难，无法实时预览的缺点，一切都交给Markdown来完成，一篇博客就是一个Markdown文件。同时也支持评论，代码高亮，数学公式，页面PV统计等常用功能。GitBlog提供了不同的主题样式，你可以根据自己的喜好配置，如果你想自己制作博客主题，也是非常容易的。GitBlog还支持整站静态导出，你完全可以导出整站静态网页部署到Github Pages。</p>\n<h2 id=\"二-功能特点\"><a href=\"#二-功能特点\" class=\"headerlink\" title=\"二. 功能特点\"></a>二. 功能特点</h2><ol>\n<li>使用Markdown  </li>\n<li>评论框  </li>\n<li>代码高亮  </li>\n<li>PV统计  </li>\n<li>Latex数学公式  </li>\n<li>自制主题  </li>\n<li>响应式  </li>\n<li>全站静态导出  </li>\n<li>良好的SEO  </li>\n</ol>\n<h2 id=\"三-GitBlog优势\"><a href=\"#三-GitBlog优势\" class=\"headerlink\" title=\"三. GitBlog优势\"></a>三. GitBlog优势</h2><ol>\n<li>无需数据库，系统更轻量，移植更方便  </li>\n<li>使用Markdown编写，摆脱后台编辑排版困难，无法实时预览的缺点  </li>\n<li>可全站静态导出  </li>\n<li>配置灵活，可自由开关某些功能  </li>\n<li>多主题支持，可自制主题  </li>\n<li>博客，分类，标签，归档  </li>\n</ol>\n<h2 id=\"四-环境要求\"><a href=\"#四-环境要求\" class=\"headerlink\" title=\"四. 环境要求\"></a>四. 环境要求</h2><p>PHP 5.2.4+</p>\n<h2 id=\"五-安装步骤\"><a href=\"#五-安装步骤\" class=\"headerlink\" title=\"五. 安装步骤\"></a>五. 安装步骤</h2><ol>\n<li>下载GitBlog源代码  </li>\n<li>解压上传到你的PHP网站根目录  </li>\n<li>打开浏览器，访问网站首页  </li>\n<li>上传Markdown文件到<code>posts</code>文件夹  </li>\n</ol>\n<h2 id=\"六-详细说明\"><a href=\"#六-详细说明\" class=\"headerlink\" title=\"六. 详细说明\"></a>六. 详细说明</h2><p><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/install.md\" target=\"_blank\" rel=\"noopener\">1. 安装</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/struct.md\" target=\"_blank\" rel=\"noopener\">2. 目录结构</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/config.md\" target=\"_blank\" rel=\"noopener\">3. 配置说明</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/edit.md\" target=\"_blank\" rel=\"noopener\">4. 编写博客</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/other-func.md\" target=\"_blank\" rel=\"noopener\">5. 评论，订阅，统计等</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/cache.md\" target=\"_blank\" rel=\"noopener\">6. 缓存机制</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/export.md\" target=\"_blank\" rel=\"noopener\">7. 全站静态导出</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/theme.md\" target=\"_blank\" rel=\"noopener\">8. 主题制作</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/nginx.md\" target=\"_blank\" rel=\"noopener\">9. 在Nginx上运行GitBlog</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/apache.md\" target=\"_blank\" rel=\"noopener\">10. 在Apache上运行GitBlog</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/sae.md\" target=\"_blank\" rel=\"noopener\">11. 在SAE上运行GitBlog</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/github-pages.md\" target=\"_blank\" rel=\"noopener\">12. 使用GitBlog和Github Pages搭建博客</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/update.md\" target=\"_blank\" rel=\"noopener\">13. Gitblog升级</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/wordpress.md\" target=\"_blank\" rel=\"noopener\">14. 从wordpress导入</a></p>\n<h2 id=\"七-问题及bug反馈\"><a href=\"#七-问题及bug反馈\" class=\"headerlink\" title=\"七. 问题及bug反馈\"></a>七. 问题及bug反馈</h2><p>如果在实际使用过程中对GitBlog有新的功能需求，或者在使用GitBlog的过程中发现了Bug，欢迎反馈给我。可以直接在Github上提交，也可以发邮件至<code>164068300[AT]qq.com</code>与我取得联系，我将及时回复。如果你自己制作了漂亮好用的主题，也非常欢迎你提交给我，我会在这里展示你的主题链接。如果你正在使用GitBlog，也可以告诉我，我将也会在这里列出使用者名单。如果你想和其他GitBlog使用者讨论交流，欢迎加入QQ群<code>84692078</code>。</p>\n<h2 id=\"八-使用者列表\"><a href=\"#八-使用者列表\" class=\"headerlink\" title=\"八. 使用者列表\"></a>八. 使用者列表</h2><ul>\n<li><a href=\"http://blog.hiweeds.net\" target=\"_blank\" rel=\"noopener\">Weeds</a></li>\n<li><a href=\"http://xiaochengzi.sinaapp.com\" target=\"_blank\" rel=\"noopener\">橙子</a></li>\n<li><a href=\"http://jockchou.com\" target=\"_blank\" rel=\"noopener\">jockchou</a></li>\n<li><a href=\"http://github.com/jockchou/gitblogdoc\" target=\"_blank\" rel=\"noopener\">GitBlog Doc</a></li>\n<li><a href=\"http://zxy.link\" target=\"_blank\" rel=\"noopener\">zxy</a>  </li>\n</ul>\n<h2 id=\"九-感谢\"><a href=\"#九-感谢\" class=\"headerlink\" title=\"九. 感谢\"></a>九. 感谢</h2><p>GitBlog的成长需要喜欢Markdown，喜欢写博客的各位亲们支持！感谢你们使用GitBlog，感激你们对Gitblog的良好建议与Bug反馈。</p>\n<p>QQ群：<code>84692078</code><br>作者邮箱：<code>164068300[AT]qq.com</code>    </p>\n","site":{"data":{}},"excerpt":"","more":"<!--\nauthor: jockchou\nhead: http://pingodata.qiniudn.com/jockchou-avatar.jpg\ndate: 2015-07-31\ntitle: 欢迎使用GitBlog\ntags: GitBlog\nimages: http://pingodata.qiniudn.com/cube2.jpg\ncategory: GitBlog\nstatus: publish\nsummary: GitBlog是一个简单易用的Markdown博客系统，它不需要数据库，没有管理后台功能，更新博客只需要添加你写好的Markdown文件即可。\n-->\n<h2 id=\"一-简介\"><a href=\"#一-简介\" class=\"headerlink\" title=\"一. 简介\"></a>一. 简介</h2><p>GitBlog是一个简单易用的Markdown博客系统，它不需要数据库，没有管理后台功能，更新博客只需要添加你写好的Markdown文件即可。它摆脱了在线编辑器排版困难，无法实时预览的缺点，一切都交给Markdown来完成，一篇博客就是一个Markdown文件。同时也支持评论，代码高亮，数学公式，页面PV统计等常用功能。GitBlog提供了不同的主题样式，你可以根据自己的喜好配置，如果你想自己制作博客主题，也是非常容易的。GitBlog还支持整站静态导出，你完全可以导出整站静态网页部署到Github Pages。</p>\n<h2 id=\"二-功能特点\"><a href=\"#二-功能特点\" class=\"headerlink\" title=\"二. 功能特点\"></a>二. 功能特点</h2><ol>\n<li>使用Markdown  </li>\n<li>评论框  </li>\n<li>代码高亮  </li>\n<li>PV统计  </li>\n<li>Latex数学公式  </li>\n<li>自制主题  </li>\n<li>响应式  </li>\n<li>全站静态导出  </li>\n<li>良好的SEO  </li>\n</ol>\n<h2 id=\"三-GitBlog优势\"><a href=\"#三-GitBlog优势\" class=\"headerlink\" title=\"三. GitBlog优势\"></a>三. GitBlog优势</h2><ol>\n<li>无需数据库，系统更轻量，移植更方便  </li>\n<li>使用Markdown编写，摆脱后台编辑排版困难，无法实时预览的缺点  </li>\n<li>可全站静态导出  </li>\n<li>配置灵活，可自由开关某些功能  </li>\n<li>多主题支持，可自制主题  </li>\n<li>博客，分类，标签，归档  </li>\n</ol>\n<h2 id=\"四-环境要求\"><a href=\"#四-环境要求\" class=\"headerlink\" title=\"四. 环境要求\"></a>四. 环境要求</h2><p>PHP 5.2.4+</p>\n<h2 id=\"五-安装步骤\"><a href=\"#五-安装步骤\" class=\"headerlink\" title=\"五. 安装步骤\"></a>五. 安装步骤</h2><ol>\n<li>下载GitBlog源代码  </li>\n<li>解压上传到你的PHP网站根目录  </li>\n<li>打开浏览器，访问网站首页  </li>\n<li>上传Markdown文件到<code>posts</code>文件夹  </li>\n</ol>\n<h2 id=\"六-详细说明\"><a href=\"#六-详细说明\" class=\"headerlink\" title=\"六. 详细说明\"></a>六. 详细说明</h2><p><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/install.md\" target=\"_blank\" rel=\"noopener\">1. 安装</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/struct.md\" target=\"_blank\" rel=\"noopener\">2. 目录结构</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/config.md\" target=\"_blank\" rel=\"noopener\">3. 配置说明</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/edit.md\" target=\"_blank\" rel=\"noopener\">4. 编写博客</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/other-func.md\" target=\"_blank\" rel=\"noopener\">5. 评论，订阅，统计等</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/cache.md\" target=\"_blank\" rel=\"noopener\">6. 缓存机制</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/export.md\" target=\"_blank\" rel=\"noopener\">7. 全站静态导出</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/theme.md\" target=\"_blank\" rel=\"noopener\">8. 主题制作</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/nginx.md\" target=\"_blank\" rel=\"noopener\">9. 在Nginx上运行GitBlog</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/apache.md\" target=\"_blank\" rel=\"noopener\">10. 在Apache上运行GitBlog</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/sae.md\" target=\"_blank\" rel=\"noopener\">11. 在SAE上运行GitBlog</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/github-pages.md\" target=\"_blank\" rel=\"noopener\">12. 使用GitBlog和Github Pages搭建博客</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/update.md\" target=\"_blank\" rel=\"noopener\">13. Gitblog升级</a><br><a href=\"https://github.com/jockchou/gitblogdoc/tree/master/posts/gitblog/wordpress.md\" target=\"_blank\" rel=\"noopener\">14. 从wordpress导入</a></p>\n<h2 id=\"七-问题及bug反馈\"><a href=\"#七-问题及bug反馈\" class=\"headerlink\" title=\"七. 问题及bug反馈\"></a>七. 问题及bug反馈</h2><p>如果在实际使用过程中对GitBlog有新的功能需求，或者在使用GitBlog的过程中发现了Bug，欢迎反馈给我。可以直接在Github上提交，也可以发邮件至<code>164068300[AT]qq.com</code>与我取得联系，我将及时回复。如果你自己制作了漂亮好用的主题，也非常欢迎你提交给我，我会在这里展示你的主题链接。如果你正在使用GitBlog，也可以告诉我，我将也会在这里列出使用者名单。如果你想和其他GitBlog使用者讨论交流，欢迎加入QQ群<code>84692078</code>。</p>\n<h2 id=\"八-使用者列表\"><a href=\"#八-使用者列表\" class=\"headerlink\" title=\"八. 使用者列表\"></a>八. 使用者列表</h2><ul>\n<li><a href=\"http://blog.hiweeds.net\" target=\"_blank\" rel=\"noopener\">Weeds</a></li>\n<li><a href=\"http://xiaochengzi.sinaapp.com\" target=\"_blank\" rel=\"noopener\">橙子</a></li>\n<li><a href=\"http://jockchou.com\" target=\"_blank\" rel=\"noopener\">jockchou</a></li>\n<li><a href=\"http://github.com/jockchou/gitblogdoc\" target=\"_blank\" rel=\"noopener\">GitBlog Doc</a></li>\n<li><a href=\"http://zxy.link\" target=\"_blank\" rel=\"noopener\">zxy</a>  </li>\n</ul>\n<h2 id=\"九-感谢\"><a href=\"#九-感谢\" class=\"headerlink\" title=\"九. 感谢\"></a>九. 感谢</h2><p>GitBlog的成长需要喜欢Markdown，喜欢写博客的各位亲们支持！感谢你们使用GitBlog，感激你们对Gitblog的良好建议与Bug反馈。</p>\n<p>QQ群：<code>84692078</code><br>作者邮箱：<code>164068300[AT]qq.com</code>    </p>\n"}],"Post":[{"author":"qwerse","head":null,"date":"2017-08-17T16:00:00.000Z","title":"恐惧是自己成长的粮食","images":null,"status":"publish","summary":"不要害怕前路的困难阻碍，用勇气去战胜这一切，让自己心服口服。","_content":"\n\n\n\n每一天我们平均都要恐惧一次，我的恐惧来自自卑，我怕发言，我怕别人注意到我。我每天都有害怕的东西，但我每次好像都克服了，我事后像获得了无穷的力量一样，我成长了。\n\n​\t恐惧是不能够消除的，这就好像世界上的属性一样，它跟水一样的。只有勇敢和无畏的精神才能够锻炼自我，使自己变得跟强。\n\n​\t不要让自己迷失在每一天中，坚持是一种优秀的品质，每一件事只有坚持，才能到达极致。自己的想法永远也不要脱离实际，无水之根，必定会走向灭亡。不要害怕前路的困难阻碍，用勇气去战胜这一切，让自己心服口服。把每一天都当做自己最后的一天去过，更能让自己看清以后的道路。脚踏实地，勇往直前。","source":"_posts/blog/life/鎭愭儳鏄嚜宸辨垚闀跨殑绮.md","raw":"\n---\nauthor: qwerse\nhead: \ndate: 2017-08-18\ntitle: 恐惧是自己成长的粮食\ntags: GitBlog\nimages: \ncategory: life\nstatus: publish\nsummary: 不要害怕前路的困难阻碍，用勇气去战胜这一切，让自己心服口服。\n---\n\n\n\n\n每一天我们平均都要恐惧一次，我的恐惧来自自卑，我怕发言，我怕别人注意到我。我每天都有害怕的东西，但我每次好像都克服了，我事后像获得了无穷的力量一样，我成长了。\n\n​\t恐惧是不能够消除的，这就好像世界上的属性一样，它跟水一样的。只有勇敢和无畏的精神才能够锻炼自我，使自己变得跟强。\n\n​\t不要让自己迷失在每一天中，坚持是一种优秀的品质，每一件事只有坚持，才能到达极致。自己的想法永远也不要脱离实际，无水之根，必定会走向灭亡。不要害怕前路的困难阻碍，用勇气去战胜这一切，让自己心服口服。把每一天都当做自己最后的一天去过，更能让自己看清以后的道路。脚踏实地，勇往直前。","slug":"blog/life/鎭愭儳鏄嚜宸辨垚闀跨殑绮","published":1,"updated":"2018-08-01T08:14:47.775Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvdo0003pym6i04lxve1","content":"<p>每一天我们平均都要恐惧一次，我的恐惧来自自卑，我怕发言，我怕别人注意到我。我每天都有害怕的东西，但我每次好像都克服了，我事后像获得了无穷的力量一样，我成长了。</p>\n<p>​    恐惧是不能够消除的，这就好像世界上的属性一样，它跟水一样的。只有勇敢和无畏的精神才能够锻炼自我，使自己变得跟强。</p>\n<p>​    不要让自己迷失在每一天中，坚持是一种优秀的品质，每一件事只有坚持，才能到达极致。自己的想法永远也不要脱离实际，无水之根，必定会走向灭亡。不要害怕前路的困难阻碍，用勇气去战胜这一切，让自己心服口服。把每一天都当做自己最后的一天去过，更能让自己看清以后的道路。脚踏实地，勇往直前。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>每一天我们平均都要恐惧一次，我的恐惧来自自卑，我怕发言，我怕别人注意到我。我每天都有害怕的东西，但我每次好像都克服了，我事后像获得了无穷的力量一样，我成长了。</p>\n<p>​    恐惧是不能够消除的，这就好像世界上的属性一样，它跟水一样的。只有勇敢和无畏的精神才能够锻炼自我，使自己变得跟强。</p>\n<p>​    不要让自己迷失在每一天中，坚持是一种优秀的品质，每一件事只有坚持，才能到达极致。自己的想法永远也不要脱离实际，无水之根，必定会走向灭亡。不要害怕前路的困难阻碍，用勇气去战胜这一切，让自己心服口服。把每一天都当做自己最后的一天去过，更能让自己看清以后的道路。脚踏实地，勇往直前。</p>\n"},{"author":"QwerSe","head":null,"date":"2017-10-25T16:00:00.000Z","title":"我的工作","status":"publish","summary":"其实自己也很无赖","_content":"\n其实自己也很无赖\n\n优秀员工里没有自己，平时自己也很努力，但好像得不到认可似的。\n\n眼前这份工作是我第一份工作，我很珍惜，但毕竟不是互联网公司，发展的路对于我来说，还是有限制的。\n\n学历到手我就准备辞职了。找一个好的方向发展。\n\n我像linux和python发展，这是必须的。\n\n得不到奖励我也没什么大不了的，没有对不起任何人就行 、继续加油吧。","source":"_posts/blog/life/鎴戠殑宸ヤ綔.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2017-10-26\ntitle:  我的工作\ntags: 工作\ncategory: 生活 \nstatus: publish\nsummary: 其实自己也很无赖\n---\n\n其实自己也很无赖\n\n优秀员工里没有自己，平时自己也很努力，但好像得不到认可似的。\n\n眼前这份工作是我第一份工作，我很珍惜，但毕竟不是互联网公司，发展的路对于我来说，还是有限制的。\n\n学历到手我就准备辞职了。找一个好的方向发展。\n\n我像linux和python发展，这是必须的。\n\n得不到奖励我也没什么大不了的，没有对不起任何人就行 、继续加油吧。","slug":"blog/life/鎴戠殑宸ヤ綔","published":1,"updated":"2018-08-01T08:14:59.107Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvdw0004pym6vv7e737v","content":"<p>其实自己也很无赖</p>\n<p>优秀员工里没有自己，平时自己也很努力，但好像得不到认可似的。</p>\n<p>眼前这份工作是我第一份工作，我很珍惜，但毕竟不是互联网公司，发展的路对于我来说，还是有限制的。</p>\n<p>学历到手我就准备辞职了。找一个好的方向发展。</p>\n<p>我像linux和python发展，这是必须的。</p>\n<p>得不到奖励我也没什么大不了的，没有对不起任何人就行 、继续加油吧。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>其实自己也很无赖</p>\n<p>优秀员工里没有自己，平时自己也很努力，但好像得不到认可似的。</p>\n<p>眼前这份工作是我第一份工作，我很珍惜，但毕竟不是互联网公司，发展的路对于我来说，还是有限制的。</p>\n<p>学历到手我就准备辞职了。找一个好的方向发展。</p>\n<p>我像linux和python发展，这是必须的。</p>\n<p>得不到奖励我也没什么大不了的，没有对不起任何人就行 、继续加油吧。</p>\n"},{"author":"QwerSe","head":null,"date":"2017-09-11T16:00:00.000Z","title":"awk使用方法","status":"publish","summary":"awk最重要的功能就是对文本数据进行出来，他比其他文本处理工具更加强大也复杂","_content":"awk是个比较高级的程序，它本身也是一个解释性的编程语言。\n\nawk最重要的功能就是对文本数据进行出来，他比其他文本处理工具更加强大也复杂。\n\n基本常用的格式：\n\n```\n#awk -F: '{print $1}' /etc/passwd\nroot\nbin\ndaemon\nadm\nlp\nsync\nshutdown\nhalt\nmail\noperator\ngames\nftp\nnobody\nsystemd-bus-proxy\nsystemd-network\ndbus\nsshd\n\n```\n\n上面是最常用的方法。\n\n---\n\n深入一点，awk自成一门编程语言肯定也会有if等逻辑语句\n\n- 常用条件操作符\n\n  ##### <    <=    ==     !=     >=    ~     !~\n\n- 匹配\n\n  ```\n  awk -F: '{if (1~/root/)   print 0}' /etc/passwd\n\n  awk -F: '$1~/root/' /etc/passwd\n\n  上面两条结果都是：root❌0:0:root:/root:/bin/bash\n\n  ```\n\n  ​\n\n  ​\n\n  ​\n\n  #####  这两条结果都相同\n\n- 精确匹配\n\n  `awk -F: '{if($3==\"0\") print $0}' /etc/passwd`\n\n  要记住后面print $0所打印的只是if的结果也就是：\n\n  ```\n  root❌0:0:root:/root:/bin/bash\n\n  把print 0 改成 print $3 打印出的结果是0\n  ```\n\n- 不匹配\n\n  `awk -F: '$3 != \"0\"' /etc/passwd`\n\n  结果\n\n  ```\n  bin:x:1:1:bin:/bin:/sbin/nologin\n  daemon:x:2:2:daemon:/sbin:/sbin/nologin\n  adm:x:3:4:adm:/var/adm:/sbin/nologin\n  lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n  sync:x:5:0:sync:/sbin:/bin/sync\n  shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown\n  halt:x:7:0:halt:/sbin:/sbin/halt\n  mail:x:8:12:mail:/var/spool/mail:/sbin/nologin\n  operator:x:11:0:operator:/root:/sbin/nologin\n  games:x:12:100:games:/usr/games:/sbin/nologin\n  ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin\n  nobody:x:99:99:Nobody:/:/sbin/nologin\n  systemd-bus-proxy:x:999:998:systemd Bus Proxy:/:/sbin/nologin\n  systemd-network:x:998:997:systemd Network Management:/:/sbin/nologin\n  dbus:x:81:81:System message bus:/:/sbin/nologin\n  sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin\n  ```\n\n  打印出了以:为分隔符，但是$3位置结果不是0的行。\n\n- 比较\n\n  `cat 2 |awk -F: '{if($3==$4) print $1,$3,$4}'`\n\n  结果\n\n  ```\n  root 0 0\n  bin 1 1\n  daemon 2 2\n  nobody 99 99\n  dbus 81 81\n  sshd 74 74\n\n  ```\n\n  当然也可以使用<和>\n\n- 使用正规则表达式\n\n  `cat 2 |awk -F: '$1 ~ /^root/'`\n\n  结果\n\n  `root:x:0:0:root:/root:/bin/bash`\n\n- 逻辑运算符\n\n  和 && \n\n  或 ||\n\n  取反  !\n\n  会shell的基本都知道这几个东西，主要是用来进行多个表达式判断用的\n\n  `cat 2 |awk -F: '{if(1==1 && 2==3)print $0}'`\n\n  结果会是0，这就是&&和的意思，两个判断式子都对才行\n\n  ||两个判断是对其中一个也行\n\n  ！取反 对是错，错是对\n\n  ---\n\n  AWK高级进阶\n\n- awk内置字符串函数\n\n  ```\n  -gsub(r,s) 在整个$0中用s代替r #awk 'gsub(/root/,1234)' {print $0} /etc/passwd\n  -gsub(r,s,t) 在t行中用s代替r  #awk  'gsub(/root/,\"deng\") {print $0}' /etc/passwd #！deng一定要是带引号。\n  -index(s,t) 返回s中字符串t的第一位置 # awk  '{print index(\"qwerse\",\"e\")}'\n  -length(s) 返回s长度 awk  '{print length($0)}' /etc/passwd\n  -match(s,r) 测试s是否包含匹配r的字符串 #awk -F: 'BEGIN {print match(\"root1\",root)}'\n  -split(s,a,fs) 在fs上将s分成序列作为一个数组储存在a #awk  'BEGIN {print split(\"qwerasdrfdsfr\",a,\"r\") }END{print a[2]}'  /dev/null\n  -printf(fmt,exp) 返回fmt格式化后的exp cat 2 | awk -F: '{print $3=sprintf(\"%20d\",$3)}'\n\n\n\n  ```\n\n  ​","source":"_posts/blog/linux/awk鐢ㄦ硶.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2017-09-12\ntitle:  awk使用方法\ntags: linux\n\ncategory: Linux\nstatus: publish\nsummary: awk最重要的功能就是对文本数据进行出来，他比其他文本处理工具更加强大也复杂\n---\nawk是个比较高级的程序，它本身也是一个解释性的编程语言。\n\nawk最重要的功能就是对文本数据进行出来，他比其他文本处理工具更加强大也复杂。\n\n基本常用的格式：\n\n```\n#awk -F: '{print $1}' /etc/passwd\nroot\nbin\ndaemon\nadm\nlp\nsync\nshutdown\nhalt\nmail\noperator\ngames\nftp\nnobody\nsystemd-bus-proxy\nsystemd-network\ndbus\nsshd\n\n```\n\n上面是最常用的方法。\n\n---\n\n深入一点，awk自成一门编程语言肯定也会有if等逻辑语句\n\n- 常用条件操作符\n\n  ##### <    <=    ==     !=     >=    ~     !~\n\n- 匹配\n\n  ```\n  awk -F: '{if (1~/root/)   print 0}' /etc/passwd\n\n  awk -F: '$1~/root/' /etc/passwd\n\n  上面两条结果都是：root❌0:0:root:/root:/bin/bash\n\n  ```\n\n  ​\n\n  ​\n\n  ​\n\n  #####  这两条结果都相同\n\n- 精确匹配\n\n  `awk -F: '{if($3==\"0\") print $0}' /etc/passwd`\n\n  要记住后面print $0所打印的只是if的结果也就是：\n\n  ```\n  root❌0:0:root:/root:/bin/bash\n\n  把print 0 改成 print $3 打印出的结果是0\n  ```\n\n- 不匹配\n\n  `awk -F: '$3 != \"0\"' /etc/passwd`\n\n  结果\n\n  ```\n  bin:x:1:1:bin:/bin:/sbin/nologin\n  daemon:x:2:2:daemon:/sbin:/sbin/nologin\n  adm:x:3:4:adm:/var/adm:/sbin/nologin\n  lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n  sync:x:5:0:sync:/sbin:/bin/sync\n  shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown\n  halt:x:7:0:halt:/sbin:/sbin/halt\n  mail:x:8:12:mail:/var/spool/mail:/sbin/nologin\n  operator:x:11:0:operator:/root:/sbin/nologin\n  games:x:12:100:games:/usr/games:/sbin/nologin\n  ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin\n  nobody:x:99:99:Nobody:/:/sbin/nologin\n  systemd-bus-proxy:x:999:998:systemd Bus Proxy:/:/sbin/nologin\n  systemd-network:x:998:997:systemd Network Management:/:/sbin/nologin\n  dbus:x:81:81:System message bus:/:/sbin/nologin\n  sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin\n  ```\n\n  打印出了以:为分隔符，但是$3位置结果不是0的行。\n\n- 比较\n\n  `cat 2 |awk -F: '{if($3==$4) print $1,$3,$4}'`\n\n  结果\n\n  ```\n  root 0 0\n  bin 1 1\n  daemon 2 2\n  nobody 99 99\n  dbus 81 81\n  sshd 74 74\n\n  ```\n\n  当然也可以使用<和>\n\n- 使用正规则表达式\n\n  `cat 2 |awk -F: '$1 ~ /^root/'`\n\n  结果\n\n  `root:x:0:0:root:/root:/bin/bash`\n\n- 逻辑运算符\n\n  和 && \n\n  或 ||\n\n  取反  !\n\n  会shell的基本都知道这几个东西，主要是用来进行多个表达式判断用的\n\n  `cat 2 |awk -F: '{if(1==1 && 2==3)print $0}'`\n\n  结果会是0，这就是&&和的意思，两个判断式子都对才行\n\n  ||两个判断是对其中一个也行\n\n  ！取反 对是错，错是对\n\n  ---\n\n  AWK高级进阶\n\n- awk内置字符串函数\n\n  ```\n  -gsub(r,s) 在整个$0中用s代替r #awk 'gsub(/root/,1234)' {print $0} /etc/passwd\n  -gsub(r,s,t) 在t行中用s代替r  #awk  'gsub(/root/,\"deng\") {print $0}' /etc/passwd #！deng一定要是带引号。\n  -index(s,t) 返回s中字符串t的第一位置 # awk  '{print index(\"qwerse\",\"e\")}'\n  -length(s) 返回s长度 awk  '{print length($0)}' /etc/passwd\n  -match(s,r) 测试s是否包含匹配r的字符串 #awk -F: 'BEGIN {print match(\"root1\",root)}'\n  -split(s,a,fs) 在fs上将s分成序列作为一个数组储存在a #awk  'BEGIN {print split(\"qwerasdrfdsfr\",a,\"r\") }END{print a[2]}'  /dev/null\n  -printf(fmt,exp) 返回fmt格式化后的exp cat 2 | awk -F: '{print $3=sprintf(\"%20d\",$3)}'\n\n\n\n  ```\n\n  ​","slug":"blog/linux/awk鐢ㄦ硶","published":1,"updated":"2018-08-01T04:16:09.923Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvea0007pym6mrvcdcis","content":"<p>awk是个比较高级的程序，它本身也是一个解释性的编程语言。</p>\n<p>awk最重要的功能就是对文本数据进行出来，他比其他文本处理工具更加强大也复杂。</p>\n<p>基本常用的格式：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#awk -F: &apos;&#123;print $1&#125;&apos; /etc/passwd</span><br><span class=\"line\">root</span><br><span class=\"line\">bin</span><br><span class=\"line\">daemon</span><br><span class=\"line\">adm</span><br><span class=\"line\">lp</span><br><span class=\"line\">sync</span><br><span class=\"line\">shutdown</span><br><span class=\"line\">halt</span><br><span class=\"line\">mail</span><br><span class=\"line\">operator</span><br><span class=\"line\">games</span><br><span class=\"line\">ftp</span><br><span class=\"line\">nobody</span><br><span class=\"line\">systemd-bus-proxy</span><br><span class=\"line\">systemd-network</span><br><span class=\"line\">dbus</span><br><span class=\"line\">sshd</span><br></pre></td></tr></table></figure>\n<p>上面是最常用的方法。</p>\n<hr>\n<p>深入一点，awk自成一门编程语言肯定也会有if等逻辑语句</p>\n<ul>\n<li><p>常用条件操作符</p>\n<h5 id=\"lt-lt-gt\"><a href=\"#lt-lt-gt\" class=\"headerlink\" title=\"&lt;    &lt;=    ==     !=     &gt;=    ~     !~\"></a>&lt;    &lt;=    ==     !=     &gt;=    ~     !~</h5></li>\n<li><p>匹配</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk -F: &apos;&#123;if (1~/root/)   print 0&#125;&apos; /etc/passwd</span><br><span class=\"line\"></span><br><span class=\"line\">awk -F: &apos;$1~/root/&apos; /etc/passwd</span><br><span class=\"line\"></span><br><span class=\"line\">上面两条结果都是：root❌0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>\n<p>​</p>\n<p>​</p>\n<p>​</p>\n<h5 id=\"这两条结果都相同\"><a href=\"#这两条结果都相同\" class=\"headerlink\" title=\"这两条结果都相同\"></a>这两条结果都相同</h5></li>\n<li><p>精确匹配</p>\n<p><code>awk -F: &#39;{if($3==&quot;0&quot;) print $0}&#39; /etc/passwd</code></p>\n<p>要记住后面print $0所打印的只是if的结果也就是：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root❌0:0:root:/root:/bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\">把print 0 改成 print $3 打印出的结果是0</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>不匹配</p>\n<p><code>awk -F: &#39;$3 != &quot;0&quot;&#39; /etc/passwd</code></p>\n<p>结果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class=\"line\">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class=\"line\">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class=\"line\">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class=\"line\">sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class=\"line\">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class=\"line\">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class=\"line\">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class=\"line\">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class=\"line\">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class=\"line\">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class=\"line\">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class=\"line\">systemd-bus-proxy:x:999:998:systemd Bus Proxy:/:/sbin/nologin</span><br><span class=\"line\">systemd-network:x:998:997:systemd Network Management:/:/sbin/nologin</span><br><span class=\"line\">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class=\"line\">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br></pre></td></tr></table></figure>\n<p>打印出了以:为分隔符，但是$3位置结果不是0的行。</p>\n</li>\n<li><p>比较</p>\n<p><code>cat 2 |awk -F: &#39;{if($3==$4) print $1,$3,$4}&#39;</code></p>\n<p>结果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root 0 0</span><br><span class=\"line\">bin 1 1</span><br><span class=\"line\">daemon 2 2</span><br><span class=\"line\">nobody 99 99</span><br><span class=\"line\">dbus 81 81</span><br><span class=\"line\">sshd 74 74</span><br></pre></td></tr></table></figure>\n<p>当然也可以使用&lt;和&gt;</p>\n</li>\n<li><p>使用正规则表达式</p>\n<p><code>cat 2 |awk -F: &#39;$1 ~ /^root/&#39;</code></p>\n<p>结果</p>\n<p><code>root:x:0:0:root:/root:/bin/bash</code></p>\n</li>\n<li><p>逻辑运算符</p>\n<p>和 &amp;&amp; </p>\n<p>或 ||</p>\n<p>取反  !</p>\n<p>会shell的基本都知道这几个东西，主要是用来进行多个表达式判断用的</p>\n<p><code>cat 2 |awk -F: &#39;{if(1==1 &amp;&amp; 2==3)print $0}&#39;</code></p>\n<p>结果会是0，这就是&amp;&amp;和的意思，两个判断式子都对才行</p>\n<p>||两个判断是对其中一个也行</p>\n<p>！取反 对是错，错是对</p>\n<hr>\n<p>AWK高级进阶</p>\n</li>\n<li><p>awk内置字符串函数</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-gsub(r,s) 在整个$0中用s代替r #awk &apos;gsub(/root/,1234)&apos; &#123;print $0&#125; /etc/passwd</span><br><span class=\"line\">-gsub(r,s,t) 在t行中用s代替r  #awk  &apos;gsub(/root/,&quot;deng&quot;) &#123;print $0&#125;&apos; /etc/passwd #！deng一定要是带引号。</span><br><span class=\"line\">-index(s,t) 返回s中字符串t的第一位置 # awk  &apos;&#123;print index(&quot;qwerse&quot;,&quot;e&quot;)&#125;&apos;</span><br><span class=\"line\">-length(s) 返回s长度 awk  &apos;&#123;print length($0)&#125;&apos; /etc/passwd</span><br><span class=\"line\">-match(s,r) 测试s是否包含匹配r的字符串 #awk -F: &apos;BEGIN &#123;print match(&quot;root1&quot;,root)&#125;&apos;</span><br><span class=\"line\">-split(s,a,fs) 在fs上将s分成序列作为一个数组储存在a #awk  &apos;BEGIN &#123;print split(&quot;qwerasdrfdsfr&quot;,a,&quot;r&quot;) &#125;END&#123;print a[2]&#125;&apos;  /dev/null</span><br><span class=\"line\">-printf(fmt,exp) 返回fmt格式化后的exp cat 2 | awk -F: &apos;&#123;print $3=sprintf(&quot;%20d&quot;,$3)&#125;&apos;</span><br></pre></td></tr></table></figure>\n<p>​</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>awk是个比较高级的程序，它本身也是一个解释性的编程语言。</p>\n<p>awk最重要的功能就是对文本数据进行出来，他比其他文本处理工具更加强大也复杂。</p>\n<p>基本常用的格式：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#awk -F: &apos;&#123;print $1&#125;&apos; /etc/passwd</span><br><span class=\"line\">root</span><br><span class=\"line\">bin</span><br><span class=\"line\">daemon</span><br><span class=\"line\">adm</span><br><span class=\"line\">lp</span><br><span class=\"line\">sync</span><br><span class=\"line\">shutdown</span><br><span class=\"line\">halt</span><br><span class=\"line\">mail</span><br><span class=\"line\">operator</span><br><span class=\"line\">games</span><br><span class=\"line\">ftp</span><br><span class=\"line\">nobody</span><br><span class=\"line\">systemd-bus-proxy</span><br><span class=\"line\">systemd-network</span><br><span class=\"line\">dbus</span><br><span class=\"line\">sshd</span><br></pre></td></tr></table></figure>\n<p>上面是最常用的方法。</p>\n<hr>\n<p>深入一点，awk自成一门编程语言肯定也会有if等逻辑语句</p>\n<ul>\n<li><p>常用条件操作符</p>\n<h5 id=\"lt-lt-gt\"><a href=\"#lt-lt-gt\" class=\"headerlink\" title=\"&lt;    &lt;=    ==     !=     &gt;=    ~     !~\"></a>&lt;    &lt;=    ==     !=     &gt;=    ~     !~</h5></li>\n<li><p>匹配</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk -F: &apos;&#123;if (1~/root/)   print 0&#125;&apos; /etc/passwd</span><br><span class=\"line\"></span><br><span class=\"line\">awk -F: &apos;$1~/root/&apos; /etc/passwd</span><br><span class=\"line\"></span><br><span class=\"line\">上面两条结果都是：root❌0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>\n<p>​</p>\n<p>​</p>\n<p>​</p>\n<h5 id=\"这两条结果都相同\"><a href=\"#这两条结果都相同\" class=\"headerlink\" title=\"这两条结果都相同\"></a>这两条结果都相同</h5></li>\n<li><p>精确匹配</p>\n<p><code>awk -F: &#39;{if($3==&quot;0&quot;) print $0}&#39; /etc/passwd</code></p>\n<p>要记住后面print $0所打印的只是if的结果也就是：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root❌0:0:root:/root:/bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\">把print 0 改成 print $3 打印出的结果是0</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>不匹配</p>\n<p><code>awk -F: &#39;$3 != &quot;0&quot;&#39; /etc/passwd</code></p>\n<p>结果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class=\"line\">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class=\"line\">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class=\"line\">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class=\"line\">sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class=\"line\">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class=\"line\">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class=\"line\">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class=\"line\">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class=\"line\">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class=\"line\">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class=\"line\">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class=\"line\">systemd-bus-proxy:x:999:998:systemd Bus Proxy:/:/sbin/nologin</span><br><span class=\"line\">systemd-network:x:998:997:systemd Network Management:/:/sbin/nologin</span><br><span class=\"line\">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class=\"line\">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br></pre></td></tr></table></figure>\n<p>打印出了以:为分隔符，但是$3位置结果不是0的行。</p>\n</li>\n<li><p>比较</p>\n<p><code>cat 2 |awk -F: &#39;{if($3==$4) print $1,$3,$4}&#39;</code></p>\n<p>结果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root 0 0</span><br><span class=\"line\">bin 1 1</span><br><span class=\"line\">daemon 2 2</span><br><span class=\"line\">nobody 99 99</span><br><span class=\"line\">dbus 81 81</span><br><span class=\"line\">sshd 74 74</span><br></pre></td></tr></table></figure>\n<p>当然也可以使用&lt;和&gt;</p>\n</li>\n<li><p>使用正规则表达式</p>\n<p><code>cat 2 |awk -F: &#39;$1 ~ /^root/&#39;</code></p>\n<p>结果</p>\n<p><code>root:x:0:0:root:/root:/bin/bash</code></p>\n</li>\n<li><p>逻辑运算符</p>\n<p>和 &amp;&amp; </p>\n<p>或 ||</p>\n<p>取反  !</p>\n<p>会shell的基本都知道这几个东西，主要是用来进行多个表达式判断用的</p>\n<p><code>cat 2 |awk -F: &#39;{if(1==1 &amp;&amp; 2==3)print $0}&#39;</code></p>\n<p>结果会是0，这就是&amp;&amp;和的意思，两个判断式子都对才行</p>\n<p>||两个判断是对其中一个也行</p>\n<p>！取反 对是错，错是对</p>\n<hr>\n<p>AWK高级进阶</p>\n</li>\n<li><p>awk内置字符串函数</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-gsub(r,s) 在整个$0中用s代替r #awk &apos;gsub(/root/,1234)&apos; &#123;print $0&#125; /etc/passwd</span><br><span class=\"line\">-gsub(r,s,t) 在t行中用s代替r  #awk  &apos;gsub(/root/,&quot;deng&quot;) &#123;print $0&#125;&apos; /etc/passwd #！deng一定要是带引号。</span><br><span class=\"line\">-index(s,t) 返回s中字符串t的第一位置 # awk  &apos;&#123;print index(&quot;qwerse&quot;,&quot;e&quot;)&#125;&apos;</span><br><span class=\"line\">-length(s) 返回s长度 awk  &apos;&#123;print length($0)&#125;&apos; /etc/passwd</span><br><span class=\"line\">-match(s,r) 测试s是否包含匹配r的字符串 #awk -F: &apos;BEGIN &#123;print match(&quot;root1&quot;,root)&#125;&apos;</span><br><span class=\"line\">-split(s,a,fs) 在fs上将s分成序列作为一个数组储存在a #awk  &apos;BEGIN &#123;print split(&quot;qwerasdrfdsfr&quot;,a,&quot;r&quot;) &#125;END&#123;print a[2]&#125;&apos;  /dev/null</span><br><span class=\"line\">-printf(fmt,exp) 返回fmt格式化后的exp cat 2 | awk -F: &apos;&#123;print $3=sprintf(&quot;%20d&quot;,$3)&#125;&apos;</span><br></pre></td></tr></table></figure>\n<p>​</p>\n</li>\n</ul>\n"},{"author":"qwerse","head":null,"date":"2017-08-15T16:00:00.000Z","title":"ubuntu16.04/boot分区满了,更新内核时导致apt出现错误","images":null,"status":"publish","summary":"更新内核时由于需要安装到/boot分区，但是/boot分区是满的，无法更新软件。导致apt的安装程序收阻，这也是一个bug吧。完全无法恢复，只能扩大/boot分区，才行。","_content":"\n\n问题场景：\n\n​\t更新内核，出现问题，提示文件写入不了/boot分区。仔细用 df -h 一看，/boot分区占用100%了。\n\n​\t\t这个时候apt也用不了了，什么软件也安装不了，提示依赖问题。\n\n\n\n问题总结：\n\n​\t\t更新内核时由于需要安装到/boot分区，但是/boot分区是满的，无法更新软件。导致apt的安装程序收阻，这也是一个bug吧。完全无法恢复，只能扩大/boot分区，才行。\n\n\n\n解决方法：\n#### 扩大/boot分区\n\n​\t\t假设有如下几个分区：\n\n- /dev/sda1      /boot      500M\n- /dev/sda2     /                400G\n- /dev/dm-0    swap         4G\n- /dev/sda3                        2G   #新的分区，用来替换现行的/boot分区\n\n#####格式化新分区为ext4,并设置为主分区：\n\n​\t在图形界面使用gparted这个软件，sudo apt-get install gparted。来进行硬盘操作。\n\n具体的使用方法我就不多说了，这不是主题，既然会玩linux，这就不是问题。\n\n##### 挂在新的分区到/boot，替换旧的/boot分区\n\n这个有个必须的操作，需要把旧分区的内容全部复制到新分区上\n\n​\t\n\n​\t挂在新硬盘到/mnt分区：sudo mount /dev/sda3 /mnt \n\n​\t把旧/boot分区的内容复制到新分区上：sudo rsync -av /boot/ /mnt/\n\n​\t卸载原/boot分区：sudo umount /boot\n\n​\t卸载新分区所在的mnt文件夹：sudo umount /mnt\n\n​\t挂在新分区到/boot下：sudo mount /dev/sda3 /boot\n\n##### 把更改信息添加到/etc/fstab文件，这是必须的，不然开不了机\n\n​\t查看新分区的UUID信息：sudo lbkid\t #查看/dev/sda3分区的UUID\n\n​\t如下例子：\n\n​\t\t\tUUID=883fa013-48ba-473e-b8bc-5c4d910872ff\t/boot\text4\tdefaults\t02\n\n​\t\t\t把新分区的UUID写到到文件里，覆盖旧分区的UUID。\n\n\n\n###重启开机，运行sudo apt-get install -f  就行了\n\n​\t\n\n\n\n\n\n\n\n\n\n\n\n​\t\t\t\t","source":"_posts/blog/linux/boot鍒嗗尯婊′簡+鏇存柊鍐呮牳鏃跺鑷碼pt鍑虹幇閿欒.md","raw":"---\nauthor: qwerse\nhead: \ndate: 2017-08-16\ntitle: ubuntu16.04/boot分区满了,更新内核时导致apt出现错误\ntags: linux\nimages: \ncategory: linux\nstatus: publish\nsummary: 更新内核时由于需要安装到/boot分区，但是/boot分区是满的，无法更新软件。导致apt的安装程序收阻，这也是一个bug吧。完全无法恢复，只能扩大/boot分区，才行。\n---\n\n\n问题场景：\n\n​\t更新内核，出现问题，提示文件写入不了/boot分区。仔细用 df -h 一看，/boot分区占用100%了。\n\n​\t\t这个时候apt也用不了了，什么软件也安装不了，提示依赖问题。\n\n\n\n问题总结：\n\n​\t\t更新内核时由于需要安装到/boot分区，但是/boot分区是满的，无法更新软件。导致apt的安装程序收阻，这也是一个bug吧。完全无法恢复，只能扩大/boot分区，才行。\n\n\n\n解决方法：\n#### 扩大/boot分区\n\n​\t\t假设有如下几个分区：\n\n- /dev/sda1      /boot      500M\n- /dev/sda2     /                400G\n- /dev/dm-0    swap         4G\n- /dev/sda3                        2G   #新的分区，用来替换现行的/boot分区\n\n#####格式化新分区为ext4,并设置为主分区：\n\n​\t在图形界面使用gparted这个软件，sudo apt-get install gparted。来进行硬盘操作。\n\n具体的使用方法我就不多说了，这不是主题，既然会玩linux，这就不是问题。\n\n##### 挂在新的分区到/boot，替换旧的/boot分区\n\n这个有个必须的操作，需要把旧分区的内容全部复制到新分区上\n\n​\t\n\n​\t挂在新硬盘到/mnt分区：sudo mount /dev/sda3 /mnt \n\n​\t把旧/boot分区的内容复制到新分区上：sudo rsync -av /boot/ /mnt/\n\n​\t卸载原/boot分区：sudo umount /boot\n\n​\t卸载新分区所在的mnt文件夹：sudo umount /mnt\n\n​\t挂在新分区到/boot下：sudo mount /dev/sda3 /boot\n\n##### 把更改信息添加到/etc/fstab文件，这是必须的，不然开不了机\n\n​\t查看新分区的UUID信息：sudo lbkid\t #查看/dev/sda3分区的UUID\n\n​\t如下例子：\n\n​\t\t\tUUID=883fa013-48ba-473e-b8bc-5c4d910872ff\t/boot\text4\tdefaults\t02\n\n​\t\t\t把新分区的UUID写到到文件里，覆盖旧分区的UUID。\n\n\n\n###重启开机，运行sudo apt-get install -f  就行了\n\n​\t\n\n\n\n\n\n\n\n\n\n\n\n​\t\t\t\t","slug":"blog/linux/boot鍒嗗尯婊′簡+鏇存柊鍐呮牳鏃跺鑷碼pt鍑虹幇閿欒","published":1,"updated":"2018-08-01T08:20:49.658Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvee0008pym6s2bdk1ww","content":"<p>问题场景：</p>\n<p>​    更新内核，出现问题，提示文件写入不了/boot分区。仔细用 df -h 一看，/boot分区占用100%了。</p>\n<p>​        这个时候apt也用不了了，什么软件也安装不了，提示依赖问题。</p>\n<p>问题总结：</p>\n<p>​        更新内核时由于需要安装到/boot分区，但是/boot分区是满的，无法更新软件。导致apt的安装程序收阻，这也是一个bug吧。完全无法恢复，只能扩大/boot分区，才行。</p>\n<p>解决方法：</p>\n<h4 id=\"扩大-boot分区\"><a href=\"#扩大-boot分区\" class=\"headerlink\" title=\"扩大/boot分区\"></a>扩大/boot分区</h4><p>​        假设有如下几个分区：</p>\n<ul>\n<li>/dev/sda1      /boot      500M</li>\n<li>/dev/sda2     /                400G</li>\n<li>/dev/dm-0    swap         4G</li>\n<li>/dev/sda3                        2G   #新的分区，用来替换现行的/boot分区</li>\n</ul>\n<p>#####格式化新分区为ext4,并设置为主分区：</p>\n<p>​    在图形界面使用gparted这个软件，sudo apt-get install gparted。来进行硬盘操作。</p>\n<p>具体的使用方法我就不多说了，这不是主题，既然会玩linux，这就不是问题。</p>\n<h5 id=\"挂在新的分区到-boot，替换旧的-boot分区\"><a href=\"#挂在新的分区到-boot，替换旧的-boot分区\" class=\"headerlink\" title=\"挂在新的分区到/boot，替换旧的/boot分区\"></a>挂在新的分区到/boot，替换旧的/boot分区</h5><p>这个有个必须的操作，需要把旧分区的内容全部复制到新分区上</p>\n<p>​    </p>\n<p>​    挂在新硬盘到/mnt分区：sudo mount /dev/sda3 /mnt </p>\n<p>​    把旧/boot分区的内容复制到新分区上：sudo rsync -av /boot/ /mnt/</p>\n<p>​    卸载原/boot分区：sudo umount /boot</p>\n<p>​    卸载新分区所在的mnt文件夹：sudo umount /mnt</p>\n<p>​    挂在新分区到/boot下：sudo mount /dev/sda3 /boot</p>\n<h5 id=\"把更改信息添加到-etc-fstab文件，这是必须的，不然开不了机\"><a href=\"#把更改信息添加到-etc-fstab文件，这是必须的，不然开不了机\" class=\"headerlink\" title=\"把更改信息添加到/etc/fstab文件，这是必须的，不然开不了机\"></a>把更改信息添加到/etc/fstab文件，这是必须的，不然开不了机</h5><p>​    查看新分区的UUID信息：sudo lbkid     #查看/dev/sda3分区的UUID</p>\n<p>​    如下例子：</p>\n<p>​            UUID=883fa013-48ba-473e-b8bc-5c4d910872ff    /boot    ext4    defaults    02</p>\n<p>​            把新分区的UUID写到到文件里，覆盖旧分区的UUID。</p>\n<p>###重启开机，运行sudo apt-get install -f  就行了</p>\n<p>​    </p>\n<p>​                </p>\n","site":{"data":{}},"excerpt":"","more":"<p>问题场景：</p>\n<p>​    更新内核，出现问题，提示文件写入不了/boot分区。仔细用 df -h 一看，/boot分区占用100%了。</p>\n<p>​        这个时候apt也用不了了，什么软件也安装不了，提示依赖问题。</p>\n<p>问题总结：</p>\n<p>​        更新内核时由于需要安装到/boot分区，但是/boot分区是满的，无法更新软件。导致apt的安装程序收阻，这也是一个bug吧。完全无法恢复，只能扩大/boot分区，才行。</p>\n<p>解决方法：</p>\n<h4 id=\"扩大-boot分区\"><a href=\"#扩大-boot分区\" class=\"headerlink\" title=\"扩大/boot分区\"></a>扩大/boot分区</h4><p>​        假设有如下几个分区：</p>\n<ul>\n<li>/dev/sda1      /boot      500M</li>\n<li>/dev/sda2     /                400G</li>\n<li>/dev/dm-0    swap         4G</li>\n<li>/dev/sda3                        2G   #新的分区，用来替换现行的/boot分区</li>\n</ul>\n<p>#####格式化新分区为ext4,并设置为主分区：</p>\n<p>​    在图形界面使用gparted这个软件，sudo apt-get install gparted。来进行硬盘操作。</p>\n<p>具体的使用方法我就不多说了，这不是主题，既然会玩linux，这就不是问题。</p>\n<h5 id=\"挂在新的分区到-boot，替换旧的-boot分区\"><a href=\"#挂在新的分区到-boot，替换旧的-boot分区\" class=\"headerlink\" title=\"挂在新的分区到/boot，替换旧的/boot分区\"></a>挂在新的分区到/boot，替换旧的/boot分区</h5><p>这个有个必须的操作，需要把旧分区的内容全部复制到新分区上</p>\n<p>​    </p>\n<p>​    挂在新硬盘到/mnt分区：sudo mount /dev/sda3 /mnt </p>\n<p>​    把旧/boot分区的内容复制到新分区上：sudo rsync -av /boot/ /mnt/</p>\n<p>​    卸载原/boot分区：sudo umount /boot</p>\n<p>​    卸载新分区所在的mnt文件夹：sudo umount /mnt</p>\n<p>​    挂在新分区到/boot下：sudo mount /dev/sda3 /boot</p>\n<h5 id=\"把更改信息添加到-etc-fstab文件，这是必须的，不然开不了机\"><a href=\"#把更改信息添加到-etc-fstab文件，这是必须的，不然开不了机\" class=\"headerlink\" title=\"把更改信息添加到/etc/fstab文件，这是必须的，不然开不了机\"></a>把更改信息添加到/etc/fstab文件，这是必须的，不然开不了机</h5><p>​    查看新分区的UUID信息：sudo lbkid     #查看/dev/sda3分区的UUID</p>\n<p>​    如下例子：</p>\n<p>​            UUID=883fa013-48ba-473e-b8bc-5c4d910872ff    /boot    ext4    defaults    02</p>\n<p>​            把新分区的UUID写到到文件里，覆盖旧分区的UUID。</p>\n<p>###重启开机，运行sudo apt-get install -f  就行了</p>\n<p>​    </p>\n<p>​                </p>\n"},{"author":"QwerSe","head":null,"date":"2016-11-02T16:00:00.000Z","title":"centos6,内核升级为3.10","status":"publish","summary":"内核升级用编译器，太慢太麻烦了，所有我就网上找资料，整理了一篇用yum升级内核的方法！","_content":"\n### 导入公钥：\n\n\trpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n\n### 要为redhat6和centos6安装ELRepo6仓库：\n\n\trpm -Uvh http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm\n\n\n### 安装 kernel-lt（lt=long-term）\n\n\tyum --enablerepo=elrepo-kernel install kernel-lt -y\n\n### 编辑grub.conf文件，修改Grub引导顺序\n\n\tvim /etc/grub.conf\n\t# grub.conf generated by anaconda\n\t#\n\t# Note that you do not have to rerun grub after making changes to this file\n\t# NOTICE:  You do not have a /boot partition.  This means that\n\t#          all kernel and initrd paths are relative to /, eg.\n\t#          root (hd0,0)\n\t#          kernel /boot/vmlinuz-version ro root=/dev/sda1\n\t#          initrd /boot/initrd-[generic-]version.img\n\t#boot=/dev/sda\n\tdefault=0\n\ttimeout=5\n\tsplashimage=(hd0,0)/boot/grub/splash.xpm.gz\n\thiddenmenu\n\ttitle CentOS (3.10.28-1.el6.elrepo.x86_64)\n\t\t\troot (hd0,0)\n\t\t\tkernel /boot/vmlinuz-3.10.28-1.el6.elrepo.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=en_US.UTF-8\n\t rd_NO_LVM rd_NO_DM rhgb quiet\n\t\t\tinitrd /boot/initramfs-3.10.28-1.el6.elrepo.x86_64.img\n\ttitle CentOS (2.6.32-431.3.1.el6.x86_64)\n\t\t\troot (hd0,0)\n\t\t\tkernel /boot/vmlinuz-2.6.32-431.3.1.el6.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=en_US.UTF-8 r\n\td_NO_LVM rd_NO_DM rhgb quiet\n\t\t\tinitrd /boot/initramfs-2.6.32-431.3.1.el6.x86_64.img\n\ttitle CentOS (2.6.32-431.el6.x86_64)\n\t\t\troot (hd0,0)\n\t\t\tkernel /boot/vmlinuz-2.6.32-431.el6.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-8 rd_NO\n\t_LVM rd_NO_DM rhgb quiet\n\t\t\tinitrd /boot/initramfs-2.6.32-431.el6.x86_64.img\n\t确认刚安装好的内核在哪个位置，然后设置default值（从0开始），一般新安装的内核在第一个位置，所以设置default=0。\n\n### 5、重启，查看内核版本号\n\n\t[root@dev ~]# uname -r\n\t3.10.28-1.el6.elrepo.x86_64\n \n\n","source":"_posts/blog/linux/centos6鍐呮牳鍗囩骇涓_.10.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2016-11-3\ntitle:  centos6,内核升级为3.10\ntags: linux\n\ncategory: web\nstatus: publish\nsummary: 内核升级用编译器，太慢太麻烦了，所有我就网上找资料，整理了一篇用yum升级内核的方法！\n---\n\n### 导入公钥：\n\n\trpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n\n### 要为redhat6和centos6安装ELRepo6仓库：\n\n\trpm -Uvh http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm\n\n\n### 安装 kernel-lt（lt=long-term）\n\n\tyum --enablerepo=elrepo-kernel install kernel-lt -y\n\n### 编辑grub.conf文件，修改Grub引导顺序\n\n\tvim /etc/grub.conf\n\t# grub.conf generated by anaconda\n\t#\n\t# Note that you do not have to rerun grub after making changes to this file\n\t# NOTICE:  You do not have a /boot partition.  This means that\n\t#          all kernel and initrd paths are relative to /, eg.\n\t#          root (hd0,0)\n\t#          kernel /boot/vmlinuz-version ro root=/dev/sda1\n\t#          initrd /boot/initrd-[generic-]version.img\n\t#boot=/dev/sda\n\tdefault=0\n\ttimeout=5\n\tsplashimage=(hd0,0)/boot/grub/splash.xpm.gz\n\thiddenmenu\n\ttitle CentOS (3.10.28-1.el6.elrepo.x86_64)\n\t\t\troot (hd0,0)\n\t\t\tkernel /boot/vmlinuz-3.10.28-1.el6.elrepo.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=en_US.UTF-8\n\t rd_NO_LVM rd_NO_DM rhgb quiet\n\t\t\tinitrd /boot/initramfs-3.10.28-1.el6.elrepo.x86_64.img\n\ttitle CentOS (2.6.32-431.3.1.el6.x86_64)\n\t\t\troot (hd0,0)\n\t\t\tkernel /boot/vmlinuz-2.6.32-431.3.1.el6.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=en_US.UTF-8 r\n\td_NO_LVM rd_NO_DM rhgb quiet\n\t\t\tinitrd /boot/initramfs-2.6.32-431.3.1.el6.x86_64.img\n\ttitle CentOS (2.6.32-431.el6.x86_64)\n\t\t\troot (hd0,0)\n\t\t\tkernel /boot/vmlinuz-2.6.32-431.el6.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-8 rd_NO\n\t_LVM rd_NO_DM rhgb quiet\n\t\t\tinitrd /boot/initramfs-2.6.32-431.el6.x86_64.img\n\t确认刚安装好的内核在哪个位置，然后设置default值（从0开始），一般新安装的内核在第一个位置，所以设置default=0。\n\n### 5、重启，查看内核版本号\n\n\t[root@dev ~]# uname -r\n\t3.10.28-1.el6.elrepo.x86_64\n \n\n","slug":"blog/linux/centos6鍐呮牳鍗囩骇涓_.10","published":1,"updated":"2018-08-01T08:20:49.897Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhveh0009pym6rwlvadvy","content":"<h3 id=\"导入公钥：\"><a href=\"#导入公钥：\" class=\"headerlink\" title=\"导入公钥：\"></a>导入公钥：</h3><pre><code>rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n</code></pre><h3 id=\"要为redhat6和centos6安装ELRepo6仓库：\"><a href=\"#要为redhat6和centos6安装ELRepo6仓库：\" class=\"headerlink\" title=\"要为redhat6和centos6安装ELRepo6仓库：\"></a>要为redhat6和centos6安装ELRepo6仓库：</h3><pre><code>rpm -Uvh http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm\n</code></pre><h3 id=\"安装-kernel-lt（lt-long-term）\"><a href=\"#安装-kernel-lt（lt-long-term）\" class=\"headerlink\" title=\"安装 kernel-lt（lt=long-term）\"></a>安装 kernel-lt（lt=long-term）</h3><pre><code>yum --enablerepo=elrepo-kernel install kernel-lt -y\n</code></pre><h3 id=\"编辑grub-conf文件，修改Grub引导顺序\"><a href=\"#编辑grub-conf文件，修改Grub引导顺序\" class=\"headerlink\" title=\"编辑grub.conf文件，修改Grub引导顺序\"></a>编辑grub.conf文件，修改Grub引导顺序</h3><pre><code>vim /etc/grub.conf\n# grub.conf generated by anaconda\n#\n# Note that you do not have to rerun grub after making changes to this file\n# NOTICE:  You do not have a /boot partition.  This means that\n#          all kernel and initrd paths are relative to /, eg.\n#          root (hd0,0)\n#          kernel /boot/vmlinuz-version ro root=/dev/sda1\n#          initrd /boot/initrd-[generic-]version.img\n#boot=/dev/sda\ndefault=0\ntimeout=5\nsplashimage=(hd0,0)/boot/grub/splash.xpm.gz\nhiddenmenu\ntitle CentOS (3.10.28-1.el6.elrepo.x86_64)\n        root (hd0,0)\n        kernel /boot/vmlinuz-3.10.28-1.el6.elrepo.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=en_US.UTF-8\n rd_NO_LVM rd_NO_DM rhgb quiet\n        initrd /boot/initramfs-3.10.28-1.el6.elrepo.x86_64.img\ntitle CentOS (2.6.32-431.3.1.el6.x86_64)\n        root (hd0,0)\n        kernel /boot/vmlinuz-2.6.32-431.3.1.el6.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=en_US.UTF-8 r\nd_NO_LVM rd_NO_DM rhgb quiet\n        initrd /boot/initramfs-2.6.32-431.3.1.el6.x86_64.img\ntitle CentOS (2.6.32-431.el6.x86_64)\n        root (hd0,0)\n        kernel /boot/vmlinuz-2.6.32-431.el6.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-8 rd_NO\n_LVM rd_NO_DM rhgb quiet\n        initrd /boot/initramfs-2.6.32-431.el6.x86_64.img\n确认刚安装好的内核在哪个位置，然后设置default值（从0开始），一般新安装的内核在第一个位置，所以设置default=0。\n</code></pre><h3 id=\"5、重启，查看内核版本号\"><a href=\"#5、重启，查看内核版本号\" class=\"headerlink\" title=\"5、重启，查看内核版本号\"></a>5、重启，查看内核版本号</h3><pre><code>[root@dev ~]# uname -r\n3.10.28-1.el6.elrepo.x86_64\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"导入公钥：\"><a href=\"#导入公钥：\" class=\"headerlink\" title=\"导入公钥：\"></a>导入公钥：</h3><pre><code>rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n</code></pre><h3 id=\"要为redhat6和centos6安装ELRepo6仓库：\"><a href=\"#要为redhat6和centos6安装ELRepo6仓库：\" class=\"headerlink\" title=\"要为redhat6和centos6安装ELRepo6仓库：\"></a>要为redhat6和centos6安装ELRepo6仓库：</h3><pre><code>rpm -Uvh http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm\n</code></pre><h3 id=\"安装-kernel-lt（lt-long-term）\"><a href=\"#安装-kernel-lt（lt-long-term）\" class=\"headerlink\" title=\"安装 kernel-lt（lt=long-term）\"></a>安装 kernel-lt（lt=long-term）</h3><pre><code>yum --enablerepo=elrepo-kernel install kernel-lt -y\n</code></pre><h3 id=\"编辑grub-conf文件，修改Grub引导顺序\"><a href=\"#编辑grub-conf文件，修改Grub引导顺序\" class=\"headerlink\" title=\"编辑grub.conf文件，修改Grub引导顺序\"></a>编辑grub.conf文件，修改Grub引导顺序</h3><pre><code>vim /etc/grub.conf\n# grub.conf generated by anaconda\n#\n# Note that you do not have to rerun grub after making changes to this file\n# NOTICE:  You do not have a /boot partition.  This means that\n#          all kernel and initrd paths are relative to /, eg.\n#          root (hd0,0)\n#          kernel /boot/vmlinuz-version ro root=/dev/sda1\n#          initrd /boot/initrd-[generic-]version.img\n#boot=/dev/sda\ndefault=0\ntimeout=5\nsplashimage=(hd0,0)/boot/grub/splash.xpm.gz\nhiddenmenu\ntitle CentOS (3.10.28-1.el6.elrepo.x86_64)\n        root (hd0,0)\n        kernel /boot/vmlinuz-3.10.28-1.el6.elrepo.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=en_US.UTF-8\n rd_NO_LVM rd_NO_DM rhgb quiet\n        initrd /boot/initramfs-3.10.28-1.el6.elrepo.x86_64.img\ntitle CentOS (2.6.32-431.3.1.el6.x86_64)\n        root (hd0,0)\n        kernel /boot/vmlinuz-2.6.32-431.3.1.el6.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=en_US.UTF-8 r\nd_NO_LVM rd_NO_DM rhgb quiet\n        initrd /boot/initramfs-2.6.32-431.3.1.el6.x86_64.img\ntitle CentOS (2.6.32-431.el6.x86_64)\n        root (hd0,0)\n        kernel /boot/vmlinuz-2.6.32-431.el6.x86_64 ro root=UUID=0a05411f-16f2-4d69-beb0-2db4cefd3613 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-8 rd_NO\n_LVM rd_NO_DM rhgb quiet\n        initrd /boot/initramfs-2.6.32-431.el6.x86_64.img\n确认刚安装好的内核在哪个位置，然后设置default值（从0开始），一般新安装的内核在第一个位置，所以设置default=0。\n</code></pre><h3 id=\"5、重启，查看内核版本号\"><a href=\"#5、重启，查看内核版本号\" class=\"headerlink\" title=\"5、重启，查看内核版本号\"></a>5、重启，查看内核版本号</h3><pre><code>[root@dev ~]# uname -r\n3.10.28-1.el6.elrepo.x86_64\n</code></pre>"},{"author":"QwerSe","head":null,"date":"2017-09-18T16:00:00.000Z","title":"centos启动管理","images":"http://pingodata.qiniudn.com/cube2.jpg","status":"publish","summary":"当密码忘记的时候可以这么做","_content":"\n\n\n当密码忘记的时候可以这么做\n\n1. 在开机界面的启动条按\"e\"编辑 在内核条上再按\"e\"编辑\n\n   在quit后面添加一个 \"1\"，和quit要有一个空格。完成后返回按'b'，就能启动了\n\n   就能进入单用户模式，改密码了。\n\n2. 按e进不去编辑界面，要输入p，提示输入密码才给编辑，这是grub被锁的原因，这个时候只能用光盘模式修复了！\n\n   这就像windows的pe模式一样的可以改grub的密码。\n\n   进入光盘的shell。输入以下命令：\n\n   `chroot mnt/sysimge`\n\n再输入passwd root\n\n就能改密码\n\n这是centos6左右的改密码，7有所不同","source":"_posts/blog/linux/centos鍚姩绠＄悊.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2017-9-19\ntitle: centos启动管理\ntags: linux\nimages: http://pingodata.qiniudn.com/cube2.jpg\ncategory: linux\nstatus: publish\nsummary: 当密码忘记的时候可以这么做\n---\n\n\n\n当密码忘记的时候可以这么做\n\n1. 在开机界面的启动条按\"e\"编辑 在内核条上再按\"e\"编辑\n\n   在quit后面添加一个 \"1\"，和quit要有一个空格。完成后返回按'b'，就能启动了\n\n   就能进入单用户模式，改密码了。\n\n2. 按e进不去编辑界面，要输入p，提示输入密码才给编辑，这是grub被锁的原因，这个时候只能用光盘模式修复了！\n\n   这就像windows的pe模式一样的可以改grub的密码。\n\n   进入光盘的shell。输入以下命令：\n\n   `chroot mnt/sysimge`\n\n再输入passwd root\n\n就能改密码\n\n这是centos6左右的改密码，7有所不同","slug":"blog/linux/centos鍚姩绠＄悊","published":1,"updated":"2018-08-01T08:20:49.676Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhven000dpym611lcnm91","content":"<p>当密码忘记的时候可以这么做</p>\n<ol>\n<li><p>在开机界面的启动条按”e”编辑 在内核条上再按”e”编辑</p>\n<p>在quit后面添加一个 “1”，和quit要有一个空格。完成后返回按’b’，就能启动了</p>\n<p>就能进入单用户模式，改密码了。</p>\n</li>\n<li><p>按e进不去编辑界面，要输入p，提示输入密码才给编辑，这是grub被锁的原因，这个时候只能用光盘模式修复了！</p>\n<p>这就像windows的pe模式一样的可以改grub的密码。</p>\n<p>进入光盘的shell。输入以下命令：</p>\n<p><code>chroot mnt/sysimge</code></p>\n</li>\n</ol>\n<p>再输入passwd root</p>\n<p>就能改密码</p>\n<p>这是centos6左右的改密码，7有所不同</p>\n","site":{"data":{}},"excerpt":"","more":"<p>当密码忘记的时候可以这么做</p>\n<ol>\n<li><p>在开机界面的启动条按”e”编辑 在内核条上再按”e”编辑</p>\n<p>在quit后面添加一个 “1”，和quit要有一个空格。完成后返回按’b’，就能启动了</p>\n<p>就能进入单用户模式，改密码了。</p>\n</li>\n<li><p>按e进不去编辑界面，要输入p，提示输入密码才给编辑，这是grub被锁的原因，这个时候只能用光盘模式修复了！</p>\n<p>这就像windows的pe模式一样的可以改grub的密码。</p>\n<p>进入光盘的shell。输入以下命令：</p>\n<p><code>chroot mnt/sysimge</code></p>\n</li>\n</ol>\n<p>再输入passwd root</p>\n<p>就能改密码</p>\n<p>这是centos6左右的改密码，7有所不同</p>\n"},{"author":"QwerSe","head":null,"date":"2018-07-05T16:00:00.000Z","title":"cobbler配置的安装和坑","status":"publish","summary":"能进安装界面，但是卡死不动，是ks文件没有配置好。","_content":"\n\n\n#####  先说一下坑\n\n- url --url=\"http://127.0.0.1/cobbler/ks_mirror/Centos-7.4mini-x86_64/\" \n\n  ks文件里一定要指定`url --url`,127.0.0.1一定要替换局域网里面的ip\n\n- 能进安装界面，但是卡死不动，是ks文件没有配置好。怎么获取好的配置文件呢？最简单的方式就是用光盘安装一遍。进入root主目录有个ana开头的文件，把里面的内容复制下来就行了。我一般喜欢用图形安装方式，比较不容易出现问题。\n\n#### 安装配置步骤\n\n网上教程太多，重复的造轮子也没有什么意义\n\n选择一篇我自己实践过的文章，写的非常的好。\n\n[文章（点击下载）](https://www.jianguoyun.com/p/DROpJUgQqeD4BhighWE)\n\n附一下\n我的ks文件，是centos7的图形安装\n```\n#version=DEVEL\n# System authorization information\nauth --enableshadow --passalgo=sha512\n# Use CDROM installation media\ninstall\n# Use graphical install\ngraphical\n# Run the Setup Agent on first boot\nfirstboot --enable\nignoredisk --only-use=sda\n# Keyboard layouts\nkeyboard --vckeymap=us --xlayouts='us'\n# System language\nlang en_US.UTF-8\n\n# Network information\nnetwork  --bootproto=dhcp --device=eth0 --onboot=off --ipv6=auto --no-activate\nnetwork  --hostname=localhost.localdomain\n\n# Root password\nrootpw --iscrypted $6$KISrAVI4.I92wl5M$Q4vAA3tqkoXOq0otYYUBEwtHdb1SB9YttiEBzOkcHhALakx/1sUoh1y83bSB2zUFvtTd6Zgb9Xq4lxhJ.hE.y/\n# System services\nservices --enabled=\"chronyd\"\n# System timezone\ntimezone America/New_York --isUtc\n# System bootloader configuration\nbootloader --append=\" crashkernel=auto\" --location=mbr --boot-drive=sda\nautopart --type=lvm\n# Partition clearing information\nclearpart --none --initlabel\n\n%packages\n@minimal\n@core\nchrony\nkexec-tools\n\n%end\n\n%addon com_redhat_kdump --enable --reserve-mb='auto'\n\n%end\n\n%anaconda\npwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty\npwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok\npwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty\n%end\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/blog/linux/cobbler閰嶇疆鍙婂潙.md","raw":"---\nauthor: QwerSe\nhead:\ndate: 2018-07-06\ntitle: cobbler配置的安装和坑\ntags: cobbler\n\ncategory: linux\nstatus: publish\nsummary: 能进安装界面，但是卡死不动，是ks文件没有配置好。\n---\n\n\n\n#####  先说一下坑\n\n- url --url=\"http://127.0.0.1/cobbler/ks_mirror/Centos-7.4mini-x86_64/\" \n\n  ks文件里一定要指定`url --url`,127.0.0.1一定要替换局域网里面的ip\n\n- 能进安装界面，但是卡死不动，是ks文件没有配置好。怎么获取好的配置文件呢？最简单的方式就是用光盘安装一遍。进入root主目录有个ana开头的文件，把里面的内容复制下来就行了。我一般喜欢用图形安装方式，比较不容易出现问题。\n\n#### 安装配置步骤\n\n网上教程太多，重复的造轮子也没有什么意义\n\n选择一篇我自己实践过的文章，写的非常的好。\n\n[文章（点击下载）](https://www.jianguoyun.com/p/DROpJUgQqeD4BhighWE)\n\n附一下\n我的ks文件，是centos7的图形安装\n```\n#version=DEVEL\n# System authorization information\nauth --enableshadow --passalgo=sha512\n# Use CDROM installation media\ninstall\n# Use graphical install\ngraphical\n# Run the Setup Agent on first boot\nfirstboot --enable\nignoredisk --only-use=sda\n# Keyboard layouts\nkeyboard --vckeymap=us --xlayouts='us'\n# System language\nlang en_US.UTF-8\n\n# Network information\nnetwork  --bootproto=dhcp --device=eth0 --onboot=off --ipv6=auto --no-activate\nnetwork  --hostname=localhost.localdomain\n\n# Root password\nrootpw --iscrypted $6$KISrAVI4.I92wl5M$Q4vAA3tqkoXOq0otYYUBEwtHdb1SB9YttiEBzOkcHhALakx/1sUoh1y83bSB2zUFvtTd6Zgb9Xq4lxhJ.hE.y/\n# System services\nservices --enabled=\"chronyd\"\n# System timezone\ntimezone America/New_York --isUtc\n# System bootloader configuration\nbootloader --append=\" crashkernel=auto\" --location=mbr --boot-drive=sda\nautopart --type=lvm\n# Partition clearing information\nclearpart --none --initlabel\n\n%packages\n@minimal\n@core\nchrony\nkexec-tools\n\n%end\n\n%addon com_redhat_kdump --enable --reserve-mb='auto'\n\n%end\n\n%anaconda\npwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty\npwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok\npwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty\n%end\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"blog/linux/cobbler閰嶇疆鍙婂潙","published":1,"updated":"2018-08-01T08:20:49.787Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhver000epym6ot807d9c","content":"<h5 id=\"先说一下坑\"><a href=\"#先说一下坑\" class=\"headerlink\" title=\"先说一下坑\"></a>先说一下坑</h5><ul>\n<li><p>url –url=”<a href=\"http://127.0.0.1/cobbler/ks_mirror/Centos-7.4mini-x86_64/&quot;\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1/cobbler/ks_mirror/Centos-7.4mini-x86_64/&quot;</a> </p>\n<p>ks文件里一定要指定<code>url --url</code>,127.0.0.1一定要替换局域网里面的ip</p>\n</li>\n<li><p>能进安装界面，但是卡死不动，是ks文件没有配置好。怎么获取好的配置文件呢？最简单的方式就是用光盘安装一遍。进入root主目录有个ana开头的文件，把里面的内容复制下来就行了。我一般喜欢用图形安装方式，比较不容易出现问题。</p>\n</li>\n</ul>\n<h4 id=\"安装配置步骤\"><a href=\"#安装配置步骤\" class=\"headerlink\" title=\"安装配置步骤\"></a>安装配置步骤</h4><p>网上教程太多，重复的造轮子也没有什么意义</p>\n<p>选择一篇我自己实践过的文章，写的非常的好。</p>\n<p><a href=\"https://www.jianguoyun.com/p/DROpJUgQqeD4BhighWE\" target=\"_blank\" rel=\"noopener\">文章（点击下载）</a></p>\n<p>附一下<br>我的ks文件，是centos7的图形安装<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#version=DEVEL</span><br><span class=\"line\"># System authorization information</span><br><span class=\"line\">auth --enableshadow --passalgo=sha512</span><br><span class=\"line\"># Use CDROM installation media</span><br><span class=\"line\">install</span><br><span class=\"line\"># Use graphical install</span><br><span class=\"line\">graphical</span><br><span class=\"line\"># Run the Setup Agent on first boot</span><br><span class=\"line\">firstboot --enable</span><br><span class=\"line\">ignoredisk --only-use=sda</span><br><span class=\"line\"># Keyboard layouts</span><br><span class=\"line\">keyboard --vckeymap=us --xlayouts=&apos;us&apos;</span><br><span class=\"line\"># System language</span><br><span class=\"line\">lang en_US.UTF-8</span><br><span class=\"line\"></span><br><span class=\"line\"># Network information</span><br><span class=\"line\">network  --bootproto=dhcp --device=eth0 --onboot=off --ipv6=auto --no-activate</span><br><span class=\"line\">network  --hostname=localhost.localdomain</span><br><span class=\"line\"></span><br><span class=\"line\"># Root password</span><br><span class=\"line\">rootpw --iscrypted $6$KISrAVI4.I92wl5M$Q4vAA3tqkoXOq0otYYUBEwtHdb1SB9YttiEBzOkcHhALakx/1sUoh1y83bSB2zUFvtTd6Zgb9Xq4lxhJ.hE.y/</span><br><span class=\"line\"># System services</span><br><span class=\"line\">services --enabled=&quot;chronyd&quot;</span><br><span class=\"line\"># System timezone</span><br><span class=\"line\">timezone America/New_York --isUtc</span><br><span class=\"line\"># System bootloader configuration</span><br><span class=\"line\">bootloader --append=&quot; crashkernel=auto&quot; --location=mbr --boot-drive=sda</span><br><span class=\"line\">autopart --type=lvm</span><br><span class=\"line\"># Partition clearing information</span><br><span class=\"line\">clearpart --none --initlabel</span><br><span class=\"line\"></span><br><span class=\"line\">%packages</span><br><span class=\"line\">@minimal</span><br><span class=\"line\">@core</span><br><span class=\"line\">chrony</span><br><span class=\"line\">kexec-tools</span><br><span class=\"line\"></span><br><span class=\"line\">%end</span><br><span class=\"line\"></span><br><span class=\"line\">%addon com_redhat_kdump --enable --reserve-mb=&apos;auto&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">%end</span><br><span class=\"line\"></span><br><span class=\"line\">%anaconda</span><br><span class=\"line\">pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class=\"line\">pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok</span><br><span class=\"line\">pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class=\"line\">%end</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h5 id=\"先说一下坑\"><a href=\"#先说一下坑\" class=\"headerlink\" title=\"先说一下坑\"></a>先说一下坑</h5><ul>\n<li><p>url –url=”<a href=\"http://127.0.0.1/cobbler/ks_mirror/Centos-7.4mini-x86_64/&quot;\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1/cobbler/ks_mirror/Centos-7.4mini-x86_64/&quot;</a> </p>\n<p>ks文件里一定要指定<code>url --url</code>,127.0.0.1一定要替换局域网里面的ip</p>\n</li>\n<li><p>能进安装界面，但是卡死不动，是ks文件没有配置好。怎么获取好的配置文件呢？最简单的方式就是用光盘安装一遍。进入root主目录有个ana开头的文件，把里面的内容复制下来就行了。我一般喜欢用图形安装方式，比较不容易出现问题。</p>\n</li>\n</ul>\n<h4 id=\"安装配置步骤\"><a href=\"#安装配置步骤\" class=\"headerlink\" title=\"安装配置步骤\"></a>安装配置步骤</h4><p>网上教程太多，重复的造轮子也没有什么意义</p>\n<p>选择一篇我自己实践过的文章，写的非常的好。</p>\n<p><a href=\"https://www.jianguoyun.com/p/DROpJUgQqeD4BhighWE\" target=\"_blank\" rel=\"noopener\">文章（点击下载）</a></p>\n<p>附一下<br>我的ks文件，是centos7的图形安装<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#version=DEVEL</span><br><span class=\"line\"># System authorization information</span><br><span class=\"line\">auth --enableshadow --passalgo=sha512</span><br><span class=\"line\"># Use CDROM installation media</span><br><span class=\"line\">install</span><br><span class=\"line\"># Use graphical install</span><br><span class=\"line\">graphical</span><br><span class=\"line\"># Run the Setup Agent on first boot</span><br><span class=\"line\">firstboot --enable</span><br><span class=\"line\">ignoredisk --only-use=sda</span><br><span class=\"line\"># Keyboard layouts</span><br><span class=\"line\">keyboard --vckeymap=us --xlayouts=&apos;us&apos;</span><br><span class=\"line\"># System language</span><br><span class=\"line\">lang en_US.UTF-8</span><br><span class=\"line\"></span><br><span class=\"line\"># Network information</span><br><span class=\"line\">network  --bootproto=dhcp --device=eth0 --onboot=off --ipv6=auto --no-activate</span><br><span class=\"line\">network  --hostname=localhost.localdomain</span><br><span class=\"line\"></span><br><span class=\"line\"># Root password</span><br><span class=\"line\">rootpw --iscrypted $6$KISrAVI4.I92wl5M$Q4vAA3tqkoXOq0otYYUBEwtHdb1SB9YttiEBzOkcHhALakx/1sUoh1y83bSB2zUFvtTd6Zgb9Xq4lxhJ.hE.y/</span><br><span class=\"line\"># System services</span><br><span class=\"line\">services --enabled=&quot;chronyd&quot;</span><br><span class=\"line\"># System timezone</span><br><span class=\"line\">timezone America/New_York --isUtc</span><br><span class=\"line\"># System bootloader configuration</span><br><span class=\"line\">bootloader --append=&quot; crashkernel=auto&quot; --location=mbr --boot-drive=sda</span><br><span class=\"line\">autopart --type=lvm</span><br><span class=\"line\"># Partition clearing information</span><br><span class=\"line\">clearpart --none --initlabel</span><br><span class=\"line\"></span><br><span class=\"line\">%packages</span><br><span class=\"line\">@minimal</span><br><span class=\"line\">@core</span><br><span class=\"line\">chrony</span><br><span class=\"line\">kexec-tools</span><br><span class=\"line\"></span><br><span class=\"line\">%end</span><br><span class=\"line\"></span><br><span class=\"line\">%addon com_redhat_kdump --enable --reserve-mb=&apos;auto&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">%end</span><br><span class=\"line\"></span><br><span class=\"line\">%anaconda</span><br><span class=\"line\">pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class=\"line\">pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok</span><br><span class=\"line\">pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class=\"line\">%end</span><br></pre></td></tr></table></figure></p>\n"},{"author":"QwerSe","head":null,"date":"2016-12-07T16:00:00.000Z","title":"docker的基本用法","status":"publish","summary":"docker这么火，肯定要有所了解的，不然就out了！","_content":"就如同mysql改查一样只需要了解就行，以后需要在深入，就行了。\n\n构建镜像\n\n\tdocker search nginx \\\\以nginx的docker镜像为例\n\tdocker pull   nginx \\\\获取镜像\n\tdocker images       \\\\查看本机有哪些docker镜像\n在亲自获取过程中由于国情，被 q 了，只有到国内去下载了\n\n\t1，阿里云docker加速器\n\t2，时速云docker市场\n都能获取到镜像。\n\n\n\n#### 1，从一个镜像，启动一个容器\n\t\n\tdocker run -it --name one-nginx nginx /bin/bash\n\t\\\\run 运行的意思，-it 开启一个伪终端，不关闭，--name 起一个自定义名字,/bin/bash 启动的程序\n\t\tdocker run -idt --name one-nginx nginx /bin/bash\n\t\t\\\\-d 把程序后端运行\n#### 2，查看容器运行情况\n\n\tdocker ps  \\\\查看进程\n\tdocker ps -a \\\\查看所有进程\n\tdocker ps -l \\\\查看最后一个进程\n#### 3，删除容器\n\t\n\tdocker rm 容器id\n\t\n#### 4，删除镜像\n\t\n\tdocker rmi 镜像id\n \n","source":"_posts/blog/linux/docker鍩虹鎿嶄綔.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2016-12-8\ntitle:  docker的基本用法\ntags: linux\n\ncategory: linux \nstatus: publish\nsummary: docker这么火，肯定要有所了解的，不然就out了！\n---\n就如同mysql改查一样只需要了解就行，以后需要在深入，就行了。\n\n构建镜像\n\n\tdocker search nginx \\\\以nginx的docker镜像为例\n\tdocker pull   nginx \\\\获取镜像\n\tdocker images       \\\\查看本机有哪些docker镜像\n在亲自获取过程中由于国情，被 q 了，只有到国内去下载了\n\n\t1，阿里云docker加速器\n\t2，时速云docker市场\n都能获取到镜像。\n\n\n\n#### 1，从一个镜像，启动一个容器\n\t\n\tdocker run -it --name one-nginx nginx /bin/bash\n\t\\\\run 运行的意思，-it 开启一个伪终端，不关闭，--name 起一个自定义名字,/bin/bash 启动的程序\n\t\tdocker run -idt --name one-nginx nginx /bin/bash\n\t\t\\\\-d 把程序后端运行\n#### 2，查看容器运行情况\n\n\tdocker ps  \\\\查看进程\n\tdocker ps -a \\\\查看所有进程\n\tdocker ps -l \\\\查看最后一个进程\n#### 3，删除容器\n\t\n\tdocker rm 容器id\n\t\n#### 4，删除镜像\n\t\n\tdocker rmi 镜像id\n \n","slug":"blog/linux/docker鍩虹鎿嶄綔","published":1,"updated":"2018-08-01T08:20:49.762Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvev000ipym6nlg808wp","content":"<p>就如同mysql改查一样只需要了解就行，以后需要在深入，就行了。</p>\n<p>构建镜像</p>\n<pre><code>docker search nginx \\\\以nginx的docker镜像为例\ndocker pull   nginx \\\\获取镜像\ndocker images       \\\\查看本机有哪些docker镜像\n</code></pre><p>在亲自获取过程中由于国情，被 q 了，只有到国内去下载了</p>\n<pre><code>1，阿里云docker加速器\n2，时速云docker市场\n</code></pre><p>都能获取到镜像。</p>\n<h4 id=\"1，从一个镜像，启动一个容器\"><a href=\"#1，从一个镜像，启动一个容器\" class=\"headerlink\" title=\"1，从一个镜像，启动一个容器\"></a>1，从一个镜像，启动一个容器</h4><pre><code>docker run -it --name one-nginx nginx /bin/bash\n\\\\run 运行的意思，-it 开启一个伪终端，不关闭，--name 起一个自定义名字,/bin/bash 启动的程序\n    docker run -idt --name one-nginx nginx /bin/bash\n    \\\\-d 把程序后端运行\n</code></pre><h4 id=\"2，查看容器运行情况\"><a href=\"#2，查看容器运行情况\" class=\"headerlink\" title=\"2，查看容器运行情况\"></a>2，查看容器运行情况</h4><pre><code>docker ps  \\\\查看进程\ndocker ps -a \\\\查看所有进程\ndocker ps -l \\\\查看最后一个进程\n</code></pre><h4 id=\"3，删除容器\"><a href=\"#3，删除容器\" class=\"headerlink\" title=\"3，删除容器\"></a>3，删除容器</h4><pre><code>docker rm 容器id\n</code></pre><h4 id=\"4，删除镜像\"><a href=\"#4，删除镜像\" class=\"headerlink\" title=\"4，删除镜像\"></a>4，删除镜像</h4><pre><code>docker rmi 镜像id\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<p>就如同mysql改查一样只需要了解就行，以后需要在深入，就行了。</p>\n<p>构建镜像</p>\n<pre><code>docker search nginx \\\\以nginx的docker镜像为例\ndocker pull   nginx \\\\获取镜像\ndocker images       \\\\查看本机有哪些docker镜像\n</code></pre><p>在亲自获取过程中由于国情，被 q 了，只有到国内去下载了</p>\n<pre><code>1，阿里云docker加速器\n2，时速云docker市场\n</code></pre><p>都能获取到镜像。</p>\n<h4 id=\"1，从一个镜像，启动一个容器\"><a href=\"#1，从一个镜像，启动一个容器\" class=\"headerlink\" title=\"1，从一个镜像，启动一个容器\"></a>1，从一个镜像，启动一个容器</h4><pre><code>docker run -it --name one-nginx nginx /bin/bash\n\\\\run 运行的意思，-it 开启一个伪终端，不关闭，--name 起一个自定义名字,/bin/bash 启动的程序\n    docker run -idt --name one-nginx nginx /bin/bash\n    \\\\-d 把程序后端运行\n</code></pre><h4 id=\"2，查看容器运行情况\"><a href=\"#2，查看容器运行情况\" class=\"headerlink\" title=\"2，查看容器运行情况\"></a>2，查看容器运行情况</h4><pre><code>docker ps  \\\\查看进程\ndocker ps -a \\\\查看所有进程\ndocker ps -l \\\\查看最后一个进程\n</code></pre><h4 id=\"3，删除容器\"><a href=\"#3，删除容器\" class=\"headerlink\" title=\"3，删除容器\"></a>3，删除容器</h4><pre><code>docker rm 容器id\n</code></pre><h4 id=\"4，删除镜像\"><a href=\"#4，删除镜像\" class=\"headerlink\" title=\"4，删除镜像\"></a>4，删除镜像</h4><pre><code>docker rmi 镜像id\n</code></pre>"},{"author":"QwerSe","head":null,"date":"2017-01-02T16:00:00.000Z","title":"fedora安装和必备软件","status":"publish","summary":"学习linux一直用的是centos，用其他的linux版本很不熟悉...","_content":"\n学习linux一直用的是centos，用其他的linux版本很不熟悉，一开始用的是manjaro，pacman管理不是很熟悉\n之后用了deepin，没想到安装一半出错了，我都不知道是怎么回事，把错误反馈了社区，之后决定使用fedora，更centos差不多\n我就用着了，不换了。\n　　当然，刚开始有很多东西需要配置，才能更好的使用。\n### 1必须要配置好软件源，才能方便行事\n\t\n\t\n\t#### 这是个网页，创建一个repo，把网页里面的内容复制进去\n\t\thttps://github.com/FZUG/repo/blob/master/repos/FZUG.repo\n\t#### 这个是个可以安装上面源没有的软件\n\t\trpm -ivh http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm\n\n\n###　2开始安装常用软件\n\n\n#### 看清楚name的行，sudo dnf install $name　就能安装你想要安装的软件了\n#####　在安装软件时可能会少依赖，慢慢补就行了。\t \n## Name \n```\t\nsogoupinyin \t \t搜狗拼音输入法\nfcitx-rime \t\t中州韵输入法\nfcitx-sunpinyin \tsunpinyin 输入法\nfcitx-qt5 \t\tfcitx qt5 输入模块\nMultimedia\nkwplayer \t \t酷我音乐\ndoubanfm-qt \t \t豆瓣FM\nmusicbox \t \t网易云音乐 CLI\ndeepin-music-player \t \t深度音乐\nmoonplayer \t\tMoonplayer播放器\nsimplescreenrecorder \t \t屏幕录像\nobs-studio \t \t屏幕录像/流媒体直播\ntragtor \t \tFFmpeg音视频转码\nNotes / Dict\nwiznote \t\t为知笔记 stable\nwiznote-beta \t \t为知笔记 beta\nyoudao-dict \t \t有道词典 for linux\nBrowser / Proxy\nopera-developer  \tOpera developer\nopera-beta \t \tOpera beta\nopera-stable \t \tOpera stable\nfreshplayerplugin \tFirefox PPAPI flash 兼容插件\nDownloads\nbcloud \t　　　　　 \t百度云客户端\nxware-desktop \t \t迅雷客户端\npointdownload \t\t点载, 支持迅雷/BT/ed2k下载\nSystem tools\nccal \t　　　　　\t命令行下的农历日历\ngrub4dos \t\tgrub 引导管理器\nscreenfetch \t\t系统信息收集\nvim 7.4.764 \t\t编辑器之神，增加剪贴板/lua/py3支持\ndkms-mt7601u \t\tMT7601U USB Wifi 驱动\nSystem libraries\nopencc \t\t \t简繁转换库，修正依赖\nsunpinyin \t \t基于 SLM 模型的输入法引擎，更新字典\npython-html2text \tfedora \tHTML -> ASCII\npython3-xlib \t\tPython3 X 库\npython3-keybinder \tnull \tPython3 键绑定库\npython-mutagen \t\t处理音频元数据\npython3-cairo \t\tPython3 cairo 绑定，修复 bug\npygobject3 \t\tPython GObject 封装，修复 bug\ndeepin-ui \t\tDeepin UI toolkit\ndeepin-utils \t\tDeepin utils 库\ndeepin-gsettings \tgsettings python 绑定\npyjavascriptcore \tfedora \tpyjs\n```\n\n\n\t\n","source":"_posts/blog/linux/fedora瀹夎浣跨敤.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2017-01-03\ntitle:  fedora安装和必备软件\ntags: linux\n\ncategory: web\nstatus: publish\nsummary: 学习linux一直用的是centos，用其他的linux版本很不熟悉...\n---\n\n学习linux一直用的是centos，用其他的linux版本很不熟悉，一开始用的是manjaro，pacman管理不是很熟悉\n之后用了deepin，没想到安装一半出错了，我都不知道是怎么回事，把错误反馈了社区，之后决定使用fedora，更centos差不多\n我就用着了，不换了。\n　　当然，刚开始有很多东西需要配置，才能更好的使用。\n### 1必须要配置好软件源，才能方便行事\n\t\n\t\n\t#### 这是个网页，创建一个repo，把网页里面的内容复制进去\n\t\thttps://github.com/FZUG/repo/blob/master/repos/FZUG.repo\n\t#### 这个是个可以安装上面源没有的软件\n\t\trpm -ivh http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm\n\n\n###　2开始安装常用软件\n\n\n#### 看清楚name的行，sudo dnf install $name　就能安装你想要安装的软件了\n#####　在安装软件时可能会少依赖，慢慢补就行了。\t \n## Name \n```\t\nsogoupinyin \t \t搜狗拼音输入法\nfcitx-rime \t\t中州韵输入法\nfcitx-sunpinyin \tsunpinyin 输入法\nfcitx-qt5 \t\tfcitx qt5 输入模块\nMultimedia\nkwplayer \t \t酷我音乐\ndoubanfm-qt \t \t豆瓣FM\nmusicbox \t \t网易云音乐 CLI\ndeepin-music-player \t \t深度音乐\nmoonplayer \t\tMoonplayer播放器\nsimplescreenrecorder \t \t屏幕录像\nobs-studio \t \t屏幕录像/流媒体直播\ntragtor \t \tFFmpeg音视频转码\nNotes / Dict\nwiznote \t\t为知笔记 stable\nwiznote-beta \t \t为知笔记 beta\nyoudao-dict \t \t有道词典 for linux\nBrowser / Proxy\nopera-developer  \tOpera developer\nopera-beta \t \tOpera beta\nopera-stable \t \tOpera stable\nfreshplayerplugin \tFirefox PPAPI flash 兼容插件\nDownloads\nbcloud \t　　　　　 \t百度云客户端\nxware-desktop \t \t迅雷客户端\npointdownload \t\t点载, 支持迅雷/BT/ed2k下载\nSystem tools\nccal \t　　　　　\t命令行下的农历日历\ngrub4dos \t\tgrub 引导管理器\nscreenfetch \t\t系统信息收集\nvim 7.4.764 \t\t编辑器之神，增加剪贴板/lua/py3支持\ndkms-mt7601u \t\tMT7601U USB Wifi 驱动\nSystem libraries\nopencc \t\t \t简繁转换库，修正依赖\nsunpinyin \t \t基于 SLM 模型的输入法引擎，更新字典\npython-html2text \tfedora \tHTML -> ASCII\npython3-xlib \t\tPython3 X 库\npython3-keybinder \tnull \tPython3 键绑定库\npython-mutagen \t\t处理音频元数据\npython3-cairo \t\tPython3 cairo 绑定，修复 bug\npygobject3 \t\tPython GObject 封装，修复 bug\ndeepin-ui \t\tDeepin UI toolkit\ndeepin-utils \t\tDeepin utils 库\ndeepin-gsettings \tgsettings python 绑定\npyjavascriptcore \tfedora \tpyjs\n```\n\n\n\t\n","slug":"blog/linux/fedora瀹夎浣跨敤","published":1,"updated":"2018-08-01T08:20:49.816Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvey000kpym6mds8ix5e","content":"<p>学习linux一直用的是centos，用其他的linux版本很不熟悉，一开始用的是manjaro，pacman管理不是很熟悉<br>之后用了deepin，没想到安装一半出错了，我都不知道是怎么回事，把错误反馈了社区，之后决定使用fedora，更centos差不多<br>我就用着了，不换了。<br>　　当然，刚开始有很多东西需要配置，才能更好的使用。</p>\n<h3 id=\"1必须要配置好软件源，才能方便行事\"><a href=\"#1必须要配置好软件源，才能方便行事\" class=\"headerlink\" title=\"1必须要配置好软件源，才能方便行事\"></a>1必须要配置好软件源，才能方便行事</h3><pre><code>#### 这是个网页，创建一个repo，把网页里面的内容复制进去\n    https://github.com/FZUG/repo/blob/master/repos/FZUG.repo\n#### 这个是个可以安装上面源没有的软件\n    rpm -ivh http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm\n</code></pre><p>###　2开始安装常用软件</p>\n<h4 id=\"看清楚name的行，sudo-dnf-install-name-就能安装你想要安装的软件了\"><a href=\"#看清楚name的行，sudo-dnf-install-name-就能安装你想要安装的软件了\" class=\"headerlink\" title=\"看清楚name的行，sudo dnf install $name　就能安装你想要安装的软件了\"></a>看清楚name的行，sudo dnf install $name　就能安装你想要安装的软件了</h4><p>#####　在安装软件时可能会少依赖，慢慢补就行了。     </p>\n<h2 id=\"Name\"><a href=\"#Name\" class=\"headerlink\" title=\"Name\"></a>Name</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sogoupinyin \t \t搜狗拼音输入法</span><br><span class=\"line\">fcitx-rime \t\t中州韵输入法</span><br><span class=\"line\">fcitx-sunpinyin \tsunpinyin 输入法</span><br><span class=\"line\">fcitx-qt5 \t\tfcitx qt5 输入模块</span><br><span class=\"line\">Multimedia</span><br><span class=\"line\">kwplayer \t \t酷我音乐</span><br><span class=\"line\">doubanfm-qt \t \t豆瓣FM</span><br><span class=\"line\">musicbox \t \t网易云音乐 CLI</span><br><span class=\"line\">deepin-music-player \t \t深度音乐</span><br><span class=\"line\">moonplayer \t\tMoonplayer播放器</span><br><span class=\"line\">simplescreenrecorder \t \t屏幕录像</span><br><span class=\"line\">obs-studio \t \t屏幕录像/流媒体直播</span><br><span class=\"line\">tragtor \t \tFFmpeg音视频转码</span><br><span class=\"line\">Notes / Dict</span><br><span class=\"line\">wiznote \t\t为知笔记 stable</span><br><span class=\"line\">wiznote-beta \t \t为知笔记 beta</span><br><span class=\"line\">youdao-dict \t \t有道词典 for linux</span><br><span class=\"line\">Browser / Proxy</span><br><span class=\"line\">opera-developer  \tOpera developer</span><br><span class=\"line\">opera-beta \t \tOpera beta</span><br><span class=\"line\">opera-stable \t \tOpera stable</span><br><span class=\"line\">freshplayerplugin \tFirefox PPAPI flash 兼容插件</span><br><span class=\"line\">Downloads</span><br><span class=\"line\">bcloud \t　　　　　 \t百度云客户端</span><br><span class=\"line\">xware-desktop \t \t迅雷客户端</span><br><span class=\"line\">pointdownload \t\t点载, 支持迅雷/BT/ed2k下载</span><br><span class=\"line\">System tools</span><br><span class=\"line\">ccal \t　　　　　\t命令行下的农历日历</span><br><span class=\"line\">grub4dos \t\tgrub 引导管理器</span><br><span class=\"line\">screenfetch \t\t系统信息收集</span><br><span class=\"line\">vim 7.4.764 \t\t编辑器之神，增加剪贴板/lua/py3支持</span><br><span class=\"line\">dkms-mt7601u \t\tMT7601U USB Wifi 驱动</span><br><span class=\"line\">System libraries</span><br><span class=\"line\">opencc \t\t \t简繁转换库，修正依赖</span><br><span class=\"line\">sunpinyin \t \t基于 SLM 模型的输入法引擎，更新字典</span><br><span class=\"line\">python-html2text \tfedora \tHTML -&gt; ASCII</span><br><span class=\"line\">python3-xlib \t\tPython3 X 库</span><br><span class=\"line\">python3-keybinder \tnull \tPython3 键绑定库</span><br><span class=\"line\">python-mutagen \t\t处理音频元数据</span><br><span class=\"line\">python3-cairo \t\tPython3 cairo 绑定，修复 bug</span><br><span class=\"line\">pygobject3 \t\tPython GObject 封装，修复 bug</span><br><span class=\"line\">deepin-ui \t\tDeepin UI toolkit</span><br><span class=\"line\">deepin-utils \t\tDeepin utils 库</span><br><span class=\"line\">deepin-gsettings \tgsettings python 绑定</span><br><span class=\"line\">pyjavascriptcore \tfedora \tpyjs</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>学习linux一直用的是centos，用其他的linux版本很不熟悉，一开始用的是manjaro，pacman管理不是很熟悉<br>之后用了deepin，没想到安装一半出错了，我都不知道是怎么回事，把错误反馈了社区，之后决定使用fedora，更centos差不多<br>我就用着了，不换了。<br>　　当然，刚开始有很多东西需要配置，才能更好的使用。</p>\n<h3 id=\"1必须要配置好软件源，才能方便行事\"><a href=\"#1必须要配置好软件源，才能方便行事\" class=\"headerlink\" title=\"1必须要配置好软件源，才能方便行事\"></a>1必须要配置好软件源，才能方便行事</h3><pre><code>#### 这是个网页，创建一个repo，把网页里面的内容复制进去\n    https://github.com/FZUG/repo/blob/master/repos/FZUG.repo\n#### 这个是个可以安装上面源没有的软件\n    rpm -ivh http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm\n</code></pre><p>###　2开始安装常用软件</p>\n<h4 id=\"看清楚name的行，sudo-dnf-install-name-就能安装你想要安装的软件了\"><a href=\"#看清楚name的行，sudo-dnf-install-name-就能安装你想要安装的软件了\" class=\"headerlink\" title=\"看清楚name的行，sudo dnf install $name　就能安装你想要安装的软件了\"></a>看清楚name的行，sudo dnf install $name　就能安装你想要安装的软件了</h4><p>#####　在安装软件时可能会少依赖，慢慢补就行了。     </p>\n<h2 id=\"Name\"><a href=\"#Name\" class=\"headerlink\" title=\"Name\"></a>Name</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sogoupinyin \t \t搜狗拼音输入法</span><br><span class=\"line\">fcitx-rime \t\t中州韵输入法</span><br><span class=\"line\">fcitx-sunpinyin \tsunpinyin 输入法</span><br><span class=\"line\">fcitx-qt5 \t\tfcitx qt5 输入模块</span><br><span class=\"line\">Multimedia</span><br><span class=\"line\">kwplayer \t \t酷我音乐</span><br><span class=\"line\">doubanfm-qt \t \t豆瓣FM</span><br><span class=\"line\">musicbox \t \t网易云音乐 CLI</span><br><span class=\"line\">deepin-music-player \t \t深度音乐</span><br><span class=\"line\">moonplayer \t\tMoonplayer播放器</span><br><span class=\"line\">simplescreenrecorder \t \t屏幕录像</span><br><span class=\"line\">obs-studio \t \t屏幕录像/流媒体直播</span><br><span class=\"line\">tragtor \t \tFFmpeg音视频转码</span><br><span class=\"line\">Notes / Dict</span><br><span class=\"line\">wiznote \t\t为知笔记 stable</span><br><span class=\"line\">wiznote-beta \t \t为知笔记 beta</span><br><span class=\"line\">youdao-dict \t \t有道词典 for linux</span><br><span class=\"line\">Browser / Proxy</span><br><span class=\"line\">opera-developer  \tOpera developer</span><br><span class=\"line\">opera-beta \t \tOpera beta</span><br><span class=\"line\">opera-stable \t \tOpera stable</span><br><span class=\"line\">freshplayerplugin \tFirefox PPAPI flash 兼容插件</span><br><span class=\"line\">Downloads</span><br><span class=\"line\">bcloud \t　　　　　 \t百度云客户端</span><br><span class=\"line\">xware-desktop \t \t迅雷客户端</span><br><span class=\"line\">pointdownload \t\t点载, 支持迅雷/BT/ed2k下载</span><br><span class=\"line\">System tools</span><br><span class=\"line\">ccal \t　　　　　\t命令行下的农历日历</span><br><span class=\"line\">grub4dos \t\tgrub 引导管理器</span><br><span class=\"line\">screenfetch \t\t系统信息收集</span><br><span class=\"line\">vim 7.4.764 \t\t编辑器之神，增加剪贴板/lua/py3支持</span><br><span class=\"line\">dkms-mt7601u \t\tMT7601U USB Wifi 驱动</span><br><span class=\"line\">System libraries</span><br><span class=\"line\">opencc \t\t \t简繁转换库，修正依赖</span><br><span class=\"line\">sunpinyin \t \t基于 SLM 模型的输入法引擎，更新字典</span><br><span class=\"line\">python-html2text \tfedora \tHTML -&gt; ASCII</span><br><span class=\"line\">python3-xlib \t\tPython3 X 库</span><br><span class=\"line\">python3-keybinder \tnull \tPython3 键绑定库</span><br><span class=\"line\">python-mutagen \t\t处理音频元数据</span><br><span class=\"line\">python3-cairo \t\tPython3 cairo 绑定，修复 bug</span><br><span class=\"line\">pygobject3 \t\tPython GObject 封装，修复 bug</span><br><span class=\"line\">deepin-ui \t\tDeepin UI toolkit</span><br><span class=\"line\">deepin-utils \t\tDeepin utils 库</span><br><span class=\"line\">deepin-gsettings \tgsettings python 绑定</span><br><span class=\"line\">pyjavascriptcore \tfedora \tpyjs</span><br></pre></td></tr></table></figure>\n"},{"author":"QwerSe","head":null,"date":"2017-11-29T16:00:00.000Z","title":"lamp构架下的网站环境搭建","images":null,"status":"publish","summary":"查资料发现是CentOS 7 版本将MySQL数据库软件从默认的程序列表中移除，用mariadb代替了。","_content":"\n## apache2.4编译安装\nhttpd依赖于apr, apr-util\n\napr全称为apache portable runtime，能实现httpd跨平台运行\n\n    httpd-2.4 依賴于1.4＋及以上版本的apr\n\n        apr-1.5.0.tar.bz2\n        apr-util-1.5.3.tar.bz2\n        httpd-2.4.9.tar.bz2\n    \n        pcre-devel包\n        openssl-devel     \n\n\n    2、编译安装 \n    # yum install gcc\n    # yum install pcre-devel\n    \n    # tar xf apr-1.5.0.tar.bz2\n    # cd apr-1.5.0\n    # ./configure --prefix=/usr/local/apr   (--prefix指定apr安装的目录)\n    # make\n    # make  install\n    \n    # tar xf apr-util-1.5.3.tar.bz2\n    # cd apr-util-1.5.3\n    # ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr\n    # make && make install ###该项被漏掉，补充@20160714\n\n\n    # tar xf httpd-2.4.9.tar.bz2\n        以下为几个主要的配置项\n        --sysconfdir=/etc/httpd24  指定配置文件路径\n        --enable-so  启动模块动态装卸载\n        --enable-ssl 编译ssl模块\n        --enable-cgi 支持cgi机制（能够让静态web服务器能够解析动态请求的一个协议）\n        --enable-rewrite  支持url重写     --Author : Leshami\n        --with-zlib  支持数据包压缩       --Blog   : http://blog.csdn.net/leshami\n        --with-pcre  支持正则表达式\n        --with-apr=/usr/local/apr  指明依赖的apr所在目录\n        --with-apr-util=/usr/local/apr-util/  指明依赖的apr-util所在的目录\n        --enable-modules=most      启用的模块\n        --enable-mpms-shared=all   以共享方式编译的模块\n        --with-mpm=prefork         指明httpd的工作方式为prefork\n    \n    # cd httpd-2.4.9\n    # ./configure                           \\\n        --with-apr=/usr/local/apr           \\\n        --with-apr-util=/usr/local/apr-util \\\n        --prefix=/usr/local/apache \\\n        --sysconfdir=/etc/httpd24  \\\n        --enable-so                \\\n        --enable-ssl               \\\n        --enable-cgi               \\\n        --enable-rewrite           \\\n        --with-zlib                \\\n        --with-pcre                \\\n        --with-mpm=prefork         \\\n        --enable-modules=most      \\\n        --enable-mpms-shared=all   \n    \n    # make \n    # make install\n\n```\napache的启动：/usr/local/apache/bin/apachectl start(stop,restart)\n制作systemctl的启动脚本，网上找一找就行。\n一定要记得iptables -F 和setenforce 0.不然别人访问不了你的。\n```\n\n## 安装mysql\n\nmysql直接使用的yum安装，编译太慢烦了。用docker更加简单。\n\n一般网上给出的资料都是\n\n```\n#yum install mysql\n#yum install mysql-server\n#yum install mysql-devel\n```\n\n安装mysql和mysql-devel都成功，但是安装mysql-server失败，如下：\n\n\n\n```\n[root@yl-web yl]# yum install mysql-server\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: mirrors.sina.cn\n * extras: mirrors.sina.cn\n * updates: mirrors.sina.cn\nNo package mysql-server available.\nError: Nothing to do\n```\n\n\n\n查资料发现是CentOS 7 版本将MySQL数据库软件从默认的程序列表中移除，用mariadb代替了。\n\n有两种解决办法：\n\n1、方法一：安装mariadb\n\nMariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可。开发这个分支的原因之一是：甲骨文公司收购了MySQL后，有将MySQL闭源的潜在风险，因此社区采用分支的方式来避开这个风险。MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。\n\n安装mariadb，大小59 M。\n\n```\n[root@yl-web yl]# yum install mariadb-server mariadb \n```\n\nmariadb数据库的相关命令是：\n\nsystemctl start mariadb  #启动MariaDB\n\nsystemctl stop mariadb  #停止MariaDB\n\nsystemctl restart mariadb  #重启MariaDB\n\nsystemctl enable mariadb  #设置开机启动\n\n所以先启动数据库\n\n```\n[root@yl-web yl]# systemctl start mariadb\n```\n\n然后就可以正常使用mysql了\n\n\n\n```\n[root@yl-web yl]# mysql -u root -p\nEnter password: \nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 3\nServer version: 5.5.41-MariaDB MariaDB Server\n\nCopyright (c) 2000, 2014, Oracle, MariaDB Corporation Ab and others.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nMariaDB [(none)]> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n4 rows in set (0.00 sec)\n\nMariaDB [(none)]> \n```\n\n\n\n安装mariadb后显示的也是 MariaDB [(none)]> ，可能看起来有点不习惯。下面是第二种方法。\n\n## 2、方法二：官网下载安装mysql-server\n\n```\n# wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\n# rpm -ivh mysql-community-release-el7-5.noarch.rpm\n# yum install mysql-community-server\n```\n\n安装成功后重启mysql服务。\n\n```\n# service mysqld restart\n```\n\n有时候直接启动会报错记得要关闭selinux    ```setenforce 0```\n\n如果想变动mysql的数据库位置可以修改/etc/my.cnf文件\n\n碰到数据库起不来的情况一般都是文件权限的问题数据库要用到的文件和文件夹一律```chown mysql:mysql filename ```\n\n\n\n\n\n初次安装mysql，root账户没有密码。\n\n\n\n```\n[root@yl-web yl]# mysql -u root \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 3\nServer version: 5.6.26 MySQL Community Server (GPL)\n\nCopyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n4 rows in set (0.01 sec)\n\nmysql> \n```\n\n设置密码\n\n```\nmysql> set password for 'root'@'localhost' =password('password');\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> \n```\n\n不需要重启数据库即可生效。\n\n把在所有数据库的所有表的所有权限赋值给位于所有IP地址的root用户。\n\n`mysql> grant all privileges on *.* to root@'%'identified by 'password';`\n\n如果是新用户而不是root，则要先新建用户\n\n`mysql>create user 'username'@'%' identified by 'password';`\n\n此时就可以进行远程连接了。\n\n## 安装php7.0\n\nphp源码安装比较好，因为这个解释器。编译效率好。\n\n首先上个代码，来个直观印象\n\n```\n./configure --prefix=/usr/local/php7 \\\n --with-curl \\\n --with-freetype-dir \\\n --with-gd \\\n --with-gettext \\\n --with-iconv-dir \\\n --with-kerberos \\\n --with-libdir=lib64 \\\n --with-libxml-dir \\\n --enable-fpm\n --with-openssl \\\n --with-pcre-regex \\\n --with-pdo-sqlite \\\n --with-pear \\\n --with-png-dir \\\n --with-xmlrpc \\\n --with-xsl \\\n --with-zlib \\\n --with-apxs2=/usr/local/apache/bin/apxs \\\n --enable-fpm \\\n --enable-bcmath \\\n --enable-libxml \\\n --enable-inline-optimization \\\n --enable-gd-native-ttf \\\n --enable-mbregex \\\n --enable-mbstring \\\n --enable-opcache \\\n --enable-pcntl \\\n --enable-shmop \\\n --enable-soap \\\n --enable-sockets \\\n --enable-sysvsem \\\n --enable-xml \\\n --enable-zip \\\n --enable-mysqlnd \\\n --with-mysqli=mysqlnd \\\n --with-pdo-mysql=mysqlnd\n --with-mysql-sock=/var/lib/mysql/mysql.sock\n```\n\nphp下载www.php.net。下载7.0的版本就行了，然后在安装编译需要的程序。\n\n```\nyum -y install libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel MySQL pcre-develcurl-devel libxslt-devel\n```\n\n下载后解压进入执行上面的代码，就能够编译执行.make完执行make test检测一下，没有问题就make install。\n\n安装完成，复制php配置文件到安装目录\n\n```cp php.ini-development /usr/local/php/lib/php.ini```\n\n\n\n配置http.conf\n\n```\n配置http.conf\n//加载解析php模块\nLoadModule php7_module modules/libphp7.so\n\n//解析后缀名.php的文件\n<FilesMatch \"\\.ph(p[2-6]?|tml)$\">\n    SetHandler application/x-httpd-php\n</FilesMatch>\n\n//默认页面\n<IfModule dir_module>\n    DirectoryIndex index.php index.html\n</IfModule>\n```\n\n\n\n\n\n","source":"_posts/blog/linux/lamp鏋勬灦涓嬬殑缃戠珯鐜鎼缓.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2017-11-30\ntitle:  lamp构架下的网站环境搭建\ntags: Linux\nimages: \ncategory: Linux\nstatus: publish\nsummary: 查资料发现是CentOS 7 版本将MySQL数据库软件从默认的程序列表中移除，用mariadb代替了。\n---\n\n## apache2.4编译安装\nhttpd依赖于apr, apr-util\n\napr全称为apache portable runtime，能实现httpd跨平台运行\n\n    httpd-2.4 依賴于1.4＋及以上版本的apr\n\n        apr-1.5.0.tar.bz2\n        apr-util-1.5.3.tar.bz2\n        httpd-2.4.9.tar.bz2\n    \n        pcre-devel包\n        openssl-devel     \n\n\n    2、编译安装 \n    # yum install gcc\n    # yum install pcre-devel\n    \n    # tar xf apr-1.5.0.tar.bz2\n    # cd apr-1.5.0\n    # ./configure --prefix=/usr/local/apr   (--prefix指定apr安装的目录)\n    # make\n    # make  install\n    \n    # tar xf apr-util-1.5.3.tar.bz2\n    # cd apr-util-1.5.3\n    # ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr\n    # make && make install ###该项被漏掉，补充@20160714\n\n\n    # tar xf httpd-2.4.9.tar.bz2\n        以下为几个主要的配置项\n        --sysconfdir=/etc/httpd24  指定配置文件路径\n        --enable-so  启动模块动态装卸载\n        --enable-ssl 编译ssl模块\n        --enable-cgi 支持cgi机制（能够让静态web服务器能够解析动态请求的一个协议）\n        --enable-rewrite  支持url重写     --Author : Leshami\n        --with-zlib  支持数据包压缩       --Blog   : http://blog.csdn.net/leshami\n        --with-pcre  支持正则表达式\n        --with-apr=/usr/local/apr  指明依赖的apr所在目录\n        --with-apr-util=/usr/local/apr-util/  指明依赖的apr-util所在的目录\n        --enable-modules=most      启用的模块\n        --enable-mpms-shared=all   以共享方式编译的模块\n        --with-mpm=prefork         指明httpd的工作方式为prefork\n    \n    # cd httpd-2.4.9\n    # ./configure                           \\\n        --with-apr=/usr/local/apr           \\\n        --with-apr-util=/usr/local/apr-util \\\n        --prefix=/usr/local/apache \\\n        --sysconfdir=/etc/httpd24  \\\n        --enable-so                \\\n        --enable-ssl               \\\n        --enable-cgi               \\\n        --enable-rewrite           \\\n        --with-zlib                \\\n        --with-pcre                \\\n        --with-mpm=prefork         \\\n        --enable-modules=most      \\\n        --enable-mpms-shared=all   \n    \n    # make \n    # make install\n\n```\napache的启动：/usr/local/apache/bin/apachectl start(stop,restart)\n制作systemctl的启动脚本，网上找一找就行。\n一定要记得iptables -F 和setenforce 0.不然别人访问不了你的。\n```\n\n## 安装mysql\n\nmysql直接使用的yum安装，编译太慢烦了。用docker更加简单。\n\n一般网上给出的资料都是\n\n```\n#yum install mysql\n#yum install mysql-server\n#yum install mysql-devel\n```\n\n安装mysql和mysql-devel都成功，但是安装mysql-server失败，如下：\n\n\n\n```\n[root@yl-web yl]# yum install mysql-server\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: mirrors.sina.cn\n * extras: mirrors.sina.cn\n * updates: mirrors.sina.cn\nNo package mysql-server available.\nError: Nothing to do\n```\n\n\n\n查资料发现是CentOS 7 版本将MySQL数据库软件从默认的程序列表中移除，用mariadb代替了。\n\n有两种解决办法：\n\n1、方法一：安装mariadb\n\nMariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可。开发这个分支的原因之一是：甲骨文公司收购了MySQL后，有将MySQL闭源的潜在风险，因此社区采用分支的方式来避开这个风险。MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。\n\n安装mariadb，大小59 M。\n\n```\n[root@yl-web yl]# yum install mariadb-server mariadb \n```\n\nmariadb数据库的相关命令是：\n\nsystemctl start mariadb  #启动MariaDB\n\nsystemctl stop mariadb  #停止MariaDB\n\nsystemctl restart mariadb  #重启MariaDB\n\nsystemctl enable mariadb  #设置开机启动\n\n所以先启动数据库\n\n```\n[root@yl-web yl]# systemctl start mariadb\n```\n\n然后就可以正常使用mysql了\n\n\n\n```\n[root@yl-web yl]# mysql -u root -p\nEnter password: \nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 3\nServer version: 5.5.41-MariaDB MariaDB Server\n\nCopyright (c) 2000, 2014, Oracle, MariaDB Corporation Ab and others.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nMariaDB [(none)]> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n4 rows in set (0.00 sec)\n\nMariaDB [(none)]> \n```\n\n\n\n安装mariadb后显示的也是 MariaDB [(none)]> ，可能看起来有点不习惯。下面是第二种方法。\n\n## 2、方法二：官网下载安装mysql-server\n\n```\n# wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\n# rpm -ivh mysql-community-release-el7-5.noarch.rpm\n# yum install mysql-community-server\n```\n\n安装成功后重启mysql服务。\n\n```\n# service mysqld restart\n```\n\n有时候直接启动会报错记得要关闭selinux    ```setenforce 0```\n\n如果想变动mysql的数据库位置可以修改/etc/my.cnf文件\n\n碰到数据库起不来的情况一般都是文件权限的问题数据库要用到的文件和文件夹一律```chown mysql:mysql filename ```\n\n\n\n\n\n初次安装mysql，root账户没有密码。\n\n\n\n```\n[root@yl-web yl]# mysql -u root \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 3\nServer version: 5.6.26 MySQL Community Server (GPL)\n\nCopyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n4 rows in set (0.01 sec)\n\nmysql> \n```\n\n设置密码\n\n```\nmysql> set password for 'root'@'localhost' =password('password');\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> \n```\n\n不需要重启数据库即可生效。\n\n把在所有数据库的所有表的所有权限赋值给位于所有IP地址的root用户。\n\n`mysql> grant all privileges on *.* to root@'%'identified by 'password';`\n\n如果是新用户而不是root，则要先新建用户\n\n`mysql>create user 'username'@'%' identified by 'password';`\n\n此时就可以进行远程连接了。\n\n## 安装php7.0\n\nphp源码安装比较好，因为这个解释器。编译效率好。\n\n首先上个代码，来个直观印象\n\n```\n./configure --prefix=/usr/local/php7 \\\n --with-curl \\\n --with-freetype-dir \\\n --with-gd \\\n --with-gettext \\\n --with-iconv-dir \\\n --with-kerberos \\\n --with-libdir=lib64 \\\n --with-libxml-dir \\\n --enable-fpm\n --with-openssl \\\n --with-pcre-regex \\\n --with-pdo-sqlite \\\n --with-pear \\\n --with-png-dir \\\n --with-xmlrpc \\\n --with-xsl \\\n --with-zlib \\\n --with-apxs2=/usr/local/apache/bin/apxs \\\n --enable-fpm \\\n --enable-bcmath \\\n --enable-libxml \\\n --enable-inline-optimization \\\n --enable-gd-native-ttf \\\n --enable-mbregex \\\n --enable-mbstring \\\n --enable-opcache \\\n --enable-pcntl \\\n --enable-shmop \\\n --enable-soap \\\n --enable-sockets \\\n --enable-sysvsem \\\n --enable-xml \\\n --enable-zip \\\n --enable-mysqlnd \\\n --with-mysqli=mysqlnd \\\n --with-pdo-mysql=mysqlnd\n --with-mysql-sock=/var/lib/mysql/mysql.sock\n```\n\nphp下载www.php.net。下载7.0的版本就行了，然后在安装编译需要的程序。\n\n```\nyum -y install libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel MySQL pcre-develcurl-devel libxslt-devel\n```\n\n下载后解压进入执行上面的代码，就能够编译执行.make完执行make test检测一下，没有问题就make install。\n\n安装完成，复制php配置文件到安装目录\n\n```cp php.ini-development /usr/local/php/lib/php.ini```\n\n\n\n配置http.conf\n\n```\n配置http.conf\n//加载解析php模块\nLoadModule php7_module modules/libphp7.so\n\n//解析后缀名.php的文件\n<FilesMatch \"\\.ph(p[2-6]?|tml)$\">\n    SetHandler application/x-httpd-php\n</FilesMatch>\n\n//默认页面\n<IfModule dir_module>\n    DirectoryIndex index.php index.html\n</IfModule>\n```\n\n\n\n\n\n","slug":"blog/linux/lamp鏋勬灦涓嬬殑缃戠珯鐜鎼缓","published":1,"updated":"2018-08-02T03:14:03.055Z","_id":"cjkbvhvf4000ppym6m2rc4qv7","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"apache2-4编译安装\"><a href=\"#apache2-4编译安装\" class=\"headerlink\" title=\"apache2.4编译安装\"></a>apache2.4编译安装</h2><p>httpd依赖于apr, apr-util</p>\n<p>apr全称为apache portable runtime，能实现httpd跨平台运行</p>\n<pre><code>httpd-2.4 依賴于1.4＋及以上版本的apr\n\n    apr-1.5.0.tar.bz2\n    apr-util-1.5.3.tar.bz2\n    httpd-2.4.9.tar.bz2\n\n    pcre-devel包\n    openssl-devel     \n\n\n2、编译安装 \n# yum install gcc\n# yum install pcre-devel\n\n# tar xf apr-1.5.0.tar.bz2\n# cd apr-1.5.0\n# ./configure --prefix=/usr/local/apr   (--prefix指定apr安装的目录)\n# make\n# make  install\n\n# tar xf apr-util-1.5.3.tar.bz2\n# cd apr-util-1.5.3\n# ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr\n# make &amp;&amp; make install ###该项被漏掉，补充@20160714\n\n\n# tar xf httpd-2.4.9.tar.bz2\n    以下为几个主要的配置项\n    --sysconfdir=/etc/httpd24  指定配置文件路径\n    --enable-so  启动模块动态装卸载\n    --enable-ssl 编译ssl模块\n    --enable-cgi 支持cgi机制（能够让静态web服务器能够解析动态请求的一个协议）\n    --enable-rewrite  支持url重写     --Author : Leshami\n    --with-zlib  支持数据包压缩       --Blog   : http://blog.csdn.net/leshami\n    --with-pcre  支持正则表达式\n    --with-apr=/usr/local/apr  指明依赖的apr所在目录\n    --with-apr-util=/usr/local/apr-util/  指明依赖的apr-util所在的目录\n    --enable-modules=most      启用的模块\n    --enable-mpms-shared=all   以共享方式编译的模块\n    --with-mpm=prefork         指明httpd的工作方式为prefork\n\n# cd httpd-2.4.9\n# ./configure                           \\\n    --with-apr=/usr/local/apr           \\\n    --with-apr-util=/usr/local/apr-util \\\n    --prefix=/usr/local/apache \\\n    --sysconfdir=/etc/httpd24  \\\n    --enable-so                \\\n    --enable-ssl               \\\n    --enable-cgi               \\\n    --enable-rewrite           \\\n    --with-zlib                \\\n    --with-pcre                \\\n    --with-mpm=prefork         \\\n    --enable-modules=most      \\\n    --enable-mpms-shared=all   \n\n# make \n# make install\n</code></pre><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apache的启动：/usr/local/apache/bin/apachectl start(stop,restart)</span><br><span class=\"line\">制作systemctl的启动脚本，网上找一找就行。</span><br><span class=\"line\">一定要记得iptables -F 和setenforce 0.不然别人访问不了你的。</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装mysql\"><a href=\"#安装mysql\" class=\"headerlink\" title=\"安装mysql\"></a>安装mysql</h2><p>mysql直接使用的yum安装，编译太慢烦了。用docker更加简单。</p>\n<p>一般网上给出的资料都是</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#yum install mysql</span><br><span class=\"line\">#yum install mysql-server</span><br><span class=\"line\">#yum install mysql-devel</span><br></pre></td></tr></table></figure>\n<p>安装mysql和mysql-devel都成功，但是安装mysql-server失败，如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# yum install mysql-server</span><br><span class=\"line\">Loaded plugins: fastestmirror</span><br><span class=\"line\">Loading mirror speeds from cached hostfile</span><br><span class=\"line\"> * base: mirrors.sina.cn</span><br><span class=\"line\"> * extras: mirrors.sina.cn</span><br><span class=\"line\"> * updates: mirrors.sina.cn</span><br><span class=\"line\">No package mysql-server available.</span><br><span class=\"line\">Error: Nothing to do</span><br></pre></td></tr></table></figure>\n<p>查资料发现是CentOS 7 版本将MySQL数据库软件从默认的程序列表中移除，用mariadb代替了。</p>\n<p>有两种解决办法：</p>\n<p>1、方法一：安装mariadb</p>\n<p>MariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可。开发这个分支的原因之一是：甲骨文公司收购了MySQL后，有将MySQL闭源的潜在风险，因此社区采用分支的方式来避开这个风险。MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。</p>\n<p>安装mariadb，大小59 M。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# yum install mariadb-server mariadb</span><br></pre></td></tr></table></figure>\n<p>mariadb数据库的相关命令是：</p>\n<p>systemctl start mariadb  #启动MariaDB</p>\n<p>systemctl stop mariadb  #停止MariaDB</p>\n<p>systemctl restart mariadb  #重启MariaDB</p>\n<p>systemctl enable mariadb  #设置开机启动</p>\n<p>所以先启动数据库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# systemctl start mariadb</span><br></pre></td></tr></table></figure>\n<p>然后就可以正常使用mysql了</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# mysql -u root -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MariaDB monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MariaDB connection id is 3</span><br><span class=\"line\">Server version: 5.5.41-MariaDB MariaDB Server</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2014, Oracle, MariaDB Corporation Ab and others.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &apos;help;&apos; or &apos;\\h&apos; for help. Type &apos;\\c&apos; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; show databases;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| test               |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">4 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt;</span><br></pre></td></tr></table></figure>\n<p>安装mariadb后显示的也是 MariaDB [(none)]&gt; ，可能看起来有点不习惯。下面是第二种方法。</p>\n<h2 id=\"2、方法二：官网下载安装mysql-server\"><a href=\"#2、方法二：官网下载安装mysql-server\" class=\"headerlink\" title=\"2、方法二：官网下载安装mysql-server\"></a>2、方法二：官网下载安装mysql-server</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</span><br><span class=\"line\"># rpm -ivh mysql-community-release-el7-5.noarch.rpm</span><br><span class=\"line\"># yum install mysql-community-server</span><br></pre></td></tr></table></figure>\n<p>安装成功后重启mysql服务。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># service mysqld restart</span><br></pre></td></tr></table></figure>\n<p>有时候直接启动会报错记得要关闭selinux    <figure class=\"highlight plain\"><figcaption><span>0```</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">如果想变动mysql的数据库位置可以修改/etc/my.cnf文件</span><br><span class=\"line\"></span><br><span class=\"line\">碰到数据库起不来的情况一般都是文件权限的问题数据库要用到的文件和文件夹一律```chown mysql:mysql filename</span><br></pre></td></tr></table></figure></p>\n<p>初次安装mysql，root账户没有密码。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# mysql -u root </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 3</span><br><span class=\"line\">Server version: 5.6.26 MySQL Community Server (GPL)</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &apos;help;&apos; or &apos;\\h&apos; for help. Type &apos;\\c&apos; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show databases;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| test               |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">4 rows in set (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<p>设置密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; set password for &apos;root&apos;@&apos;localhost&apos; =password(&apos;password&apos;);</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<p>不需要重启数据库即可生效。</p>\n<p>把在所有数据库的所有表的所有权限赋值给位于所有IP地址的root用户。</p>\n<p><code>mysql&gt; grant all privileges on *.* to root@&#39;%&#39;identified by &#39;password&#39;;</code></p>\n<p>如果是新用户而不是root，则要先新建用户</p>\n<p><code>mysql&gt;create user &#39;username&#39;@&#39;%&#39; identified by &#39;password&#39;;</code></p>\n<p>此时就可以进行远程连接了。</p>\n<h2 id=\"安装php7-0\"><a href=\"#安装php7-0\" class=\"headerlink\" title=\"安装php7.0\"></a>安装php7.0</h2><p>php源码安装比较好，因为这个解释器。编译效率好。</p>\n<p>首先上个代码，来个直观印象</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/usr/local/php7 \\</span><br><span class=\"line\"> --with-curl \\</span><br><span class=\"line\"> --with-freetype-dir \\</span><br><span class=\"line\"> --with-gd \\</span><br><span class=\"line\"> --with-gettext \\</span><br><span class=\"line\"> --with-iconv-dir \\</span><br><span class=\"line\"> --with-kerberos \\</span><br><span class=\"line\"> --with-libdir=lib64 \\</span><br><span class=\"line\"> --with-libxml-dir \\</span><br><span class=\"line\"> --enable-fpm</span><br><span class=\"line\"> --with-openssl \\</span><br><span class=\"line\"> --with-pcre-regex \\</span><br><span class=\"line\"> --with-pdo-sqlite \\</span><br><span class=\"line\"> --with-pear \\</span><br><span class=\"line\"> --with-png-dir \\</span><br><span class=\"line\"> --with-xmlrpc \\</span><br><span class=\"line\"> --with-xsl \\</span><br><span class=\"line\"> --with-zlib \\</span><br><span class=\"line\"> --with-apxs2=/usr/local/apache/bin/apxs \\</span><br><span class=\"line\"> --enable-fpm \\</span><br><span class=\"line\"> --enable-bcmath \\</span><br><span class=\"line\"> --enable-libxml \\</span><br><span class=\"line\"> --enable-inline-optimization \\</span><br><span class=\"line\"> --enable-gd-native-ttf \\</span><br><span class=\"line\"> --enable-mbregex \\</span><br><span class=\"line\"> --enable-mbstring \\</span><br><span class=\"line\"> --enable-opcache \\</span><br><span class=\"line\"> --enable-pcntl \\</span><br><span class=\"line\"> --enable-shmop \\</span><br><span class=\"line\"> --enable-soap \\</span><br><span class=\"line\"> --enable-sockets \\</span><br><span class=\"line\"> --enable-sysvsem \\</span><br><span class=\"line\"> --enable-xml \\</span><br><span class=\"line\"> --enable-zip \\</span><br><span class=\"line\"> --enable-mysqlnd \\</span><br><span class=\"line\"> --with-mysqli=mysqlnd \\</span><br><span class=\"line\"> --with-pdo-mysql=mysqlnd</span><br><span class=\"line\"> --with-mysql-sock=/var/lib/mysql/mysql.sock</span><br></pre></td></tr></table></figure>\n<p>php下载<a href=\"http://www.php.net。下载7.0的版本就行了，然后在安装编译需要的程序。\" target=\"_blank\" rel=\"noopener\">www.php.net。下载7.0的版本就行了，然后在安装编译需要的程序。</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel MySQL pcre-develcurl-devel libxslt-devel</span><br></pre></td></tr></table></figure>\n<p>下载后解压进入执行上面的代码，就能够编译执行.make完执行make test检测一下，没有问题就make install。</p>\n<p>安装完成，复制php配置文件到安装目录</p>\n<figure class=\"highlight plain\"><figcaption><span>php.ini-development</span><a href=\"/usr/local/php/lib/php.ini```\">link</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">配置http.conf</span><br></pre></td></tr></table></figure>\n<p>配置http.conf<br>//加载解析php模块<br>LoadModule php7_module modules/libphp7.so</p>\n<p>//解析后缀名.php的文件</p>\n<filesmatch \"\\.ph(p[2-6]?|tml)$\"=\"\"><br>    SetHandler application/x-httpd-php<br></filesmatch>\n\n<p>//默认页面</p>\n<p><ifmodule dir_module=\"\"><br>    DirectoryIndex index.php index.html<br></ifmodule><br><code>`</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"apache2-4编译安装\"><a href=\"#apache2-4编译安装\" class=\"headerlink\" title=\"apache2.4编译安装\"></a>apache2.4编译安装</h2><p>httpd依赖于apr, apr-util</p>\n<p>apr全称为apache portable runtime，能实现httpd跨平台运行</p>\n<pre><code>httpd-2.4 依賴于1.4＋及以上版本的apr\n\n    apr-1.5.0.tar.bz2\n    apr-util-1.5.3.tar.bz2\n    httpd-2.4.9.tar.bz2\n\n    pcre-devel包\n    openssl-devel     \n\n\n2、编译安装 \n# yum install gcc\n# yum install pcre-devel\n\n# tar xf apr-1.5.0.tar.bz2\n# cd apr-1.5.0\n# ./configure --prefix=/usr/local/apr   (--prefix指定apr安装的目录)\n# make\n# make  install\n\n# tar xf apr-util-1.5.3.tar.bz2\n# cd apr-util-1.5.3\n# ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr\n# make &amp;&amp; make install ###该项被漏掉，补充@20160714\n\n\n# tar xf httpd-2.4.9.tar.bz2\n    以下为几个主要的配置项\n    --sysconfdir=/etc/httpd24  指定配置文件路径\n    --enable-so  启动模块动态装卸载\n    --enable-ssl 编译ssl模块\n    --enable-cgi 支持cgi机制（能够让静态web服务器能够解析动态请求的一个协议）\n    --enable-rewrite  支持url重写     --Author : Leshami\n    --with-zlib  支持数据包压缩       --Blog   : http://blog.csdn.net/leshami\n    --with-pcre  支持正则表达式\n    --with-apr=/usr/local/apr  指明依赖的apr所在目录\n    --with-apr-util=/usr/local/apr-util/  指明依赖的apr-util所在的目录\n    --enable-modules=most      启用的模块\n    --enable-mpms-shared=all   以共享方式编译的模块\n    --with-mpm=prefork         指明httpd的工作方式为prefork\n\n# cd httpd-2.4.9\n# ./configure                           \\\n    --with-apr=/usr/local/apr           \\\n    --with-apr-util=/usr/local/apr-util \\\n    --prefix=/usr/local/apache \\\n    --sysconfdir=/etc/httpd24  \\\n    --enable-so                \\\n    --enable-ssl               \\\n    --enable-cgi               \\\n    --enable-rewrite           \\\n    --with-zlib                \\\n    --with-pcre                \\\n    --with-mpm=prefork         \\\n    --enable-modules=most      \\\n    --enable-mpms-shared=all   \n\n# make \n# make install\n</code></pre><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apache的启动：/usr/local/apache/bin/apachectl start(stop,restart)</span><br><span class=\"line\">制作systemctl的启动脚本，网上找一找就行。</span><br><span class=\"line\">一定要记得iptables -F 和setenforce 0.不然别人访问不了你的。</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装mysql\"><a href=\"#安装mysql\" class=\"headerlink\" title=\"安装mysql\"></a>安装mysql</h2><p>mysql直接使用的yum安装，编译太慢烦了。用docker更加简单。</p>\n<p>一般网上给出的资料都是</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#yum install mysql</span><br><span class=\"line\">#yum install mysql-server</span><br><span class=\"line\">#yum install mysql-devel</span><br></pre></td></tr></table></figure>\n<p>安装mysql和mysql-devel都成功，但是安装mysql-server失败，如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# yum install mysql-server</span><br><span class=\"line\">Loaded plugins: fastestmirror</span><br><span class=\"line\">Loading mirror speeds from cached hostfile</span><br><span class=\"line\"> * base: mirrors.sina.cn</span><br><span class=\"line\"> * extras: mirrors.sina.cn</span><br><span class=\"line\"> * updates: mirrors.sina.cn</span><br><span class=\"line\">No package mysql-server available.</span><br><span class=\"line\">Error: Nothing to do</span><br></pre></td></tr></table></figure>\n<p>查资料发现是CentOS 7 版本将MySQL数据库软件从默认的程序列表中移除，用mariadb代替了。</p>\n<p>有两种解决办法：</p>\n<p>1、方法一：安装mariadb</p>\n<p>MariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可。开发这个分支的原因之一是：甲骨文公司收购了MySQL后，有将MySQL闭源的潜在风险，因此社区采用分支的方式来避开这个风险。MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。</p>\n<p>安装mariadb，大小59 M。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# yum install mariadb-server mariadb</span><br></pre></td></tr></table></figure>\n<p>mariadb数据库的相关命令是：</p>\n<p>systemctl start mariadb  #启动MariaDB</p>\n<p>systemctl stop mariadb  #停止MariaDB</p>\n<p>systemctl restart mariadb  #重启MariaDB</p>\n<p>systemctl enable mariadb  #设置开机启动</p>\n<p>所以先启动数据库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# systemctl start mariadb</span><br></pre></td></tr></table></figure>\n<p>然后就可以正常使用mysql了</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# mysql -u root -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MariaDB monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MariaDB connection id is 3</span><br><span class=\"line\">Server version: 5.5.41-MariaDB MariaDB Server</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2014, Oracle, MariaDB Corporation Ab and others.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &apos;help;&apos; or &apos;\\h&apos; for help. Type &apos;\\c&apos; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; show databases;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| test               |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">4 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt;</span><br></pre></td></tr></table></figure>\n<p>安装mariadb后显示的也是 MariaDB [(none)]&gt; ，可能看起来有点不习惯。下面是第二种方法。</p>\n<h2 id=\"2、方法二：官网下载安装mysql-server\"><a href=\"#2、方法二：官网下载安装mysql-server\" class=\"headerlink\" title=\"2、方法二：官网下载安装mysql-server\"></a>2、方法二：官网下载安装mysql-server</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</span><br><span class=\"line\"># rpm -ivh mysql-community-release-el7-5.noarch.rpm</span><br><span class=\"line\"># yum install mysql-community-server</span><br></pre></td></tr></table></figure>\n<p>安装成功后重启mysql服务。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># service mysqld restart</span><br></pre></td></tr></table></figure>\n<p>有时候直接启动会报错记得要关闭selinux    <figure class=\"highlight plain\"><figcaption><span>0```</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">如果想变动mysql的数据库位置可以修改/etc/my.cnf文件</span><br><span class=\"line\"></span><br><span class=\"line\">碰到数据库起不来的情况一般都是文件权限的问题数据库要用到的文件和文件夹一律```chown mysql:mysql filename</span><br></pre></td></tr></table></figure></p>\n<p>初次安装mysql，root账户没有密码。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@yl-web yl]# mysql -u root </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 3</span><br><span class=\"line\">Server version: 5.6.26 MySQL Community Server (GPL)</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &apos;help;&apos; or &apos;\\h&apos; for help. Type &apos;\\c&apos; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show databases;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| test               |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">4 rows in set (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<p>设置密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; set password for &apos;root&apos;@&apos;localhost&apos; =password(&apos;password&apos;);</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<p>不需要重启数据库即可生效。</p>\n<p>把在所有数据库的所有表的所有权限赋值给位于所有IP地址的root用户。</p>\n<p><code>mysql&gt; grant all privileges on *.* to root@&#39;%&#39;identified by &#39;password&#39;;</code></p>\n<p>如果是新用户而不是root，则要先新建用户</p>\n<p><code>mysql&gt;create user &#39;username&#39;@&#39;%&#39; identified by &#39;password&#39;;</code></p>\n<p>此时就可以进行远程连接了。</p>\n<h2 id=\"安装php7-0\"><a href=\"#安装php7-0\" class=\"headerlink\" title=\"安装php7.0\"></a>安装php7.0</h2><p>php源码安装比较好，因为这个解释器。编译效率好。</p>\n<p>首先上个代码，来个直观印象</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/usr/local/php7 \\</span><br><span class=\"line\"> --with-curl \\</span><br><span class=\"line\"> --with-freetype-dir \\</span><br><span class=\"line\"> --with-gd \\</span><br><span class=\"line\"> --with-gettext \\</span><br><span class=\"line\"> --with-iconv-dir \\</span><br><span class=\"line\"> --with-kerberos \\</span><br><span class=\"line\"> --with-libdir=lib64 \\</span><br><span class=\"line\"> --with-libxml-dir \\</span><br><span class=\"line\"> --enable-fpm</span><br><span class=\"line\"> --with-openssl \\</span><br><span class=\"line\"> --with-pcre-regex \\</span><br><span class=\"line\"> --with-pdo-sqlite \\</span><br><span class=\"line\"> --with-pear \\</span><br><span class=\"line\"> --with-png-dir \\</span><br><span class=\"line\"> --with-xmlrpc \\</span><br><span class=\"line\"> --with-xsl \\</span><br><span class=\"line\"> --with-zlib \\</span><br><span class=\"line\"> --with-apxs2=/usr/local/apache/bin/apxs \\</span><br><span class=\"line\"> --enable-fpm \\</span><br><span class=\"line\"> --enable-bcmath \\</span><br><span class=\"line\"> --enable-libxml \\</span><br><span class=\"line\"> --enable-inline-optimization \\</span><br><span class=\"line\"> --enable-gd-native-ttf \\</span><br><span class=\"line\"> --enable-mbregex \\</span><br><span class=\"line\"> --enable-mbstring \\</span><br><span class=\"line\"> --enable-opcache \\</span><br><span class=\"line\"> --enable-pcntl \\</span><br><span class=\"line\"> --enable-shmop \\</span><br><span class=\"line\"> --enable-soap \\</span><br><span class=\"line\"> --enable-sockets \\</span><br><span class=\"line\"> --enable-sysvsem \\</span><br><span class=\"line\"> --enable-xml \\</span><br><span class=\"line\"> --enable-zip \\</span><br><span class=\"line\"> --enable-mysqlnd \\</span><br><span class=\"line\"> --with-mysqli=mysqlnd \\</span><br><span class=\"line\"> --with-pdo-mysql=mysqlnd</span><br><span class=\"line\"> --with-mysql-sock=/var/lib/mysql/mysql.sock</span><br></pre></td></tr></table></figure>\n<p>php下载<a href=\"http://www.php.net。下载7.0的版本就行了，然后在安装编译需要的程序。\" target=\"_blank\" rel=\"noopener\">www.php.net。下载7.0的版本就行了，然后在安装编译需要的程序。</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel MySQL pcre-develcurl-devel libxslt-devel</span><br></pre></td></tr></table></figure>\n<p>下载后解压进入执行上面的代码，就能够编译执行.make完执行make test检测一下，没有问题就make install。</p>\n<p>安装完成，复制php配置文件到安装目录</p>\n<figure class=\"highlight plain\"><figcaption><span>php.ini-development</span><a href=\"/usr/local/php/lib/php.ini```\">link</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">配置http.conf</span><br></pre></td></tr></table></figure>\n<p>配置http.conf<br>//加载解析php模块<br>LoadModule php7_module modules/libphp7.so</p>\n<p>//解析后缀名.php的文件</p>\n<filesmatch \"\\.ph(p[2-6]?|tml)$\"=\"\"><br>    SetHandler application/x-httpd-php<br></filesmatch>\n\n<p>//默认页面</p>\n<p><ifmodule dir_module=\"\"><br>    DirectoryIndex index.php index.html<br></ifmodule><br><code>`</code></p>\n"},{"author":"QwerSe","head":null,"date":"2017-09-10T16:00:00.000Z","title":"sed的基本用法","status":"publish","summary":"要记住一点''和\"\"区别，''会把字符串里面的特殊字符给字面化，\"\"会保留特殊的字符含义","_content":"\n###  sed匹配打印\n主要是使用-p参数进行打印\n\n![](http://ww1.sinaimg.cn/large/ab318c02gy1fjfg27xdtfj20l10fawfh.jpg)\n\n\n\n我最喜欢的还是sed -n '1~2p' filename\n从第1行开始，每各2个打印一次\nseq 10 | sed '1~2p' :\n1\n3\n5\n7\n9\n\n### sed插入、修改、删除、替换\n![](http://ww1.sinaimg.cn/large/ab318c02gy1fjfg5aejo7j20im0fkgmi.jpg)\n\n### sed与shell的交互\n要记住一点''和\"\"区别，''会把字符串里面的特殊字符给字面化，\"\"会保留特殊的字符含义，下面我举个例子：\n```\n#A='qwerse'\n#echo 'this $A'\nthis $A\n#echo \"this $A\"\nthis qwerse\n\n```\n\n![](http://ww1.sinaimg.cn/large/ab318c02gy1fjfgggn178j20ct06t74k.jpg)\n\n一定要避免在脚本中出现此类错误！\n这是常用的用法，更高级的还需要了解缓存区，想要深入去百度搜搜。\n\n\n\n","source":"_posts/blog/linux/sed鍒濈骇.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2017-09-11\ntitle:  sed的基本用法\ntags: linux\n\ncategory: linux \nstatus: publish\nsummary: 要记住一点''和\"\"区别，''会把字符串里面的特殊字符给字面化，\"\"会保留特殊的字符含义\n---\n\n###  sed匹配打印\n主要是使用-p参数进行打印\n\n![](http://ww1.sinaimg.cn/large/ab318c02gy1fjfg27xdtfj20l10fawfh.jpg)\n\n\n\n我最喜欢的还是sed -n '1~2p' filename\n从第1行开始，每各2个打印一次\nseq 10 | sed '1~2p' :\n1\n3\n5\n7\n9\n\n### sed插入、修改、删除、替换\n![](http://ww1.sinaimg.cn/large/ab318c02gy1fjfg5aejo7j20im0fkgmi.jpg)\n\n### sed与shell的交互\n要记住一点''和\"\"区别，''会把字符串里面的特殊字符给字面化，\"\"会保留特殊的字符含义，下面我举个例子：\n```\n#A='qwerse'\n#echo 'this $A'\nthis $A\n#echo \"this $A\"\nthis qwerse\n\n```\n\n![](http://ww1.sinaimg.cn/large/ab318c02gy1fjfgggn178j20ct06t74k.jpg)\n\n一定要避免在脚本中出现此类错误！\n这是常用的用法，更高级的还需要了解缓存区，想要深入去百度搜搜。\n\n\n\n","slug":"blog/linux/sed鍒濈骇","published":1,"updated":"2018-08-01T08:20:50.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvf7000rpym6o3b4jnq4","content":"<h3 id=\"sed匹配打印\"><a href=\"#sed匹配打印\" class=\"headerlink\" title=\"sed匹配打印\"></a>sed匹配打印</h3><p>主要是使用-p参数进行打印</p>\n<p><img src=\"http://ww1.sinaimg.cn/large/ab318c02gy1fjfg27xdtfj20l10fawfh.jpg\" alt=\"\"></p>\n<p>我最喜欢的还是sed -n ‘1~2p’ filename<br>从第1行开始，每各2个打印一次<br>seq 10 | sed ‘1~2p’ :<br>1<br>3<br>5<br>7<br>9</p>\n<h3 id=\"sed插入、修改、删除、替换\"><a href=\"#sed插入、修改、删除、替换\" class=\"headerlink\" title=\"sed插入、修改、删除、替换\"></a>sed插入、修改、删除、替换</h3><p><img src=\"http://ww1.sinaimg.cn/large/ab318c02gy1fjfg5aejo7j20im0fkgmi.jpg\" alt=\"\"></p>\n<h3 id=\"sed与shell的交互\"><a href=\"#sed与shell的交互\" class=\"headerlink\" title=\"sed与shell的交互\"></a>sed与shell的交互</h3><p>要记住一点’’和””区别，’’会把字符串里面的特殊字符给字面化，””会保留特殊的字符含义，下面我举个例子：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#A=&apos;qwerse&apos;</span><br><span class=\"line\">#echo &apos;this $A&apos;</span><br><span class=\"line\">this $A</span><br><span class=\"line\">#echo &quot;this $A&quot;</span><br><span class=\"line\">this qwerse</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"http://ww1.sinaimg.cn/large/ab318c02gy1fjfgggn178j20ct06t74k.jpg\" alt=\"\"></p>\n<p>一定要避免在脚本中出现此类错误！<br>这是常用的用法，更高级的还需要了解缓存区，想要深入去百度搜搜。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"sed匹配打印\"><a href=\"#sed匹配打印\" class=\"headerlink\" title=\"sed匹配打印\"></a>sed匹配打印</h3><p>主要是使用-p参数进行打印</p>\n<p><img src=\"http://ww1.sinaimg.cn/large/ab318c02gy1fjfg27xdtfj20l10fawfh.jpg\" alt=\"\"></p>\n<p>我最喜欢的还是sed -n ‘1~2p’ filename<br>从第1行开始，每各2个打印一次<br>seq 10 | sed ‘1~2p’ :<br>1<br>3<br>5<br>7<br>9</p>\n<h3 id=\"sed插入、修改、删除、替换\"><a href=\"#sed插入、修改、删除、替换\" class=\"headerlink\" title=\"sed插入、修改、删除、替换\"></a>sed插入、修改、删除、替换</h3><p><img src=\"http://ww1.sinaimg.cn/large/ab318c02gy1fjfg5aejo7j20im0fkgmi.jpg\" alt=\"\"></p>\n<h3 id=\"sed与shell的交互\"><a href=\"#sed与shell的交互\" class=\"headerlink\" title=\"sed与shell的交互\"></a>sed与shell的交互</h3><p>要记住一点’’和””区别，’’会把字符串里面的特殊字符给字面化，””会保留特殊的字符含义，下面我举个例子：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#A=&apos;qwerse&apos;</span><br><span class=\"line\">#echo &apos;this $A&apos;</span><br><span class=\"line\">this $A</span><br><span class=\"line\">#echo &quot;this $A&quot;</span><br><span class=\"line\">this qwerse</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"http://ww1.sinaimg.cn/large/ab318c02gy1fjfgggn178j20ct06t74k.jpg\" alt=\"\"></p>\n<p>一定要避免在脚本中出现此类错误！<br>这是常用的用法，更高级的还需要了解缓存区，想要深入去百度搜搜。</p>\n"},{"author":"qwerse","head":null,"date":"2018-01-15T16:00:00.000Z","title":"局域网搭建dns","status":"publish","summary":"引用了csdn\"lvshaorong的博客\"，再次表示感谢。pdnsd是一款非常简单配置的局域网dns。","_content":"\n### 选择dns软件\"pdnsd\"\n\n用过dnsmasq和bind。都不太符合自己的意思。尤其是bind简直是太笨重了。\n\n#### pdnsd的优势\n\nUbuntu16.04默认使用dnsmasq作为dns解析服务，换句话说，一个Ubuntu 16.04LTS的电脑本身就是一个开放53端口的DNS服务器，听起来有点像买Ubuntu电脑送DNS服务器的感觉。但事实确实是这样的，因为Ubuntu默认开机启动dnsmasq服务，而且即使你把它stop了，Ubuntu还会定时重启，而且在启动dnsmasq服务的时候，Ubuntu系统会自动修改/etc/resolv.conf这个默认DNS服务指向文件为127.0.0.1，导致你试图修改这个文件改变你的DNS服务器地址后会莫名其妙被改回127.0.0.1。但是我之所以要用Pdnsd替换点dnsmasq的主要目的还是为了防止DNS污染。\n\n首先Pdnsd有这样几个优势\n\n1、可以将UDP协议的DNS请求转换为TCP协议进行发送，通过这种方式避免DNS污染\n\n2、pdnsd可以选择性的拒绝一些常见的被污染的目标地址，直接通过境内的dns服务器即可获得正确结果\n\n3、pdnsd可以做本地DNS缓存，而且可以自由设置过期时间，对于已缓存的DNS地址，局域网内其他电脑在DNS解析上的耗时可以缩减到1ms以内，大大提升了电脑的上网速度\n\n#### Ubuntu 16.04LTS系统为例详细讲解安装过程\n\n##### 1、  第一步：将dnsmasq的监听端口从53端口挪到其他端口\n\n首先要科普一下，Ubuntu系统中的dnsmasq并不只有一个实例在运行，而是会开启多个，在我的电脑中因为开启了Ubuntu自带的Wifi分享功能，本机多了一个内网IP地址10.42.0.1，并且作为这个Wifi网络的DNS服务器，所以我现在电脑上运行着三个dnsmasq进程。\n查看电脑53端口的占用情况，可以用一下命令\n`sudo netstat -apn | grep 53`\n\n我的计算机有线网卡的内网地址为192.168.1.100，并且分享了一个Wifi网络，在这个Wifi网络中的内网地址是10.42.0.1在Ubuntu默认情况下，所有网卡的53端口（包括ipv6地址）均会被dnsmasq所占，并且不止一个dnsmasq实例正在运行。\n\n\n\n##### 注：之所以有127.0.0.1:53而没有192.168.1.100:53或者0.0.0.0:53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10.42.0.1:53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10.42.0.1,所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。\n\n##### 注：运行在127.0.0.1的:53的dnsmasq进程和运行在10.42.0.1的dnsmasq是两个 不同的进程，使用不同的配置文件\n\n在Ubuntu默认情况下，127.0.0.1和0.0.0.0的53端口一般由同一个dnsmasq进程所占，而其他网段比如10.42.0.1由另一个dnsmasq进程控制，由于10.42.0.1是笔记本共享出的wifi，所以这里的dnsmasq除了做dns转发以外，还有一个更重要的作用就是做DHCP服务器动态为连接热点的设备分配IP地址。\n那么如何观察本机一共有多少dnsmasq进程，这些dnsmasq的配置文件又各是谁呢？可以用如下指令\n\n`ps -fC dnsmasq|more`\n\n\n现在我们要用pdnsd替换掉的就是监听在127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个端口的dnsmasq服务，也就是pid为12625的这个dnsmasq，其他的dnsmasq因为并没有挤占端口，而且还要作为DHCP服务使用，所以我们不要停掉他们。那么如何将dnsmasq的监听端口挪走呢，只需要修改dnsmasq的配置文件并重启即可，虽然仅仅stop掉dnsmasq的服务也有用，但是Ubuntu隔一段时间又会自动重启并同时修改/etc/resolv.conf文件，所以最好的方式还是把dnsmasq的端口挪走一劳永逸。\n首先我们停止dnsmasq的服务\n\n`sudo service dnsmasq stop`\n\n现在使用netstat -nl观察端口的监听情况是不是发现127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个53端口都已经没有啦，而且并没有影响10.42.0.1:53上做DHCP服务的dnsmasq的运行。\n\n##### 注：为什么127.0.0.1:53没有了而10.42.0.1:53还是由dnsmasq所占，原因如上面已经提到过的，\n\n这两个端口的dnsmasq并不是一个dnsmasq进程，所使用配置文件和发挥的功能也不一样，而我们要修改两个网段最终的DNS服务程序，只需要将127.0.0.1:53这个dnsmasq换掉即可，不需要管10.42.0.1:53这个内网的dnsmasq进程\n然后修改dnsmasq的配置文件\n\n`sudo nano /etc/dnsmasq.conf`\n\n在第十行将dnsmasq的监听端口从53挪到9053，这样我们就把系统默认的dnsmasq的端口挪到了9053\n\n然后重启dnsmasq服务\n\n`sudo service dnsmasq restart`\n\n现在在使用netstat -nl查看，是不是发现原来127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个53端口都变成9053啦，现在我们已经为pdnsd服务腾出了工作端口，下一步我们可以安装pdnsd了\n\n注：于此同时，由于我们系统的dns服务器指向还是127.0.0.1,所以此时你的电脑已经上不了忘了，解决方法是修改/etc/resolv.con文件将127.0.0.1换成ISP提供的DNS服务器或者114.114.114.114或者阿里的223.5.5.5等等。\n\n#### 2、安装Pdnsd服务\n\n\n`sudo apk-get install pdnsd`\n\n在安装时会跳出一个选择框，我们选manual\n（注意如果此时提示你网络问题请到/etc/resolv.conf文件中把dns服务器地址从127.0.1.1改到114.114.114.114）\n安装完pdnsd服务之后我们需要修改它的配置文件，主要目的是设置两组DNS服务器，第一组是国内的114.114.114.114,第二组是OpenDNS的5353端口，114.114.114.114的53端口即使使用TCP连接解析也会返回一些脏地址，但我们仍然要用他的原因它的ping通率要比OpenDns要高，主要作用是加速一些国内正常DNS的解析，防止访问国内网站时走OpenDNS导致解析变慢。所以下面配置文件中的114.114.114.114也可以换成你当地ISP分给你的DNS服务器，尤其是在114.114.114.114 ping不通的情况下。另外，下面配置文件中的reject列表也非常重要，只有当114.114.114.114返回脏地址在这个列表中时才会触发pdnsd再发送一个请求到OpenDNS，所以务必要将114.114.114.114所有的脏地址都收录到这个列表中。同时，如果你本地ping不通OpenDNS的两个地址时，有两种方式可以解决，第一种是使用Redsocks+代理将tcp协议的DNS查询请求加密发送到国外代理服务器，另一种是使用能ping通的国外其他DNS服务器，尽量避开53端口，也就是说尽量找国外支持53端口以外进行解析的DNS服务器。\n\n`sudo nano /etc/pdnsd.conf`\n\n将这个文件修改如下\n\n```\n// Read the pdnsd.conf(5) manpage for an explanation of the options.  \n  \n/* Note: this file is overriden by automatic config files when \n  /etc/default/pdnsd AUTO_MODE is set and that \n  /usr/share/pdnsd/pdnsd-$AUTO_MODE.conf exists \n*/  \n  \nglobal {  \n    perm_cache=4096;  \n    cache_dir=\"/var/cache/pdnsd\";  \n    run_as=\"pdnsd\";  \n    server_ip = 192.168.1.81;  # 将自己的有线网卡的局域网地址设为工作地址，这样可以方便局域网用户把你的电脑当成DNS服务器,这里要换成你的地址，但是好像0.0.0.0我试过不行  \n    server_port=53;            # 使用DNS协议默认的53号地址  \n    status_ctl = on;  \n    query_method=tcp_only;   #非常重要，使用tcp协议请求DNS结果，防止被污染  \n    neg_domain_pol = off;    \n    paranoid = on;    \n    par_queries = 1;    \n    min_ttl = 6h;    \n    max_ttl = 12h;    \n    timeout = 10;    \n}  \n  \n/* with status_ctl=on and resolvconf installed, this will work out from the box \n  this is the recommended setup for mobile machines */  \nserver {    \n   label = \"routine\";  # 这个随便写    \n   ip = 114.114.114.114;   # 这里为上级 dns 的 ip 地址，如果8.8.8.8能够ping通，可以用8.8.8.8    \n   timeout = 5;    \n   reject = 74.125.127.102,  #这里非常重要，这些ip是防火墙喜欢将DNS污染到的目标地址，也就是脏地址，你可以使用nslookup命令查询当地的脏地址并补充在这个列表中，如果114.114.114.114返回脏地址后pdnsd会自动重新发送DNS请求到下面的OpenDNS服务器，如果一个脏地址没有在列在这里，那么还是会收到污染的结果  \n       74.125.155.102,    \n       74.125.39.102,    \n       74.125.39.113,    \n       209.85.229.138,    \n       128.121.126.139,    \n       159.106.121.75,    \n       169.132.13.103,    \n       192.67.198.6,    \n       202.106.1.2,    \n       202.181.7.85,    \n       203.161.230.171,    \n       203.98.7.65,    \n       207.12.88.98,    \n       208.56.31.43,    \n       209.145.54.50,    \n       209.220.30.174,    \n       209.36.73.33,    \n       211.94.66.147,    \n       213.169.251.35,    \n       216.221.188.182,    \n       216.234.179.13,    \n       243.185.187.39,    \n       37.61.54.158,    \n       4.36.66.178,    \n       46.82.174.68,    \n       59.24.3.173,    \n       64.33.88.161,    \n       64.33.99.47,    \n       64.66.163.251,    \n       65.104.202.252,    \n       65.160.219.113,    \n       66.45.252.237,    \n       69.55.52.253,    \n       72.14.205.104,    \n       72.14.205.99,    \n       78.16.49.15,    \n       8.7.198.45,    \n       93.46.8.89,    \n       37.61.54.158,    \n       243.185.187.39,    \n       190.93.247.4,    \n       190.93.246.4,    \n       190.93.245.4,    \n       190.93.244.4,    \n       65.49.2.178,    \n       189.163.17.5,    \n       23.89.5.60,    \n       49.2.123.56,    \n       54.76.135.1,    \n       77.4.7.92,    \n       118.5.49.6,    \n       159.24.3.173,    \n       188.5.4.96,    \n       197.4.4.12,    \n       220.250.64.24,    \n       243.185.187.30,    \n       249.129.46.48,    \n       253.157.14.165;    \n   reject_policy = fail;    \n   exclude = \".google.com\",    \n       \".cn\",      #排除国内DNS解析，如果正常翻，则可以在前面加#注释    \n       \".baidu.com\",   #排除国内DNS解析，如果正常翻，则可以在前面加#注释    \n       \".qq.com\",  #排除国内DNS解析，如果正常翻，则可以在前面加#注释    \n       \".gstatic.com\",    \n       \".googleusercontent.com\",    \n       \".googlepages.com\",    \n       \".googlevideo.com\",    \n       \".googlecode.com\",    \n       \".googleapis.com\",    \n       \".googlesource.com\",    \n       \".googledrive.com\",    \n       \".ggpht.com\",    \n       \".youtube.com\",    \n       \".youtu.be\",    \n       \".ytimg.com\",    \n       \".twitter.com\",    \n       \".facebook.com\",    \n       \".fastly.net\",    \n       \".akamai.net\",    \n       \".akamaiedge.net\",    \n       \".akamaihd.net\",    \n       \".edgesuite.net\",    \n       \".edgekey.net\";    \n}  \n  \nserver {    \n   # Better setup dns server(DON'T USE PORT 53) on your own vps for faster proxying    \n   label = \"special\";  # 这个随便写    \n   ip = 208.67.222.222,208.67.220.220; # 这里为上级 dns 的 ip 地址    \n   port = 5353;    \n   proxy_only = on;    \n   timeout = 5;    \n}    \n\n```\n\n保存后重启pdnsd发现并没有像我们想的一样53端口出现监听，因为我们还需要将pdnsd以守护模式运行\n\n`sudo nano /etc/default/pdnsd`\n\n将START_DAEMON=no改为START_DAEMON=yes\n\n现在可以重启pdnsd服务了\n\n`sudo /etc/init.d/pdnsd restart`\n\n重启之后再使用netstat -nl查看端口情况，是不是53端口已经正在使用了，或者使用sudo netstat -apn | grep 53看看是不是由pdnsd服务占用53端口\n\n\n\n最后一步，就是将我们本机的DNS服务器地址指向pdnsd\n\n`sudo nano /etc/resolv.conf`\n\n将原来的127.0.1.1改成上面配置文件配置的地址，即如果是局域网地址，就填192.168.1.81，视你自己的网络情况而定，如果上面填的是0.0.0.0，那么此处就填127.0.0.1\n\n然后再使用nslookup www.baidu.com\n和nslookup www.facebook.com\n看一下dns解析结果是否正确\n如果baidu.com无法解析说明Pdnsd配置有问题，此时要检查53端口是否已被监听\n如果baidu.com正常而facebook.com无法解析或者返回错误地址，首先我们可以查看并清空一下缓存\n\n`sudo pdnsd-ctl dump`\n`sudo pdnsd-ctl empty-cache`\n\n如果还是返回污染后的地址，就把这个污染地址加到上面/etc/pdnsd.conf的脏域名列表中，就可以获得正确结果了\n那么如何判断DNS解析后的域名是否正确呢，方法是nslookup www.twittter.com 和nslookup www.youtube.com，真的解析地址会返回多个解析结果，而污染后的结果只有一个\n如下图中前两个是错误的解析结果，后两个是正确的解析结果，或者你还可以通过webdnstools.com这个网站去查询正确的解析结果与本地的结果进行比对\n\n\n**----局域网设置内网域名-----**\n\na.最简单办法直接用pdnsd-ctl 插入一条 A 记录,举例：\n\n`pdnsd-ctl add a 127.0.0.1 www.linuxbyte.org. 900 `（900 为TTL 值）\n\n同样你可以用pdnsd-ctl add 插入其他的mx，ns，cname 记录等\nb.第一方法适合临时做一些修改，要想真正的劫持一个域名可以在 pdnsd.conf 中加入 rr section。举例：\n\n```\nrr {\nname = linuxbyte.org;\nns = localhost;\nsoa = localhost, root.localhost, 42, 86400, 900, 86400, 86400;\n}\n```\n这个是劫持了ns 记录，把域名解析交给你指定的dns 服务器来做。\n​\n```\nrr {\nname = *.linuxbyte.org;\ncname = www.linuxsky.org;\n}\n```\n这里把所有linuxbyte.org 的二级域名都做了cname到了 www.linuxsky.org\n\n```\nrr {\nname = www.linuxbyte.org;\na = 192.168.0.123\n}```\n直接插入一条A 记录。\n\n\n\n\n\n\n\n```","source":"_posts/blog/linux/灞€鍩熺綉dns鎼缓.md","raw":"---\nauthor: qwerse\nhead: \ndate: 2018-01-16\ntitle: 局域网搭建dns\ntags: dns\ncategory: linux\nstatus: publish\nsummary: 引用了csdn\"lvshaorong的博客\"，再次表示感谢。pdnsd是一款非常简单配置的局域网dns。\n---\n\n### 选择dns软件\"pdnsd\"\n\n用过dnsmasq和bind。都不太符合自己的意思。尤其是bind简直是太笨重了。\n\n#### pdnsd的优势\n\nUbuntu16.04默认使用dnsmasq作为dns解析服务，换句话说，一个Ubuntu 16.04LTS的电脑本身就是一个开放53端口的DNS服务器，听起来有点像买Ubuntu电脑送DNS服务器的感觉。但事实确实是这样的，因为Ubuntu默认开机启动dnsmasq服务，而且即使你把它stop了，Ubuntu还会定时重启，而且在启动dnsmasq服务的时候，Ubuntu系统会自动修改/etc/resolv.conf这个默认DNS服务指向文件为127.0.0.1，导致你试图修改这个文件改变你的DNS服务器地址后会莫名其妙被改回127.0.0.1。但是我之所以要用Pdnsd替换点dnsmasq的主要目的还是为了防止DNS污染。\n\n首先Pdnsd有这样几个优势\n\n1、可以将UDP协议的DNS请求转换为TCP协议进行发送，通过这种方式避免DNS污染\n\n2、pdnsd可以选择性的拒绝一些常见的被污染的目标地址，直接通过境内的dns服务器即可获得正确结果\n\n3、pdnsd可以做本地DNS缓存，而且可以自由设置过期时间，对于已缓存的DNS地址，局域网内其他电脑在DNS解析上的耗时可以缩减到1ms以内，大大提升了电脑的上网速度\n\n#### Ubuntu 16.04LTS系统为例详细讲解安装过程\n\n##### 1、  第一步：将dnsmasq的监听端口从53端口挪到其他端口\n\n首先要科普一下，Ubuntu系统中的dnsmasq并不只有一个实例在运行，而是会开启多个，在我的电脑中因为开启了Ubuntu自带的Wifi分享功能，本机多了一个内网IP地址10.42.0.1，并且作为这个Wifi网络的DNS服务器，所以我现在电脑上运行着三个dnsmasq进程。\n查看电脑53端口的占用情况，可以用一下命令\n`sudo netstat -apn | grep 53`\n\n我的计算机有线网卡的内网地址为192.168.1.100，并且分享了一个Wifi网络，在这个Wifi网络中的内网地址是10.42.0.1在Ubuntu默认情况下，所有网卡的53端口（包括ipv6地址）均会被dnsmasq所占，并且不止一个dnsmasq实例正在运行。\n\n\n\n##### 注：之所以有127.0.0.1:53而没有192.168.1.100:53或者0.0.0.0:53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10.42.0.1:53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10.42.0.1,所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。\n\n##### 注：运行在127.0.0.1的:53的dnsmasq进程和运行在10.42.0.1的dnsmasq是两个 不同的进程，使用不同的配置文件\n\n在Ubuntu默认情况下，127.0.0.1和0.0.0.0的53端口一般由同一个dnsmasq进程所占，而其他网段比如10.42.0.1由另一个dnsmasq进程控制，由于10.42.0.1是笔记本共享出的wifi，所以这里的dnsmasq除了做dns转发以外，还有一个更重要的作用就是做DHCP服务器动态为连接热点的设备分配IP地址。\n那么如何观察本机一共有多少dnsmasq进程，这些dnsmasq的配置文件又各是谁呢？可以用如下指令\n\n`ps -fC dnsmasq|more`\n\n\n现在我们要用pdnsd替换掉的就是监听在127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个端口的dnsmasq服务，也就是pid为12625的这个dnsmasq，其他的dnsmasq因为并没有挤占端口，而且还要作为DHCP服务使用，所以我们不要停掉他们。那么如何将dnsmasq的监听端口挪走呢，只需要修改dnsmasq的配置文件并重启即可，虽然仅仅stop掉dnsmasq的服务也有用，但是Ubuntu隔一段时间又会自动重启并同时修改/etc/resolv.conf文件，所以最好的方式还是把dnsmasq的端口挪走一劳永逸。\n首先我们停止dnsmasq的服务\n\n`sudo service dnsmasq stop`\n\n现在使用netstat -nl观察端口的监听情况是不是发现127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个53端口都已经没有啦，而且并没有影响10.42.0.1:53上做DHCP服务的dnsmasq的运行。\n\n##### 注：为什么127.0.0.1:53没有了而10.42.0.1:53还是由dnsmasq所占，原因如上面已经提到过的，\n\n这两个端口的dnsmasq并不是一个dnsmasq进程，所使用配置文件和发挥的功能也不一样，而我们要修改两个网段最终的DNS服务程序，只需要将127.0.0.1:53这个dnsmasq换掉即可，不需要管10.42.0.1:53这个内网的dnsmasq进程\n然后修改dnsmasq的配置文件\n\n`sudo nano /etc/dnsmasq.conf`\n\n在第十行将dnsmasq的监听端口从53挪到9053，这样我们就把系统默认的dnsmasq的端口挪到了9053\n\n然后重启dnsmasq服务\n\n`sudo service dnsmasq restart`\n\n现在在使用netstat -nl查看，是不是发现原来127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个53端口都变成9053啦，现在我们已经为pdnsd服务腾出了工作端口，下一步我们可以安装pdnsd了\n\n注：于此同时，由于我们系统的dns服务器指向还是127.0.0.1,所以此时你的电脑已经上不了忘了，解决方法是修改/etc/resolv.con文件将127.0.0.1换成ISP提供的DNS服务器或者114.114.114.114或者阿里的223.5.5.5等等。\n\n#### 2、安装Pdnsd服务\n\n\n`sudo apk-get install pdnsd`\n\n在安装时会跳出一个选择框，我们选manual\n（注意如果此时提示你网络问题请到/etc/resolv.conf文件中把dns服务器地址从127.0.1.1改到114.114.114.114）\n安装完pdnsd服务之后我们需要修改它的配置文件，主要目的是设置两组DNS服务器，第一组是国内的114.114.114.114,第二组是OpenDNS的5353端口，114.114.114.114的53端口即使使用TCP连接解析也会返回一些脏地址，但我们仍然要用他的原因它的ping通率要比OpenDns要高，主要作用是加速一些国内正常DNS的解析，防止访问国内网站时走OpenDNS导致解析变慢。所以下面配置文件中的114.114.114.114也可以换成你当地ISP分给你的DNS服务器，尤其是在114.114.114.114 ping不通的情况下。另外，下面配置文件中的reject列表也非常重要，只有当114.114.114.114返回脏地址在这个列表中时才会触发pdnsd再发送一个请求到OpenDNS，所以务必要将114.114.114.114所有的脏地址都收录到这个列表中。同时，如果你本地ping不通OpenDNS的两个地址时，有两种方式可以解决，第一种是使用Redsocks+代理将tcp协议的DNS查询请求加密发送到国外代理服务器，另一种是使用能ping通的国外其他DNS服务器，尽量避开53端口，也就是说尽量找国外支持53端口以外进行解析的DNS服务器。\n\n`sudo nano /etc/pdnsd.conf`\n\n将这个文件修改如下\n\n```\n// Read the pdnsd.conf(5) manpage for an explanation of the options.  \n  \n/* Note: this file is overriden by automatic config files when \n  /etc/default/pdnsd AUTO_MODE is set and that \n  /usr/share/pdnsd/pdnsd-$AUTO_MODE.conf exists \n*/  \n  \nglobal {  \n    perm_cache=4096;  \n    cache_dir=\"/var/cache/pdnsd\";  \n    run_as=\"pdnsd\";  \n    server_ip = 192.168.1.81;  # 将自己的有线网卡的局域网地址设为工作地址，这样可以方便局域网用户把你的电脑当成DNS服务器,这里要换成你的地址，但是好像0.0.0.0我试过不行  \n    server_port=53;            # 使用DNS协议默认的53号地址  \n    status_ctl = on;  \n    query_method=tcp_only;   #非常重要，使用tcp协议请求DNS结果，防止被污染  \n    neg_domain_pol = off;    \n    paranoid = on;    \n    par_queries = 1;    \n    min_ttl = 6h;    \n    max_ttl = 12h;    \n    timeout = 10;    \n}  \n  \n/* with status_ctl=on and resolvconf installed, this will work out from the box \n  this is the recommended setup for mobile machines */  \nserver {    \n   label = \"routine\";  # 这个随便写    \n   ip = 114.114.114.114;   # 这里为上级 dns 的 ip 地址，如果8.8.8.8能够ping通，可以用8.8.8.8    \n   timeout = 5;    \n   reject = 74.125.127.102,  #这里非常重要，这些ip是防火墙喜欢将DNS污染到的目标地址，也就是脏地址，你可以使用nslookup命令查询当地的脏地址并补充在这个列表中，如果114.114.114.114返回脏地址后pdnsd会自动重新发送DNS请求到下面的OpenDNS服务器，如果一个脏地址没有在列在这里，那么还是会收到污染的结果  \n       74.125.155.102,    \n       74.125.39.102,    \n       74.125.39.113,    \n       209.85.229.138,    \n       128.121.126.139,    \n       159.106.121.75,    \n       169.132.13.103,    \n       192.67.198.6,    \n       202.106.1.2,    \n       202.181.7.85,    \n       203.161.230.171,    \n       203.98.7.65,    \n       207.12.88.98,    \n       208.56.31.43,    \n       209.145.54.50,    \n       209.220.30.174,    \n       209.36.73.33,    \n       211.94.66.147,    \n       213.169.251.35,    \n       216.221.188.182,    \n       216.234.179.13,    \n       243.185.187.39,    \n       37.61.54.158,    \n       4.36.66.178,    \n       46.82.174.68,    \n       59.24.3.173,    \n       64.33.88.161,    \n       64.33.99.47,    \n       64.66.163.251,    \n       65.104.202.252,    \n       65.160.219.113,    \n       66.45.252.237,    \n       69.55.52.253,    \n       72.14.205.104,    \n       72.14.205.99,    \n       78.16.49.15,    \n       8.7.198.45,    \n       93.46.8.89,    \n       37.61.54.158,    \n       243.185.187.39,    \n       190.93.247.4,    \n       190.93.246.4,    \n       190.93.245.4,    \n       190.93.244.4,    \n       65.49.2.178,    \n       189.163.17.5,    \n       23.89.5.60,    \n       49.2.123.56,    \n       54.76.135.1,    \n       77.4.7.92,    \n       118.5.49.6,    \n       159.24.3.173,    \n       188.5.4.96,    \n       197.4.4.12,    \n       220.250.64.24,    \n       243.185.187.30,    \n       249.129.46.48,    \n       253.157.14.165;    \n   reject_policy = fail;    \n   exclude = \".google.com\",    \n       \".cn\",      #排除国内DNS解析，如果正常翻，则可以在前面加#注释    \n       \".baidu.com\",   #排除国内DNS解析，如果正常翻，则可以在前面加#注释    \n       \".qq.com\",  #排除国内DNS解析，如果正常翻，则可以在前面加#注释    \n       \".gstatic.com\",    \n       \".googleusercontent.com\",    \n       \".googlepages.com\",    \n       \".googlevideo.com\",    \n       \".googlecode.com\",    \n       \".googleapis.com\",    \n       \".googlesource.com\",    \n       \".googledrive.com\",    \n       \".ggpht.com\",    \n       \".youtube.com\",    \n       \".youtu.be\",    \n       \".ytimg.com\",    \n       \".twitter.com\",    \n       \".facebook.com\",    \n       \".fastly.net\",    \n       \".akamai.net\",    \n       \".akamaiedge.net\",    \n       \".akamaihd.net\",    \n       \".edgesuite.net\",    \n       \".edgekey.net\";    \n}  \n  \nserver {    \n   # Better setup dns server(DON'T USE PORT 53) on your own vps for faster proxying    \n   label = \"special\";  # 这个随便写    \n   ip = 208.67.222.222,208.67.220.220; # 这里为上级 dns 的 ip 地址    \n   port = 5353;    \n   proxy_only = on;    \n   timeout = 5;    \n}    \n\n```\n\n保存后重启pdnsd发现并没有像我们想的一样53端口出现监听，因为我们还需要将pdnsd以守护模式运行\n\n`sudo nano /etc/default/pdnsd`\n\n将START_DAEMON=no改为START_DAEMON=yes\n\n现在可以重启pdnsd服务了\n\n`sudo /etc/init.d/pdnsd restart`\n\n重启之后再使用netstat -nl查看端口情况，是不是53端口已经正在使用了，或者使用sudo netstat -apn | grep 53看看是不是由pdnsd服务占用53端口\n\n\n\n最后一步，就是将我们本机的DNS服务器地址指向pdnsd\n\n`sudo nano /etc/resolv.conf`\n\n将原来的127.0.1.1改成上面配置文件配置的地址，即如果是局域网地址，就填192.168.1.81，视你自己的网络情况而定，如果上面填的是0.0.0.0，那么此处就填127.0.0.1\n\n然后再使用nslookup www.baidu.com\n和nslookup www.facebook.com\n看一下dns解析结果是否正确\n如果baidu.com无法解析说明Pdnsd配置有问题，此时要检查53端口是否已被监听\n如果baidu.com正常而facebook.com无法解析或者返回错误地址，首先我们可以查看并清空一下缓存\n\n`sudo pdnsd-ctl dump`\n`sudo pdnsd-ctl empty-cache`\n\n如果还是返回污染后的地址，就把这个污染地址加到上面/etc/pdnsd.conf的脏域名列表中，就可以获得正确结果了\n那么如何判断DNS解析后的域名是否正确呢，方法是nslookup www.twittter.com 和nslookup www.youtube.com，真的解析地址会返回多个解析结果，而污染后的结果只有一个\n如下图中前两个是错误的解析结果，后两个是正确的解析结果，或者你还可以通过webdnstools.com这个网站去查询正确的解析结果与本地的结果进行比对\n\n\n**----局域网设置内网域名-----**\n\na.最简单办法直接用pdnsd-ctl 插入一条 A 记录,举例：\n\n`pdnsd-ctl add a 127.0.0.1 www.linuxbyte.org. 900 `（900 为TTL 值）\n\n同样你可以用pdnsd-ctl add 插入其他的mx，ns，cname 记录等\nb.第一方法适合临时做一些修改，要想真正的劫持一个域名可以在 pdnsd.conf 中加入 rr section。举例：\n\n```\nrr {\nname = linuxbyte.org;\nns = localhost;\nsoa = localhost, root.localhost, 42, 86400, 900, 86400, 86400;\n}\n```\n这个是劫持了ns 记录，把域名解析交给你指定的dns 服务器来做。\n​\n```\nrr {\nname = *.linuxbyte.org;\ncname = www.linuxsky.org;\n}\n```\n这里把所有linuxbyte.org 的二级域名都做了cname到了 www.linuxsky.org\n\n```\nrr {\nname = www.linuxbyte.org;\na = 192.168.0.123\n}```\n直接插入一条A 记录。\n\n\n\n\n\n\n\n```","slug":"blog/linux/灞€鍩熺綉dns鎼缓","published":1,"updated":"2018-08-01T08:17:25.650Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvfb000wpym6l34pn34e","content":"<h3 id=\"选择dns软件”pdnsd”\"><a href=\"#选择dns软件”pdnsd”\" class=\"headerlink\" title=\"选择dns软件”pdnsd”\"></a>选择dns软件”pdnsd”</h3><p>用过dnsmasq和bind。都不太符合自己的意思。尤其是bind简直是太笨重了。</p>\n<h4 id=\"pdnsd的优势\"><a href=\"#pdnsd的优势\" class=\"headerlink\" title=\"pdnsd的优势\"></a>pdnsd的优势</h4><p>Ubuntu16.04默认使用dnsmasq作为dns解析服务，换句话说，一个Ubuntu 16.04LTS的电脑本身就是一个开放53端口的DNS服务器，听起来有点像买Ubuntu电脑送DNS服务器的感觉。但事实确实是这样的，因为Ubuntu默认开机启动dnsmasq服务，而且即使你把它stop了，Ubuntu还会定时重启，而且在启动dnsmasq服务的时候，Ubuntu系统会自动修改/etc/resolv.conf这个默认DNS服务指向文件为127.0.0.1，导致你试图修改这个文件改变你的DNS服务器地址后会莫名其妙被改回127.0.0.1。但是我之所以要用Pdnsd替换点dnsmasq的主要目的还是为了防止DNS污染。</p>\n<p>首先Pdnsd有这样几个优势</p>\n<p>1、可以将UDP协议的DNS请求转换为TCP协议进行发送，通过这种方式避免DNS污染</p>\n<p>2、pdnsd可以选择性的拒绝一些常见的被污染的目标地址，直接通过境内的dns服务器即可获得正确结果</p>\n<p>3、pdnsd可以做本地DNS缓存，而且可以自由设置过期时间，对于已缓存的DNS地址，局域网内其他电脑在DNS解析上的耗时可以缩减到1ms以内，大大提升了电脑的上网速度</p>\n<h4 id=\"Ubuntu-16-04LTS系统为例详细讲解安装过程\"><a href=\"#Ubuntu-16-04LTS系统为例详细讲解安装过程\" class=\"headerlink\" title=\"Ubuntu 16.04LTS系统为例详细讲解安装过程\"></a>Ubuntu 16.04LTS系统为例详细讲解安装过程</h4><h5 id=\"1、-第一步：将dnsmasq的监听端口从53端口挪到其他端口\"><a href=\"#1、-第一步：将dnsmasq的监听端口从53端口挪到其他端口\" class=\"headerlink\" title=\"1、  第一步：将dnsmasq的监听端口从53端口挪到其他端口\"></a>1、  第一步：将dnsmasq的监听端口从53端口挪到其他端口</h5><p>首先要科普一下，Ubuntu系统中的dnsmasq并不只有一个实例在运行，而是会开启多个，在我的电脑中因为开启了Ubuntu自带的Wifi分享功能，本机多了一个内网IP地址10.42.0.1，并且作为这个Wifi网络的DNS服务器，所以我现在电脑上运行着三个dnsmasq进程。<br>查看电脑53端口的占用情况，可以用一下命令<br><code>sudo netstat -apn | grep 53</code></p>\n<p>我的计算机有线网卡的内网地址为192.168.1.100，并且分享了一个Wifi网络，在这个Wifi网络中的内网地址是10.42.0.1在Ubuntu默认情况下，所有网卡的53端口（包括ipv6地址）均会被dnsmasq所占，并且不止一个dnsmasq实例正在运行。</p>\n<h5 id=\"注：之所以有127-0-0-1-53而没有192-168-1-100-53或者0-0-0-0-53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10-42-0-1-53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10-42-0-1-所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。\"><a href=\"#注：之所以有127-0-0-1-53而没有192-168-1-100-53或者0-0-0-0-53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10-42-0-1-53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10-42-0-1-所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。\" class=\"headerlink\" title=\"注：之所以有127.0.0.1:53而没有192.168.1.100:53或者0.0.0.0:53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10.42.0.1:53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10.42.0.1,所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。\"></a>注：之所以有127.0.0.1:53而没有192.168.1.100:53或者0.0.0.0:53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10.42.0.1:53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10.42.0.1,所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。</h5><h5 id=\"注：运行在127-0-0-1的-53的dnsmasq进程和运行在10-42-0-1的dnsmasq是两个-不同的进程，使用不同的配置文件\"><a href=\"#注：运行在127-0-0-1的-53的dnsmasq进程和运行在10-42-0-1的dnsmasq是两个-不同的进程，使用不同的配置文件\" class=\"headerlink\" title=\"注：运行在127.0.0.1的:53的dnsmasq进程和运行在10.42.0.1的dnsmasq是两个 不同的进程，使用不同的配置文件\"></a>注：运行在127.0.0.1的:53的dnsmasq进程和运行在10.42.0.1的dnsmasq是两个 不同的进程，使用不同的配置文件</h5><p>在Ubuntu默认情况下，127.0.0.1和0.0.0.0的53端口一般由同一个dnsmasq进程所占，而其他网段比如10.42.0.1由另一个dnsmasq进程控制，由于10.42.0.1是笔记本共享出的wifi，所以这里的dnsmasq除了做dns转发以外，还有一个更重要的作用就是做DHCP服务器动态为连接热点的设备分配IP地址。<br>那么如何观察本机一共有多少dnsmasq进程，这些dnsmasq的配置文件又各是谁呢？可以用如下指令</p>\n<p><code>ps -fC dnsmasq|more</code></p>\n<p>现在我们要用pdnsd替换掉的就是监听在127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个端口的dnsmasq服务，也就是pid为12625的这个dnsmasq，其他的dnsmasq因为并没有挤占端口，而且还要作为DHCP服务使用，所以我们不要停掉他们。那么如何将dnsmasq的监听端口挪走呢，只需要修改dnsmasq的配置文件并重启即可，虽然仅仅stop掉dnsmasq的服务也有用，但是Ubuntu隔一段时间又会自动重启并同时修改/etc/resolv.conf文件，所以最好的方式还是把dnsmasq的端口挪走一劳永逸。<br>首先我们停止dnsmasq的服务</p>\n<p><code>sudo service dnsmasq stop</code></p>\n<p>现在使用netstat -nl观察端口的监听情况是不是发现127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个53端口都已经没有啦，而且并没有影响10.42.0.1:53上做DHCP服务的dnsmasq的运行。</p>\n<h5 id=\"注：为什么127-0-0-1-53没有了而10-42-0-1-53还是由dnsmasq所占，原因如上面已经提到过的，\"><a href=\"#注：为什么127-0-0-1-53没有了而10-42-0-1-53还是由dnsmasq所占，原因如上面已经提到过的，\" class=\"headerlink\" title=\"注：为什么127.0.0.1:53没有了而10.42.0.1:53还是由dnsmasq所占，原因如上面已经提到过的，\"></a>注：为什么127.0.0.1:53没有了而10.42.0.1:53还是由dnsmasq所占，原因如上面已经提到过的，</h5><p>这两个端口的dnsmasq并不是一个dnsmasq进程，所使用配置文件和发挥的功能也不一样，而我们要修改两个网段最终的DNS服务程序，只需要将127.0.0.1:53这个dnsmasq换掉即可，不需要管10.42.0.1:53这个内网的dnsmasq进程<br>然后修改dnsmasq的配置文件</p>\n<p><code>sudo nano /etc/dnsmasq.conf</code></p>\n<p>在第十行将dnsmasq的监听端口从53挪到9053，这样我们就把系统默认的dnsmasq的端口挪到了9053</p>\n<p>然后重启dnsmasq服务</p>\n<p><code>sudo service dnsmasq restart</code></p>\n<p>现在在使用netstat -nl查看，是不是发现原来127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个53端口都变成9053啦，现在我们已经为pdnsd服务腾出了工作端口，下一步我们可以安装pdnsd了</p>\n<p>注：于此同时，由于我们系统的dns服务器指向还是127.0.0.1,所以此时你的电脑已经上不了忘了，解决方法是修改/etc/resolv.con文件将127.0.0.1换成ISP提供的DNS服务器或者114.114.114.114或者阿里的223.5.5.5等等。</p>\n<h4 id=\"2、安装Pdnsd服务\"><a href=\"#2、安装Pdnsd服务\" class=\"headerlink\" title=\"2、安装Pdnsd服务\"></a>2、安装Pdnsd服务</h4><p><code>sudo apk-get install pdnsd</code></p>\n<p>在安装时会跳出一个选择框，我们选manual<br>（注意如果此时提示你网络问题请到/etc/resolv.conf文件中把dns服务器地址从127.0.1.1改到114.114.114.114）<br>安装完pdnsd服务之后我们需要修改它的配置文件，主要目的是设置两组DNS服务器，第一组是国内的114.114.114.114,第二组是OpenDNS的5353端口，114.114.114.114的53端口即使使用TCP连接解析也会返回一些脏地址，但我们仍然要用他的原因它的ping通率要比OpenDns要高，主要作用是加速一些国内正常DNS的解析，防止访问国内网站时走OpenDNS导致解析变慢。所以下面配置文件中的114.114.114.114也可以换成你当地ISP分给你的DNS服务器，尤其是在114.114.114.114 ping不通的情况下。另外，下面配置文件中的reject列表也非常重要，只有当114.114.114.114返回脏地址在这个列表中时才会触发pdnsd再发送一个请求到OpenDNS，所以务必要将114.114.114.114所有的脏地址都收录到这个列表中。同时，如果你本地ping不通OpenDNS的两个地址时，有两种方式可以解决，第一种是使用Redsocks+代理将tcp协议的DNS查询请求加密发送到国外代理服务器，另一种是使用能ping通的国外其他DNS服务器，尽量避开53端口，也就是说尽量找国外支持53端口以外进行解析的DNS服务器。</p>\n<p><code>sudo nano /etc/pdnsd.conf</code></p>\n<p>将这个文件修改如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// Read the pdnsd.conf(5) manpage for an explanation of the options.  </span><br><span class=\"line\">  </span><br><span class=\"line\">/* Note: this file is overriden by automatic config files when </span><br><span class=\"line\">  /etc/default/pdnsd AUTO_MODE is set and that </span><br><span class=\"line\">  /usr/share/pdnsd/pdnsd-$AUTO_MODE.conf exists </span><br><span class=\"line\">*/  </span><br><span class=\"line\">  </span><br><span class=\"line\">global &#123;  </span><br><span class=\"line\">    perm_cache=4096;  </span><br><span class=\"line\">    cache_dir=&quot;/var/cache/pdnsd&quot;;  </span><br><span class=\"line\">    run_as=&quot;pdnsd&quot;;  </span><br><span class=\"line\">    server_ip = 192.168.1.81;  # 将自己的有线网卡的局域网地址设为工作地址，这样可以方便局域网用户把你的电脑当成DNS服务器,这里要换成你的地址，但是好像0.0.0.0我试过不行  </span><br><span class=\"line\">    server_port=53;            # 使用DNS协议默认的53号地址  </span><br><span class=\"line\">    status_ctl = on;  </span><br><span class=\"line\">    query_method=tcp_only;   #非常重要，使用tcp协议请求DNS结果，防止被污染  </span><br><span class=\"line\">    neg_domain_pol = off;    </span><br><span class=\"line\">    paranoid = on;    </span><br><span class=\"line\">    par_queries = 1;    </span><br><span class=\"line\">    min_ttl = 6h;    </span><br><span class=\"line\">    max_ttl = 12h;    </span><br><span class=\"line\">    timeout = 10;    </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">/* with status_ctl=on and resolvconf installed, this will work out from the box </span><br><span class=\"line\">  this is the recommended setup for mobile machines */  </span><br><span class=\"line\">server &#123;    </span><br><span class=\"line\">   label = &quot;routine&quot;;  # 这个随便写    </span><br><span class=\"line\">   ip = 114.114.114.114;   # 这里为上级 dns 的 ip 地址，如果8.8.8.8能够ping通，可以用8.8.8.8    </span><br><span class=\"line\">   timeout = 5;    </span><br><span class=\"line\">   reject = 74.125.127.102,  #这里非常重要，这些ip是防火墙喜欢将DNS污染到的目标地址，也就是脏地址，你可以使用nslookup命令查询当地的脏地址并补充在这个列表中，如果114.114.114.114返回脏地址后pdnsd会自动重新发送DNS请求到下面的OpenDNS服务器，如果一个脏地址没有在列在这里，那么还是会收到污染的结果  </span><br><span class=\"line\">       74.125.155.102,    </span><br><span class=\"line\">       74.125.39.102,    </span><br><span class=\"line\">       74.125.39.113,    </span><br><span class=\"line\">       209.85.229.138,    </span><br><span class=\"line\">       128.121.126.139,    </span><br><span class=\"line\">       159.106.121.75,    </span><br><span class=\"line\">       169.132.13.103,    </span><br><span class=\"line\">       192.67.198.6,    </span><br><span class=\"line\">       202.106.1.2,    </span><br><span class=\"line\">       202.181.7.85,    </span><br><span class=\"line\">       203.161.230.171,    </span><br><span class=\"line\">       203.98.7.65,    </span><br><span class=\"line\">       207.12.88.98,    </span><br><span class=\"line\">       208.56.31.43,    </span><br><span class=\"line\">       209.145.54.50,    </span><br><span class=\"line\">       209.220.30.174,    </span><br><span class=\"line\">       209.36.73.33,    </span><br><span class=\"line\">       211.94.66.147,    </span><br><span class=\"line\">       213.169.251.35,    </span><br><span class=\"line\">       216.221.188.182,    </span><br><span class=\"line\">       216.234.179.13,    </span><br><span class=\"line\">       243.185.187.39,    </span><br><span class=\"line\">       37.61.54.158,    </span><br><span class=\"line\">       4.36.66.178,    </span><br><span class=\"line\">       46.82.174.68,    </span><br><span class=\"line\">       59.24.3.173,    </span><br><span class=\"line\">       64.33.88.161,    </span><br><span class=\"line\">       64.33.99.47,    </span><br><span class=\"line\">       64.66.163.251,    </span><br><span class=\"line\">       65.104.202.252,    </span><br><span class=\"line\">       65.160.219.113,    </span><br><span class=\"line\">       66.45.252.237,    </span><br><span class=\"line\">       69.55.52.253,    </span><br><span class=\"line\">       72.14.205.104,    </span><br><span class=\"line\">       72.14.205.99,    </span><br><span class=\"line\">       78.16.49.15,    </span><br><span class=\"line\">       8.7.198.45,    </span><br><span class=\"line\">       93.46.8.89,    </span><br><span class=\"line\">       37.61.54.158,    </span><br><span class=\"line\">       243.185.187.39,    </span><br><span class=\"line\">       190.93.247.4,    </span><br><span class=\"line\">       190.93.246.4,    </span><br><span class=\"line\">       190.93.245.4,    </span><br><span class=\"line\">       190.93.244.4,    </span><br><span class=\"line\">       65.49.2.178,    </span><br><span class=\"line\">       189.163.17.5,    </span><br><span class=\"line\">       23.89.5.60,    </span><br><span class=\"line\">       49.2.123.56,    </span><br><span class=\"line\">       54.76.135.1,    </span><br><span class=\"line\">       77.4.7.92,    </span><br><span class=\"line\">       118.5.49.6,    </span><br><span class=\"line\">       159.24.3.173,    </span><br><span class=\"line\">       188.5.4.96,    </span><br><span class=\"line\">       197.4.4.12,    </span><br><span class=\"line\">       220.250.64.24,    </span><br><span class=\"line\">       243.185.187.30,    </span><br><span class=\"line\">       249.129.46.48,    </span><br><span class=\"line\">       253.157.14.165;    </span><br><span class=\"line\">   reject_policy = fail;    </span><br><span class=\"line\">   exclude = &quot;.google.com&quot;,    </span><br><span class=\"line\">       &quot;.cn&quot;,      #排除国内DNS解析，如果正常翻，则可以在前面加#注释    </span><br><span class=\"line\">       &quot;.baidu.com&quot;,   #排除国内DNS解析，如果正常翻，则可以在前面加#注释    </span><br><span class=\"line\">       &quot;.qq.com&quot;,  #排除国内DNS解析，如果正常翻，则可以在前面加#注释    </span><br><span class=\"line\">       &quot;.gstatic.com&quot;,    </span><br><span class=\"line\">       &quot;.googleusercontent.com&quot;,    </span><br><span class=\"line\">       &quot;.googlepages.com&quot;,    </span><br><span class=\"line\">       &quot;.googlevideo.com&quot;,    </span><br><span class=\"line\">       &quot;.googlecode.com&quot;,    </span><br><span class=\"line\">       &quot;.googleapis.com&quot;,    </span><br><span class=\"line\">       &quot;.googlesource.com&quot;,    </span><br><span class=\"line\">       &quot;.googledrive.com&quot;,    </span><br><span class=\"line\">       &quot;.ggpht.com&quot;,    </span><br><span class=\"line\">       &quot;.youtube.com&quot;,    </span><br><span class=\"line\">       &quot;.youtu.be&quot;,    </span><br><span class=\"line\">       &quot;.ytimg.com&quot;,    </span><br><span class=\"line\">       &quot;.twitter.com&quot;,    </span><br><span class=\"line\">       &quot;.facebook.com&quot;,    </span><br><span class=\"line\">       &quot;.fastly.net&quot;,    </span><br><span class=\"line\">       &quot;.akamai.net&quot;,    </span><br><span class=\"line\">       &quot;.akamaiedge.net&quot;,    </span><br><span class=\"line\">       &quot;.akamaihd.net&quot;,    </span><br><span class=\"line\">       &quot;.edgesuite.net&quot;,    </span><br><span class=\"line\">       &quot;.edgekey.net&quot;;    </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">server &#123;    </span><br><span class=\"line\">   # Better setup dns server(DON&apos;T USE PORT 53) on your own vps for faster proxying    </span><br><span class=\"line\">   label = &quot;special&quot;;  # 这个随便写    </span><br><span class=\"line\">   ip = 208.67.222.222,208.67.220.220; # 这里为上级 dns 的 ip 地址    </span><br><span class=\"line\">   port = 5353;    </span><br><span class=\"line\">   proxy_only = on;    </span><br><span class=\"line\">   timeout = 5;    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>保存后重启pdnsd发现并没有像我们想的一样53端口出现监听，因为我们还需要将pdnsd以守护模式运行</p>\n<p><code>sudo nano /etc/default/pdnsd</code></p>\n<p>将START_DAEMON=no改为START_DAEMON=yes</p>\n<p>现在可以重启pdnsd服务了</p>\n<p><code>sudo /etc/init.d/pdnsd restart</code></p>\n<p>重启之后再使用netstat -nl查看端口情况，是不是53端口已经正在使用了，或者使用sudo netstat -apn | grep 53看看是不是由pdnsd服务占用53端口</p>\n<p>最后一步，就是将我们本机的DNS服务器地址指向pdnsd</p>\n<p><code>sudo nano /etc/resolv.conf</code></p>\n<p>将原来的127.0.1.1改成上面配置文件配置的地址，即如果是局域网地址，就填192.168.1.81，视你自己的网络情况而定，如果上面填的是0.0.0.0，那么此处就填127.0.0.1</p>\n<p>然后再使用nslookup <a href=\"http://www.baidu.com\" target=\"_blank\" rel=\"noopener\">www.baidu.com</a><br>和nslookup <a href=\"http://www.facebook.com\" target=\"_blank\" rel=\"noopener\">www.facebook.com</a><br>看一下dns解析结果是否正确<br>如果baidu.com无法解析说明Pdnsd配置有问题，此时要检查53端口是否已被监听<br>如果baidu.com正常而facebook.com无法解析或者返回错误地址，首先我们可以查看并清空一下缓存</p>\n<p><code>sudo pdnsd-ctl dump</code><br><code>sudo pdnsd-ctl empty-cache</code></p>\n<p>如果还是返回污染后的地址，就把这个污染地址加到上面/etc/pdnsd.conf的脏域名列表中，就可以获得正确结果了<br>那么如何判断DNS解析后的域名是否正确呢，方法是nslookup <a href=\"http://www.twittter.com\" target=\"_blank\" rel=\"noopener\">www.twittter.com</a> 和nslookup <a href=\"http://www.youtube.com，真的解析地址会返回多个解析结果，而污染后的结果只有一个\" target=\"_blank\" rel=\"noopener\">www.youtube.com，真的解析地址会返回多个解析结果，而污染后的结果只有一个</a><br>如下图中前两个是错误的解析结果，后两个是正确的解析结果，或者你还可以通过webdnstools.com这个网站去查询正确的解析结果与本地的结果进行比对</p>\n<p><strong>—-局域网设置内网域名—–</strong></p>\n<p>a.最简单办法直接用pdnsd-ctl 插入一条 A 记录,举例：</p>\n<p><code>pdnsd-ctl add a 127.0.0.1 www.linuxbyte.org. 900</code>（900 为TTL 值）</p>\n<p>同样你可以用pdnsd-ctl add 插入其他的mx，ns，cname 记录等<br>b.第一方法适合临时做一些修改，要想真正的劫持一个域名可以在 pdnsd.conf 中加入 rr section。举例：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rr &#123;</span><br><span class=\"line\">name = linuxbyte.org;</span><br><span class=\"line\">ns = localhost;</span><br><span class=\"line\">soa = localhost, root.localhost, 42, 86400, 900, 86400, 86400;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个是劫持了ns 记录，把域名解析交给你指定的dns 服务器来做。<br>​<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rr &#123;</span><br><span class=\"line\">name = *.linuxbyte.org;</span><br><span class=\"line\">cname = www.linuxsky.org;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这里把所有linuxbyte.org 的二级域名都做了cname到了 <a href=\"http://www.linuxsky.org\" target=\"_blank\" rel=\"noopener\">www.linuxsky.org</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rr &#123;</span><br><span class=\"line\">name = www.linuxbyte.org;</span><br><span class=\"line\">a = 192.168.0.123</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>直接插入一条A 记录。</p>\n<p><code>`</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"选择dns软件”pdnsd”\"><a href=\"#选择dns软件”pdnsd”\" class=\"headerlink\" title=\"选择dns软件”pdnsd”\"></a>选择dns软件”pdnsd”</h3><p>用过dnsmasq和bind。都不太符合自己的意思。尤其是bind简直是太笨重了。</p>\n<h4 id=\"pdnsd的优势\"><a href=\"#pdnsd的优势\" class=\"headerlink\" title=\"pdnsd的优势\"></a>pdnsd的优势</h4><p>Ubuntu16.04默认使用dnsmasq作为dns解析服务，换句话说，一个Ubuntu 16.04LTS的电脑本身就是一个开放53端口的DNS服务器，听起来有点像买Ubuntu电脑送DNS服务器的感觉。但事实确实是这样的，因为Ubuntu默认开机启动dnsmasq服务，而且即使你把它stop了，Ubuntu还会定时重启，而且在启动dnsmasq服务的时候，Ubuntu系统会自动修改/etc/resolv.conf这个默认DNS服务指向文件为127.0.0.1，导致你试图修改这个文件改变你的DNS服务器地址后会莫名其妙被改回127.0.0.1。但是我之所以要用Pdnsd替换点dnsmasq的主要目的还是为了防止DNS污染。</p>\n<p>首先Pdnsd有这样几个优势</p>\n<p>1、可以将UDP协议的DNS请求转换为TCP协议进行发送，通过这种方式避免DNS污染</p>\n<p>2、pdnsd可以选择性的拒绝一些常见的被污染的目标地址，直接通过境内的dns服务器即可获得正确结果</p>\n<p>3、pdnsd可以做本地DNS缓存，而且可以自由设置过期时间，对于已缓存的DNS地址，局域网内其他电脑在DNS解析上的耗时可以缩减到1ms以内，大大提升了电脑的上网速度</p>\n<h4 id=\"Ubuntu-16-04LTS系统为例详细讲解安装过程\"><a href=\"#Ubuntu-16-04LTS系统为例详细讲解安装过程\" class=\"headerlink\" title=\"Ubuntu 16.04LTS系统为例详细讲解安装过程\"></a>Ubuntu 16.04LTS系统为例详细讲解安装过程</h4><h5 id=\"1、-第一步：将dnsmasq的监听端口从53端口挪到其他端口\"><a href=\"#1、-第一步：将dnsmasq的监听端口从53端口挪到其他端口\" class=\"headerlink\" title=\"1、  第一步：将dnsmasq的监听端口从53端口挪到其他端口\"></a>1、  第一步：将dnsmasq的监听端口从53端口挪到其他端口</h5><p>首先要科普一下，Ubuntu系统中的dnsmasq并不只有一个实例在运行，而是会开启多个，在我的电脑中因为开启了Ubuntu自带的Wifi分享功能，本机多了一个内网IP地址10.42.0.1，并且作为这个Wifi网络的DNS服务器，所以我现在电脑上运行着三个dnsmasq进程。<br>查看电脑53端口的占用情况，可以用一下命令<br><code>sudo netstat -apn | grep 53</code></p>\n<p>我的计算机有线网卡的内网地址为192.168.1.100，并且分享了一个Wifi网络，在这个Wifi网络中的内网地址是10.42.0.1在Ubuntu默认情况下，所有网卡的53端口（包括ipv6地址）均会被dnsmasq所占，并且不止一个dnsmasq实例正在运行。</p>\n<h5 id=\"注：之所以有127-0-0-1-53而没有192-168-1-100-53或者0-0-0-0-53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10-42-0-1-53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10-42-0-1-所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。\"><a href=\"#注：之所以有127-0-0-1-53而没有192-168-1-100-53或者0-0-0-0-53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10-42-0-1-53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10-42-0-1-所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。\" class=\"headerlink\" title=\"注：之所以有127.0.0.1:53而没有192.168.1.100:53或者0.0.0.0:53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10.42.0.1:53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10.42.0.1,所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。\"></a>注：之所以有127.0.0.1:53而没有192.168.1.100:53或者0.0.0.0:53是Ubuntu默认不向局域网开放自己的53端口，理由当然是为了安全，防止让你真的变成一台局域网DNS服务器，而有10.42.0.1:53的原因是本计算机分享了一个Wifi，在这个Wifi局域网中，这台电脑既当网关也当DNS服务器，该wifi中的所有电脑被DHCP分配到的DNS服务器均为10.42.0.1,所以对于这个内网，dnsmasq是向局域网开放自己的53端口的。</h5><h5 id=\"注：运行在127-0-0-1的-53的dnsmasq进程和运行在10-42-0-1的dnsmasq是两个-不同的进程，使用不同的配置文件\"><a href=\"#注：运行在127-0-0-1的-53的dnsmasq进程和运行在10-42-0-1的dnsmasq是两个-不同的进程，使用不同的配置文件\" class=\"headerlink\" title=\"注：运行在127.0.0.1的:53的dnsmasq进程和运行在10.42.0.1的dnsmasq是两个 不同的进程，使用不同的配置文件\"></a>注：运行在127.0.0.1的:53的dnsmasq进程和运行在10.42.0.1的dnsmasq是两个 不同的进程，使用不同的配置文件</h5><p>在Ubuntu默认情况下，127.0.0.1和0.0.0.0的53端口一般由同一个dnsmasq进程所占，而其他网段比如10.42.0.1由另一个dnsmasq进程控制，由于10.42.0.1是笔记本共享出的wifi，所以这里的dnsmasq除了做dns转发以外，还有一个更重要的作用就是做DHCP服务器动态为连接热点的设备分配IP地址。<br>那么如何观察本机一共有多少dnsmasq进程，这些dnsmasq的配置文件又各是谁呢？可以用如下指令</p>\n<p><code>ps -fC dnsmasq|more</code></p>\n<p>现在我们要用pdnsd替换掉的就是监听在127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个端口的dnsmasq服务，也就是pid为12625的这个dnsmasq，其他的dnsmasq因为并没有挤占端口，而且还要作为DHCP服务使用，所以我们不要停掉他们。那么如何将dnsmasq的监听端口挪走呢，只需要修改dnsmasq的配置文件并重启即可，虽然仅仅stop掉dnsmasq的服务也有用，但是Ubuntu隔一段时间又会自动重启并同时修改/etc/resolv.conf文件，所以最好的方式还是把dnsmasq的端口挪走一劳永逸。<br>首先我们停止dnsmasq的服务</p>\n<p><code>sudo service dnsmasq stop</code></p>\n<p>现在使用netstat -nl观察端口的监听情况是不是发现127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个53端口都已经没有啦，而且并没有影响10.42.0.1:53上做DHCP服务的dnsmasq的运行。</p>\n<h5 id=\"注：为什么127-0-0-1-53没有了而10-42-0-1-53还是由dnsmasq所占，原因如上面已经提到过的，\"><a href=\"#注：为什么127-0-0-1-53没有了而10-42-0-1-53还是由dnsmasq所占，原因如上面已经提到过的，\" class=\"headerlink\" title=\"注：为什么127.0.0.1:53没有了而10.42.0.1:53还是由dnsmasq所占，原因如上面已经提到过的，\"></a>注：为什么127.0.0.1:53没有了而10.42.0.1:53还是由dnsmasq所占，原因如上面已经提到过的，</h5><p>这两个端口的dnsmasq并不是一个dnsmasq进程，所使用配置文件和发挥的功能也不一样，而我们要修改两个网段最终的DNS服务程序，只需要将127.0.0.1:53这个dnsmasq换掉即可，不需要管10.42.0.1:53这个内网的dnsmasq进程<br>然后修改dnsmasq的配置文件</p>\n<p><code>sudo nano /etc/dnsmasq.conf</code></p>\n<p>在第十行将dnsmasq的监听端口从53挪到9053，这样我们就把系统默认的dnsmasq的端口挪到了9053</p>\n<p>然后重启dnsmasq服务</p>\n<p><code>sudo service dnsmasq restart</code></p>\n<p>现在在使用netstat -nl查看，是不是发现原来127.0.0.1:53和192.168.1.81:53和0.0.0.0:53这几个53端口都变成9053啦，现在我们已经为pdnsd服务腾出了工作端口，下一步我们可以安装pdnsd了</p>\n<p>注：于此同时，由于我们系统的dns服务器指向还是127.0.0.1,所以此时你的电脑已经上不了忘了，解决方法是修改/etc/resolv.con文件将127.0.0.1换成ISP提供的DNS服务器或者114.114.114.114或者阿里的223.5.5.5等等。</p>\n<h4 id=\"2、安装Pdnsd服务\"><a href=\"#2、安装Pdnsd服务\" class=\"headerlink\" title=\"2、安装Pdnsd服务\"></a>2、安装Pdnsd服务</h4><p><code>sudo apk-get install pdnsd</code></p>\n<p>在安装时会跳出一个选择框，我们选manual<br>（注意如果此时提示你网络问题请到/etc/resolv.conf文件中把dns服务器地址从127.0.1.1改到114.114.114.114）<br>安装完pdnsd服务之后我们需要修改它的配置文件，主要目的是设置两组DNS服务器，第一组是国内的114.114.114.114,第二组是OpenDNS的5353端口，114.114.114.114的53端口即使使用TCP连接解析也会返回一些脏地址，但我们仍然要用他的原因它的ping通率要比OpenDns要高，主要作用是加速一些国内正常DNS的解析，防止访问国内网站时走OpenDNS导致解析变慢。所以下面配置文件中的114.114.114.114也可以换成你当地ISP分给你的DNS服务器，尤其是在114.114.114.114 ping不通的情况下。另外，下面配置文件中的reject列表也非常重要，只有当114.114.114.114返回脏地址在这个列表中时才会触发pdnsd再发送一个请求到OpenDNS，所以务必要将114.114.114.114所有的脏地址都收录到这个列表中。同时，如果你本地ping不通OpenDNS的两个地址时，有两种方式可以解决，第一种是使用Redsocks+代理将tcp协议的DNS查询请求加密发送到国外代理服务器，另一种是使用能ping通的国外其他DNS服务器，尽量避开53端口，也就是说尽量找国外支持53端口以外进行解析的DNS服务器。</p>\n<p><code>sudo nano /etc/pdnsd.conf</code></p>\n<p>将这个文件修改如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// Read the pdnsd.conf(5) manpage for an explanation of the options.  </span><br><span class=\"line\">  </span><br><span class=\"line\">/* Note: this file is overriden by automatic config files when </span><br><span class=\"line\">  /etc/default/pdnsd AUTO_MODE is set and that </span><br><span class=\"line\">  /usr/share/pdnsd/pdnsd-$AUTO_MODE.conf exists </span><br><span class=\"line\">*/  </span><br><span class=\"line\">  </span><br><span class=\"line\">global &#123;  </span><br><span class=\"line\">    perm_cache=4096;  </span><br><span class=\"line\">    cache_dir=&quot;/var/cache/pdnsd&quot;;  </span><br><span class=\"line\">    run_as=&quot;pdnsd&quot;;  </span><br><span class=\"line\">    server_ip = 192.168.1.81;  # 将自己的有线网卡的局域网地址设为工作地址，这样可以方便局域网用户把你的电脑当成DNS服务器,这里要换成你的地址，但是好像0.0.0.0我试过不行  </span><br><span class=\"line\">    server_port=53;            # 使用DNS协议默认的53号地址  </span><br><span class=\"line\">    status_ctl = on;  </span><br><span class=\"line\">    query_method=tcp_only;   #非常重要，使用tcp协议请求DNS结果，防止被污染  </span><br><span class=\"line\">    neg_domain_pol = off;    </span><br><span class=\"line\">    paranoid = on;    </span><br><span class=\"line\">    par_queries = 1;    </span><br><span class=\"line\">    min_ttl = 6h;    </span><br><span class=\"line\">    max_ttl = 12h;    </span><br><span class=\"line\">    timeout = 10;    </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">/* with status_ctl=on and resolvconf installed, this will work out from the box </span><br><span class=\"line\">  this is the recommended setup for mobile machines */  </span><br><span class=\"line\">server &#123;    </span><br><span class=\"line\">   label = &quot;routine&quot;;  # 这个随便写    </span><br><span class=\"line\">   ip = 114.114.114.114;   # 这里为上级 dns 的 ip 地址，如果8.8.8.8能够ping通，可以用8.8.8.8    </span><br><span class=\"line\">   timeout = 5;    </span><br><span class=\"line\">   reject = 74.125.127.102,  #这里非常重要，这些ip是防火墙喜欢将DNS污染到的目标地址，也就是脏地址，你可以使用nslookup命令查询当地的脏地址并补充在这个列表中，如果114.114.114.114返回脏地址后pdnsd会自动重新发送DNS请求到下面的OpenDNS服务器，如果一个脏地址没有在列在这里，那么还是会收到污染的结果  </span><br><span class=\"line\">       74.125.155.102,    </span><br><span class=\"line\">       74.125.39.102,    </span><br><span class=\"line\">       74.125.39.113,    </span><br><span class=\"line\">       209.85.229.138,    </span><br><span class=\"line\">       128.121.126.139,    </span><br><span class=\"line\">       159.106.121.75,    </span><br><span class=\"line\">       169.132.13.103,    </span><br><span class=\"line\">       192.67.198.6,    </span><br><span class=\"line\">       202.106.1.2,    </span><br><span class=\"line\">       202.181.7.85,    </span><br><span class=\"line\">       203.161.230.171,    </span><br><span class=\"line\">       203.98.7.65,    </span><br><span class=\"line\">       207.12.88.98,    </span><br><span class=\"line\">       208.56.31.43,    </span><br><span class=\"line\">       209.145.54.50,    </span><br><span class=\"line\">       209.220.30.174,    </span><br><span class=\"line\">       209.36.73.33,    </span><br><span class=\"line\">       211.94.66.147,    </span><br><span class=\"line\">       213.169.251.35,    </span><br><span class=\"line\">       216.221.188.182,    </span><br><span class=\"line\">       216.234.179.13,    </span><br><span class=\"line\">       243.185.187.39,    </span><br><span class=\"line\">       37.61.54.158,    </span><br><span class=\"line\">       4.36.66.178,    </span><br><span class=\"line\">       46.82.174.68,    </span><br><span class=\"line\">       59.24.3.173,    </span><br><span class=\"line\">       64.33.88.161,    </span><br><span class=\"line\">       64.33.99.47,    </span><br><span class=\"line\">       64.66.163.251,    </span><br><span class=\"line\">       65.104.202.252,    </span><br><span class=\"line\">       65.160.219.113,    </span><br><span class=\"line\">       66.45.252.237,    </span><br><span class=\"line\">       69.55.52.253,    </span><br><span class=\"line\">       72.14.205.104,    </span><br><span class=\"line\">       72.14.205.99,    </span><br><span class=\"line\">       78.16.49.15,    </span><br><span class=\"line\">       8.7.198.45,    </span><br><span class=\"line\">       93.46.8.89,    </span><br><span class=\"line\">       37.61.54.158,    </span><br><span class=\"line\">       243.185.187.39,    </span><br><span class=\"line\">       190.93.247.4,    </span><br><span class=\"line\">       190.93.246.4,    </span><br><span class=\"line\">       190.93.245.4,    </span><br><span class=\"line\">       190.93.244.4,    </span><br><span class=\"line\">       65.49.2.178,    </span><br><span class=\"line\">       189.163.17.5,    </span><br><span class=\"line\">       23.89.5.60,    </span><br><span class=\"line\">       49.2.123.56,    </span><br><span class=\"line\">       54.76.135.1,    </span><br><span class=\"line\">       77.4.7.92,    </span><br><span class=\"line\">       118.5.49.6,    </span><br><span class=\"line\">       159.24.3.173,    </span><br><span class=\"line\">       188.5.4.96,    </span><br><span class=\"line\">       197.4.4.12,    </span><br><span class=\"line\">       220.250.64.24,    </span><br><span class=\"line\">       243.185.187.30,    </span><br><span class=\"line\">       249.129.46.48,    </span><br><span class=\"line\">       253.157.14.165;    </span><br><span class=\"line\">   reject_policy = fail;    </span><br><span class=\"line\">   exclude = &quot;.google.com&quot;,    </span><br><span class=\"line\">       &quot;.cn&quot;,      #排除国内DNS解析，如果正常翻，则可以在前面加#注释    </span><br><span class=\"line\">       &quot;.baidu.com&quot;,   #排除国内DNS解析，如果正常翻，则可以在前面加#注释    </span><br><span class=\"line\">       &quot;.qq.com&quot;,  #排除国内DNS解析，如果正常翻，则可以在前面加#注释    </span><br><span class=\"line\">       &quot;.gstatic.com&quot;,    </span><br><span class=\"line\">       &quot;.googleusercontent.com&quot;,    </span><br><span class=\"line\">       &quot;.googlepages.com&quot;,    </span><br><span class=\"line\">       &quot;.googlevideo.com&quot;,    </span><br><span class=\"line\">       &quot;.googlecode.com&quot;,    </span><br><span class=\"line\">       &quot;.googleapis.com&quot;,    </span><br><span class=\"line\">       &quot;.googlesource.com&quot;,    </span><br><span class=\"line\">       &quot;.googledrive.com&quot;,    </span><br><span class=\"line\">       &quot;.ggpht.com&quot;,    </span><br><span class=\"line\">       &quot;.youtube.com&quot;,    </span><br><span class=\"line\">       &quot;.youtu.be&quot;,    </span><br><span class=\"line\">       &quot;.ytimg.com&quot;,    </span><br><span class=\"line\">       &quot;.twitter.com&quot;,    </span><br><span class=\"line\">       &quot;.facebook.com&quot;,    </span><br><span class=\"line\">       &quot;.fastly.net&quot;,    </span><br><span class=\"line\">       &quot;.akamai.net&quot;,    </span><br><span class=\"line\">       &quot;.akamaiedge.net&quot;,    </span><br><span class=\"line\">       &quot;.akamaihd.net&quot;,    </span><br><span class=\"line\">       &quot;.edgesuite.net&quot;,    </span><br><span class=\"line\">       &quot;.edgekey.net&quot;;    </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">server &#123;    </span><br><span class=\"line\">   # Better setup dns server(DON&apos;T USE PORT 53) on your own vps for faster proxying    </span><br><span class=\"line\">   label = &quot;special&quot;;  # 这个随便写    </span><br><span class=\"line\">   ip = 208.67.222.222,208.67.220.220; # 这里为上级 dns 的 ip 地址    </span><br><span class=\"line\">   port = 5353;    </span><br><span class=\"line\">   proxy_only = on;    </span><br><span class=\"line\">   timeout = 5;    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>保存后重启pdnsd发现并没有像我们想的一样53端口出现监听，因为我们还需要将pdnsd以守护模式运行</p>\n<p><code>sudo nano /etc/default/pdnsd</code></p>\n<p>将START_DAEMON=no改为START_DAEMON=yes</p>\n<p>现在可以重启pdnsd服务了</p>\n<p><code>sudo /etc/init.d/pdnsd restart</code></p>\n<p>重启之后再使用netstat -nl查看端口情况，是不是53端口已经正在使用了，或者使用sudo netstat -apn | grep 53看看是不是由pdnsd服务占用53端口</p>\n<p>最后一步，就是将我们本机的DNS服务器地址指向pdnsd</p>\n<p><code>sudo nano /etc/resolv.conf</code></p>\n<p>将原来的127.0.1.1改成上面配置文件配置的地址，即如果是局域网地址，就填192.168.1.81，视你自己的网络情况而定，如果上面填的是0.0.0.0，那么此处就填127.0.0.1</p>\n<p>然后再使用nslookup <a href=\"http://www.baidu.com\" target=\"_blank\" rel=\"noopener\">www.baidu.com</a><br>和nslookup <a href=\"http://www.facebook.com\" target=\"_blank\" rel=\"noopener\">www.facebook.com</a><br>看一下dns解析结果是否正确<br>如果baidu.com无法解析说明Pdnsd配置有问题，此时要检查53端口是否已被监听<br>如果baidu.com正常而facebook.com无法解析或者返回错误地址，首先我们可以查看并清空一下缓存</p>\n<p><code>sudo pdnsd-ctl dump</code><br><code>sudo pdnsd-ctl empty-cache</code></p>\n<p>如果还是返回污染后的地址，就把这个污染地址加到上面/etc/pdnsd.conf的脏域名列表中，就可以获得正确结果了<br>那么如何判断DNS解析后的域名是否正确呢，方法是nslookup <a href=\"http://www.twittter.com\" target=\"_blank\" rel=\"noopener\">www.twittter.com</a> 和nslookup <a href=\"http://www.youtube.com，真的解析地址会返回多个解析结果，而污染后的结果只有一个\" target=\"_blank\" rel=\"noopener\">www.youtube.com，真的解析地址会返回多个解析结果，而污染后的结果只有一个</a><br>如下图中前两个是错误的解析结果，后两个是正确的解析结果，或者你还可以通过webdnstools.com这个网站去查询正确的解析结果与本地的结果进行比对</p>\n<p><strong>—-局域网设置内网域名—–</strong></p>\n<p>a.最简单办法直接用pdnsd-ctl 插入一条 A 记录,举例：</p>\n<p><code>pdnsd-ctl add a 127.0.0.1 www.linuxbyte.org. 900</code>（900 为TTL 值）</p>\n<p>同样你可以用pdnsd-ctl add 插入其他的mx，ns，cname 记录等<br>b.第一方法适合临时做一些修改，要想真正的劫持一个域名可以在 pdnsd.conf 中加入 rr section。举例：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rr &#123;</span><br><span class=\"line\">name = linuxbyte.org;</span><br><span class=\"line\">ns = localhost;</span><br><span class=\"line\">soa = localhost, root.localhost, 42, 86400, 900, 86400, 86400;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个是劫持了ns 记录，把域名解析交给你指定的dns 服务器来做。<br>​<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rr &#123;</span><br><span class=\"line\">name = *.linuxbyte.org;</span><br><span class=\"line\">cname = www.linuxsky.org;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这里把所有linuxbyte.org 的二级域名都做了cname到了 <a href=\"http://www.linuxsky.org\" target=\"_blank\" rel=\"noopener\">www.linuxsky.org</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rr &#123;</span><br><span class=\"line\">name = www.linuxbyte.org;</span><br><span class=\"line\">a = 192.168.0.123</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>直接插入一条A 记录。</p>\n<p><code>`</code></p>\n"},{"author":"QwerSe","head":null,"date":"2017-10-28T16:00:00.000Z","title":"利用ngrok远程内网机器","status":"publish","summary":"linux没有windows下有andesk和一些好用的远程桌面工具，只有ngrok这个比较好的工具","_content":"\n\n\n\n\n需要用ngrok把公司内网的服务器穿出来，好22连接管理。\nlinux没有windows下有andesk和一些好用的远程桌面工具，只有ngrok这个比较好的工具\n\n####1，安装好go环境，ngrok是用go编写的。\n\n\n\n1、下载go的软件包\n\n```\nwget http://qwerse.hk.ufileos.com/go1.4.2.linux-amd64.tar.gz\n```\n\n2、解压出来可以随便指定位置\n\n```\ntar -zxvf go1.4.2.linux-386.tar.gzmv go /usr/local/\n```\n\n3、go的命令需要做软连接到/usr/bin\n\n```\nln -s /usr/local/go/bin/* /usr/bin/\n```\n\n#### 2，安装git安装git\n\n1、安装git，我安装的是2.6版本，防止会出现另一个错误，安装git所需要的依赖包\n\n```\nyum -y install zlib-devel openssl-devel perl hg cpio expat-devel gettext-devel curl curl-devel perl-ExtUtils-MakeMaker hg wget gcc gcc-c++\n```\n\n2、下载git\n\n```\n文本模式复制代码\n```\n\n```\nwget https://www.kernel.org/pub/software/scm/git/git-2.6.0.tar.gz\n```\n\n3、解压git\n\n```\ntar zxvf git-2.6.0.tar.gz\n```\n\n4、编译git\n\n```\ncd git-2.6.0./configure --prefix=/usr/local/gitmakemake install\n```\n\n5、创建git的软连接\n\n```\nln -s /usr/local/git/bin/* /usr/bin/\n```\n\n\n\n#### 3,下载及编译ngrok\n\n下载ngrok源码\n\n```\ncd ~/your_download_dir\ngit clone https://github.com/inconshreveable/ngrok.git ngrok\ncd ngrok\n```\n\n生成证书\n\n注意这里有个`NGROK_BASE_DOMAIN`；\n假设最终需要提供的地址为`aevit.your-domain.com`，则`NGROK_BASE_DOMAIN`设置为`your-domain.com`；\n假设最终需要提供的地址为`aevit.ngrok.your-domain.com`，则`NGROK_BASE_DOMAIN`设置为`ngrok.your-domain.com`；\n\n下面以`ngrok.your-domain.com`为例：\n\n```\nopenssl genrsa -out rootCA.key 2048\nopenssl req -x509 -new -nodes -key rootCA.key -subj \"/CN=ngrok.your-domain.com\" -days 5000 -out rootCA.pem\nopenssl genrsa -out device.key 2048\nopenssl req -new -key device.key -subj \"/CN=ngrok.your-domain.com\" -out device.csr\nopenssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days \n```\n\n执行完以上命令，就会在`ngrok`目录下新生成6个文件\n\n```\ndevice.crt\ndevice.csr\ndevice.key\nrootCA.key\nrootCA.pem\nrootCA.srl\n```\n\n`ngrok`通过`bindata`将ngrok源码目录下的`assets`目录（资源文件）打包到可执行文件(`ngrokd`和`ngrok`)中 去，`assets/client/tls` 和 `assets/server/tls` 下分别存放着用于`ngrok`和`ngrokd`的默认证书文件，我们需要将它们**替换**成我们自己生成的：(因此这一步**务必**放在编译可执行文件之前)\n\n```\ncp rootCA.pem assets/client/tls/ngrokroot.crt\ncp device.crt assets/server/tls/snakeoil.crt\ncp device.key assets/server/tls/snakeoil.key\n```\n\n编译linux端版本\n\n```\nmake clean\n\n# 如果是32位系统，这里 GOARCH=386\nGOOS=linux GOARCH=amd64 make release-server release-client\n```\n\n最后成功的话，会在当前目录生成一个`bin`文件夹，里面包含了`ngrokd`和`ngrok`文件；\n其中，`bin/ngrokd`文件是服务端程序；\n`bin/ngrok`文件是客户端程序（注意上面指定了`GOOS`为64位linux的，所以这个文件是不能在`mac`或`win`等其他平台跑的，下面将进行说明如何交叉编译）\n\n\n\n#####服务端启动\n\n```\n/usr/local/ngrok/bin/ngrokd -domain=\"$NGROK_DOMAIN\" -httpAddr=\":80\"\n```\n\n#####客户端使用\n\n在`ngrok`程序的同级目录下，编写配置文件\n\n```\nvim ngrok.cfg\n```\n\n内容如下:\n\n```\nserver_addr: \"ngrok.your-domain.com:4443\"\ntrust_host_root_certs: false\ntunnels:\n  example:\n   subdomain: \"example\" #定义服务器分配域名前缀\n   proto:\n    http: 80 #映射端口，不加ip默认本机\n    https: 80\n  web:\n   subdomain: \"web\" #定义服务器分配域名前缀\n   proto:\n    http: 192.168.1.100:80 #映射端口，可以通过加ip为内网任意一台映射\n    https: 192.168.1.100:80\n \n  ssh:\n   remote_port: 50001 #服务器分配tcp转发端口，如果不填写此项则由服务器分配\n   proto:\n    tcp: 22 #映射本地的22端口\n```\n\n使用ngrok\n```\n./ngrok -config=./ngrok.cfg -subdomain=blog 80  #映射本机的80端口→blog.ngrok.your-domain.com\n./ngrok -config ngrok.cfg start ssh  #开启ssh的隧道\n```\n\n","source":"_posts/blog/linux/鍒╃敤ngrok杩滅▼鍐呯綉鏈哄櫒.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2017-10-29\ntitle:  利用ngrok远程内网机器\ntags: linux\n\ncategory: linux \nstatus: publish\nsummary: linux没有windows下有andesk和一些好用的远程桌面工具，只有ngrok这个比较好的工具\n---\n\n\n\n\n\n需要用ngrok把公司内网的服务器穿出来，好22连接管理。\nlinux没有windows下有andesk和一些好用的远程桌面工具，只有ngrok这个比较好的工具\n\n####1，安装好go环境，ngrok是用go编写的。\n\n\n\n1、下载go的软件包\n\n```\nwget http://qwerse.hk.ufileos.com/go1.4.2.linux-amd64.tar.gz\n```\n\n2、解压出来可以随便指定位置\n\n```\ntar -zxvf go1.4.2.linux-386.tar.gzmv go /usr/local/\n```\n\n3、go的命令需要做软连接到/usr/bin\n\n```\nln -s /usr/local/go/bin/* /usr/bin/\n```\n\n#### 2，安装git安装git\n\n1、安装git，我安装的是2.6版本，防止会出现另一个错误，安装git所需要的依赖包\n\n```\nyum -y install zlib-devel openssl-devel perl hg cpio expat-devel gettext-devel curl curl-devel perl-ExtUtils-MakeMaker hg wget gcc gcc-c++\n```\n\n2、下载git\n\n```\n文本模式复制代码\n```\n\n```\nwget https://www.kernel.org/pub/software/scm/git/git-2.6.0.tar.gz\n```\n\n3、解压git\n\n```\ntar zxvf git-2.6.0.tar.gz\n```\n\n4、编译git\n\n```\ncd git-2.6.0./configure --prefix=/usr/local/gitmakemake install\n```\n\n5、创建git的软连接\n\n```\nln -s /usr/local/git/bin/* /usr/bin/\n```\n\n\n\n#### 3,下载及编译ngrok\n\n下载ngrok源码\n\n```\ncd ~/your_download_dir\ngit clone https://github.com/inconshreveable/ngrok.git ngrok\ncd ngrok\n```\n\n生成证书\n\n注意这里有个`NGROK_BASE_DOMAIN`；\n假设最终需要提供的地址为`aevit.your-domain.com`，则`NGROK_BASE_DOMAIN`设置为`your-domain.com`；\n假设最终需要提供的地址为`aevit.ngrok.your-domain.com`，则`NGROK_BASE_DOMAIN`设置为`ngrok.your-domain.com`；\n\n下面以`ngrok.your-domain.com`为例：\n\n```\nopenssl genrsa -out rootCA.key 2048\nopenssl req -x509 -new -nodes -key rootCA.key -subj \"/CN=ngrok.your-domain.com\" -days 5000 -out rootCA.pem\nopenssl genrsa -out device.key 2048\nopenssl req -new -key device.key -subj \"/CN=ngrok.your-domain.com\" -out device.csr\nopenssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days \n```\n\n执行完以上命令，就会在`ngrok`目录下新生成6个文件\n\n```\ndevice.crt\ndevice.csr\ndevice.key\nrootCA.key\nrootCA.pem\nrootCA.srl\n```\n\n`ngrok`通过`bindata`将ngrok源码目录下的`assets`目录（资源文件）打包到可执行文件(`ngrokd`和`ngrok`)中 去，`assets/client/tls` 和 `assets/server/tls` 下分别存放着用于`ngrok`和`ngrokd`的默认证书文件，我们需要将它们**替换**成我们自己生成的：(因此这一步**务必**放在编译可执行文件之前)\n\n```\ncp rootCA.pem assets/client/tls/ngrokroot.crt\ncp device.crt assets/server/tls/snakeoil.crt\ncp device.key assets/server/tls/snakeoil.key\n```\n\n编译linux端版本\n\n```\nmake clean\n\n# 如果是32位系统，这里 GOARCH=386\nGOOS=linux GOARCH=amd64 make release-server release-client\n```\n\n最后成功的话，会在当前目录生成一个`bin`文件夹，里面包含了`ngrokd`和`ngrok`文件；\n其中，`bin/ngrokd`文件是服务端程序；\n`bin/ngrok`文件是客户端程序（注意上面指定了`GOOS`为64位linux的，所以这个文件是不能在`mac`或`win`等其他平台跑的，下面将进行说明如何交叉编译）\n\n\n\n#####服务端启动\n\n```\n/usr/local/ngrok/bin/ngrokd -domain=\"$NGROK_DOMAIN\" -httpAddr=\":80\"\n```\n\n#####客户端使用\n\n在`ngrok`程序的同级目录下，编写配置文件\n\n```\nvim ngrok.cfg\n```\n\n内容如下:\n\n```\nserver_addr: \"ngrok.your-domain.com:4443\"\ntrust_host_root_certs: false\ntunnels:\n  example:\n   subdomain: \"example\" #定义服务器分配域名前缀\n   proto:\n    http: 80 #映射端口，不加ip默认本机\n    https: 80\n  web:\n   subdomain: \"web\" #定义服务器分配域名前缀\n   proto:\n    http: 192.168.1.100:80 #映射端口，可以通过加ip为内网任意一台映射\n    https: 192.168.1.100:80\n \n  ssh:\n   remote_port: 50001 #服务器分配tcp转发端口，如果不填写此项则由服务器分配\n   proto:\n    tcp: 22 #映射本地的22端口\n```\n\n使用ngrok\n```\n./ngrok -config=./ngrok.cfg -subdomain=blog 80  #映射本机的80端口→blog.ngrok.your-domain.com\n./ngrok -config ngrok.cfg start ssh  #开启ssh的隧道\n```\n\n","slug":"blog/linux/鍒╃敤ngrok杩滅▼鍐呯綉鏈哄櫒","published":1,"updated":"2018-08-01T08:17:34.029Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvfe000ypym6wcqs4frd","content":"<p>需要用ngrok把公司内网的服务器穿出来，好22连接管理。<br>linux没有windows下有andesk和一些好用的远程桌面工具，只有ngrok这个比较好的工具</p>\n<p>####1，安装好go环境，ngrok是用go编写的。</p>\n<p>1、下载go的软件包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://qwerse.hk.ufileos.com/go1.4.2.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure>\n<p>2、解压出来可以随便指定位置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf go1.4.2.linux-386.tar.gzmv go /usr/local/</span><br></pre></td></tr></table></figure>\n<p>3、go的命令需要做软连接到/usr/bin</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /usr/local/go/bin/* /usr/bin/</span><br></pre></td></tr></table></figure>\n<h4 id=\"2，安装git安装git\"><a href=\"#2，安装git安装git\" class=\"headerlink\" title=\"2，安装git安装git\"></a>2，安装git安装git</h4><p>1、安装git，我安装的是2.6版本，防止会出现另一个错误，安装git所需要的依赖包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install zlib-devel openssl-devel perl hg cpio expat-devel gettext-devel curl curl-devel perl-ExtUtils-MakeMaker hg wget gcc gcc-c++</span><br></pre></td></tr></table></figure>\n<p>2、下载git</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">文本模式复制代码</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://www.kernel.org/pub/software/scm/git/git-2.6.0.tar.gz</span><br></pre></td></tr></table></figure>\n<p>3、解压git</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf git-2.6.0.tar.gz</span><br></pre></td></tr></table></figure>\n<p>4、编译git</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd git-2.6.0./configure --prefix=/usr/local/gitmakemake install</span><br></pre></td></tr></table></figure>\n<p>5、创建git的软连接</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /usr/local/git/bin/* /usr/bin/</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-下载及编译ngrok\"><a href=\"#3-下载及编译ngrok\" class=\"headerlink\" title=\"3,下载及编译ngrok\"></a>3,下载及编译ngrok</h4><p>下载ngrok源码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/your_download_dir</span><br><span class=\"line\">git clone https://github.com/inconshreveable/ngrok.git ngrok</span><br><span class=\"line\">cd ngrok</span><br></pre></td></tr></table></figure>\n<p>生成证书</p>\n<p>注意这里有个<code>NGROK_BASE_DOMAIN</code>；<br>假设最终需要提供的地址为<code>aevit.your-domain.com</code>，则<code>NGROK_BASE_DOMAIN</code>设置为<code>your-domain.com</code>；<br>假设最终需要提供的地址为<code>aevit.ngrok.your-domain.com</code>，则<code>NGROK_BASE_DOMAIN</code>设置为<code>ngrok.your-domain.com</code>；</p>\n<p>下面以<code>ngrok.your-domain.com</code>为例：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl genrsa -out rootCA.key 2048</span><br><span class=\"line\">openssl req -x509 -new -nodes -key rootCA.key -subj &quot;/CN=ngrok.your-domain.com&quot; -days 5000 -out rootCA.pem</span><br><span class=\"line\">openssl genrsa -out device.key 2048</span><br><span class=\"line\">openssl req -new -key device.key -subj &quot;/CN=ngrok.your-domain.com&quot; -out device.csr</span><br><span class=\"line\">openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days</span><br></pre></td></tr></table></figure>\n<p>执行完以上命令，就会在<code>ngrok</code>目录下新生成6个文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">device.crt</span><br><span class=\"line\">device.csr</span><br><span class=\"line\">device.key</span><br><span class=\"line\">rootCA.key</span><br><span class=\"line\">rootCA.pem</span><br><span class=\"line\">rootCA.srl</span><br></pre></td></tr></table></figure>\n<p><code>ngrok</code>通过<code>bindata</code>将ngrok源码目录下的<code>assets</code>目录（资源文件）打包到可执行文件(<code>ngrokd</code>和<code>ngrok</code>)中 去，<code>assets/client/tls</code> 和 <code>assets/server/tls</code> 下分别存放着用于<code>ngrok</code>和<code>ngrokd</code>的默认证书文件，我们需要将它们<strong>替换</strong>成我们自己生成的：(因此这一步<strong>务必</strong>放在编译可执行文件之前)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp rootCA.pem assets/client/tls/ngrokroot.crt</span><br><span class=\"line\">cp device.crt assets/server/tls/snakeoil.crt</span><br><span class=\"line\">cp device.key assets/server/tls/snakeoil.key</span><br></pre></td></tr></table></figure>\n<p>编译linux端版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make clean</span><br><span class=\"line\"></span><br><span class=\"line\"># 如果是32位系统，这里 GOARCH=386</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 make release-server release-client</span><br></pre></td></tr></table></figure>\n<p>最后成功的话，会在当前目录生成一个<code>bin</code>文件夹，里面包含了<code>ngrokd</code>和<code>ngrok</code>文件；<br>其中，<code>bin/ngrokd</code>文件是服务端程序；<br><code>bin/ngrok</code>文件是客户端程序（注意上面指定了<code>GOOS</code>为64位linux的，所以这个文件是不能在<code>mac</code>或<code>win</code>等其他平台跑的，下面将进行说明如何交叉编译）</p>\n<p>#####服务端启动</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/ngrok/bin/ngrokd -domain=&quot;$NGROK_DOMAIN&quot; -httpAddr=&quot;:80&quot;</span><br></pre></td></tr></table></figure>\n<p>#####客户端使用</p>\n<p>在<code>ngrok</code>程序的同级目录下，编写配置文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim ngrok.cfg</span><br></pre></td></tr></table></figure>\n<p>内容如下:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server_addr: &quot;ngrok.your-domain.com:4443&quot;</span><br><span class=\"line\">trust_host_root_certs: false</span><br><span class=\"line\">tunnels:</span><br><span class=\"line\">  example:</span><br><span class=\"line\">   subdomain: &quot;example&quot; #定义服务器分配域名前缀</span><br><span class=\"line\">   proto:</span><br><span class=\"line\">    http: 80 #映射端口，不加ip默认本机</span><br><span class=\"line\">    https: 80</span><br><span class=\"line\">  web:</span><br><span class=\"line\">   subdomain: &quot;web&quot; #定义服务器分配域名前缀</span><br><span class=\"line\">   proto:</span><br><span class=\"line\">    http: 192.168.1.100:80 #映射端口，可以通过加ip为内网任意一台映射</span><br><span class=\"line\">    https: 192.168.1.100:80</span><br><span class=\"line\"> </span><br><span class=\"line\">  ssh:</span><br><span class=\"line\">   remote_port: 50001 #服务器分配tcp转发端口，如果不填写此项则由服务器分配</span><br><span class=\"line\">   proto:</span><br><span class=\"line\">    tcp: 22 #映射本地的22端口</span><br></pre></td></tr></table></figure>\n<p>使用ngrok<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./ngrok -config=./ngrok.cfg -subdomain=blog 80  #映射本机的80端口→blog.ngrok.your-domain.com</span><br><span class=\"line\">./ngrok -config ngrok.cfg start ssh  #开启ssh的隧道</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>需要用ngrok把公司内网的服务器穿出来，好22连接管理。<br>linux没有windows下有andesk和一些好用的远程桌面工具，只有ngrok这个比较好的工具</p>\n<p>####1，安装好go环境，ngrok是用go编写的。</p>\n<p>1、下载go的软件包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://qwerse.hk.ufileos.com/go1.4.2.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure>\n<p>2、解压出来可以随便指定位置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf go1.4.2.linux-386.tar.gzmv go /usr/local/</span><br></pre></td></tr></table></figure>\n<p>3、go的命令需要做软连接到/usr/bin</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /usr/local/go/bin/* /usr/bin/</span><br></pre></td></tr></table></figure>\n<h4 id=\"2，安装git安装git\"><a href=\"#2，安装git安装git\" class=\"headerlink\" title=\"2，安装git安装git\"></a>2，安装git安装git</h4><p>1、安装git，我安装的是2.6版本，防止会出现另一个错误，安装git所需要的依赖包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install zlib-devel openssl-devel perl hg cpio expat-devel gettext-devel curl curl-devel perl-ExtUtils-MakeMaker hg wget gcc gcc-c++</span><br></pre></td></tr></table></figure>\n<p>2、下载git</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">文本模式复制代码</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://www.kernel.org/pub/software/scm/git/git-2.6.0.tar.gz</span><br></pre></td></tr></table></figure>\n<p>3、解压git</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf git-2.6.0.tar.gz</span><br></pre></td></tr></table></figure>\n<p>4、编译git</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd git-2.6.0./configure --prefix=/usr/local/gitmakemake install</span><br></pre></td></tr></table></figure>\n<p>5、创建git的软连接</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /usr/local/git/bin/* /usr/bin/</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-下载及编译ngrok\"><a href=\"#3-下载及编译ngrok\" class=\"headerlink\" title=\"3,下载及编译ngrok\"></a>3,下载及编译ngrok</h4><p>下载ngrok源码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/your_download_dir</span><br><span class=\"line\">git clone https://github.com/inconshreveable/ngrok.git ngrok</span><br><span class=\"line\">cd ngrok</span><br></pre></td></tr></table></figure>\n<p>生成证书</p>\n<p>注意这里有个<code>NGROK_BASE_DOMAIN</code>；<br>假设最终需要提供的地址为<code>aevit.your-domain.com</code>，则<code>NGROK_BASE_DOMAIN</code>设置为<code>your-domain.com</code>；<br>假设最终需要提供的地址为<code>aevit.ngrok.your-domain.com</code>，则<code>NGROK_BASE_DOMAIN</code>设置为<code>ngrok.your-domain.com</code>；</p>\n<p>下面以<code>ngrok.your-domain.com</code>为例：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl genrsa -out rootCA.key 2048</span><br><span class=\"line\">openssl req -x509 -new -nodes -key rootCA.key -subj &quot;/CN=ngrok.your-domain.com&quot; -days 5000 -out rootCA.pem</span><br><span class=\"line\">openssl genrsa -out device.key 2048</span><br><span class=\"line\">openssl req -new -key device.key -subj &quot;/CN=ngrok.your-domain.com&quot; -out device.csr</span><br><span class=\"line\">openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days</span><br></pre></td></tr></table></figure>\n<p>执行完以上命令，就会在<code>ngrok</code>目录下新生成6个文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">device.crt</span><br><span class=\"line\">device.csr</span><br><span class=\"line\">device.key</span><br><span class=\"line\">rootCA.key</span><br><span class=\"line\">rootCA.pem</span><br><span class=\"line\">rootCA.srl</span><br></pre></td></tr></table></figure>\n<p><code>ngrok</code>通过<code>bindata</code>将ngrok源码目录下的<code>assets</code>目录（资源文件）打包到可执行文件(<code>ngrokd</code>和<code>ngrok</code>)中 去，<code>assets/client/tls</code> 和 <code>assets/server/tls</code> 下分别存放着用于<code>ngrok</code>和<code>ngrokd</code>的默认证书文件，我们需要将它们<strong>替换</strong>成我们自己生成的：(因此这一步<strong>务必</strong>放在编译可执行文件之前)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp rootCA.pem assets/client/tls/ngrokroot.crt</span><br><span class=\"line\">cp device.crt assets/server/tls/snakeoil.crt</span><br><span class=\"line\">cp device.key assets/server/tls/snakeoil.key</span><br></pre></td></tr></table></figure>\n<p>编译linux端版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make clean</span><br><span class=\"line\"></span><br><span class=\"line\"># 如果是32位系统，这里 GOARCH=386</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 make release-server release-client</span><br></pre></td></tr></table></figure>\n<p>最后成功的话，会在当前目录生成一个<code>bin</code>文件夹，里面包含了<code>ngrokd</code>和<code>ngrok</code>文件；<br>其中，<code>bin/ngrokd</code>文件是服务端程序；<br><code>bin/ngrok</code>文件是客户端程序（注意上面指定了<code>GOOS</code>为64位linux的，所以这个文件是不能在<code>mac</code>或<code>win</code>等其他平台跑的，下面将进行说明如何交叉编译）</p>\n<p>#####服务端启动</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/ngrok/bin/ngrokd -domain=&quot;$NGROK_DOMAIN&quot; -httpAddr=&quot;:80&quot;</span><br></pre></td></tr></table></figure>\n<p>#####客户端使用</p>\n<p>在<code>ngrok</code>程序的同级目录下，编写配置文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim ngrok.cfg</span><br></pre></td></tr></table></figure>\n<p>内容如下:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server_addr: &quot;ngrok.your-domain.com:4443&quot;</span><br><span class=\"line\">trust_host_root_certs: false</span><br><span class=\"line\">tunnels:</span><br><span class=\"line\">  example:</span><br><span class=\"line\">   subdomain: &quot;example&quot; #定义服务器分配域名前缀</span><br><span class=\"line\">   proto:</span><br><span class=\"line\">    http: 80 #映射端口，不加ip默认本机</span><br><span class=\"line\">    https: 80</span><br><span class=\"line\">  web:</span><br><span class=\"line\">   subdomain: &quot;web&quot; #定义服务器分配域名前缀</span><br><span class=\"line\">   proto:</span><br><span class=\"line\">    http: 192.168.1.100:80 #映射端口，可以通过加ip为内网任意一台映射</span><br><span class=\"line\">    https: 192.168.1.100:80</span><br><span class=\"line\"> </span><br><span class=\"line\">  ssh:</span><br><span class=\"line\">   remote_port: 50001 #服务器分配tcp转发端口，如果不填写此项则由服务器分配</span><br><span class=\"line\">   proto:</span><br><span class=\"line\">    tcp: 22 #映射本地的22端口</span><br></pre></td></tr></table></figure>\n<p>使用ngrok<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./ngrok -config=./ngrok.cfg -subdomain=blog 80  #映射本机的80端口→blog.ngrok.your-domain.com</span><br><span class=\"line\">./ngrok -config ngrok.cfg start ssh  #开启ssh的隧道</span><br></pre></td></tr></table></figure></p>\n"},{"author":"QwerSe","head":null,"date":"2016-09-28T16:00:00.000Z","title":"MySql主从备份","status":"publish","summary":"MySQL支持单向、异步复制，复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。MySQL复制基于主服务器在二进制日志中跟踪所有对数据库的更改(更新、删除等等)","_content":"\n### 一.MySQL复制概述\nMySQL支持单向、异步复制，复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。MySQL复制基于主服务器在二进制日志中跟踪所有对数据库的更改(更新、删除等等)。因此，要进行复制，必须在主服务器上启用二进制日志。每个从服务器从主服务器接收主服务器已经记录到其二进制日志的保存的更新。当一个从服务器连接主服务器时，它通知主服务器从服务器在日志中读取的最后一次成功更新的位置。从服务器接收从那时起发生的任何更新，并在本机上执行相同的更新。然后封锁并等待主服务器通知新的更新。从服务器执行备份不会干扰主服务器，在备份过程中主服务器可以继续处理更新。\n \n### 二.复制实现细节\n   MySQL使用3个线程来执行复制功能(其中1个在主服务器上，另两个在从服务器上）。当发出START SLAVE时，从服务器创建一个I/O线程，以连接主服务器并让它发送记录在其二进制日志中的语句。主服务器创建一个线程将二进制日志中的内容发送到从服务器。该线程可以即为主服务器上SHOW PROCESSLIST的输出中的Binlog Dump线程。从服务器I/O线程读取主服务器Binlog Dump线程发送的内容并将该数据拷贝到从服务器数据目录中的本地文件中，即中继日志。第3个线程是SQL线程，由从服务器创建，用于读取中继日志并执行日志中包含的更新。在从服务器上，读取和执行更新语句被分成两个独立的任务。当从服务器启动时，其I/O线程可以很快地从主服务器索取所有二进制日志内容，即使SQL线程执行更新的远远滞后。\n  \n####1.复制线程状态\n通过show slave status/G和show master status可以查看复制线程状态。常见的线程状态有：\n#####（1）主服务器Binlog Dump线程\n·         \n        Has sent all binlog to slave; waiting for binlog to be updated\n线程已经从二进制日志读取所有主要的更新并已经发送到了从服务器。线程现在正空闲，等待由主服务器上新的更新导致的出现在二进制日志中的新事件。\n \n#####（2）从服务器I/O线程状态\n·         Waiting for master to send event\n线程已经连接上主服务器，正等待二进制日志事件到达。如果主服务器正空闲，会持续较长的时间。如果等待持续slave_read_timeout秒，则发生超时。此时，线程认为连接被中断并企图重新连接。\n#####（3）从服务器SQL线程状态\n·         Reading event from the relay log\n线程已经从中继日志读取一个事件，可以对事件进行处理了。\n·         Has read all relay log; waiting for the slave I/O thread to update it\n线程已经处理了中继日志文件中的所有事件，现在正等待I/O线程将新事件写入中继日志。\n \n#### 2.复制过程中使用的传递和状态文件\n默认情况，中继日志使用host_name-relay-bin.nnnnnn形式的文件名，其中host_name是从服务器主机名，nnnnnn是序列号。中继日志与二进制日志的格式相同，并且可以用mysqlbinlog读取。\n从服务器在data目录中另外创建两个小文件。这些状态文件默认名为主master.info和relay-log.info。状态文件保存在硬盘上，从服务器关闭时不会丢失。下次从服务器启动时，读取这些文件以确定它已经从主服务器读取了多少二进制日志，以及处理自己的中继日志的程度。\n \n如果要备份从服务器的数据，还应备份这两个小文件以及中继日志文件。它们用来在恢复从服务器的数据后继续进行复制。如果丢失了中继日志但仍然有relay-log.info文件，可以通过检查该文件来确定SQL线程已经执行的主服务器中二进制日志的程度。然后可以用Master_Log_File和Master_LOG_POS选项执行CHANGE MASTER TO来告诉从服务器重新从该点读取二进制日志。\n### 三.mysql建立主从服务器配置方法\n####1.确保主从服务器的版本兼容。从服务器至少与主服务器版本相同或更高。\n#### 2.确保主服务器上my.cnf文件的[mysqld]部分包括一个log-bin选项。该部分还应有一个server-id=Master_id选项，其中master_id必须为1到232–1之间的一个正整数值。如：\n\n\t[mysqld]\n\tlog-bin=mysql-bin\n\tserver-id=1\n####3.启动主服务器\n注意：主服务器需要指定对哪些数据库记录二进制日志，这通过在启动主服务器时，加上\n--binlog-do-db= db_name选项来实现。如果要记录多个数据库，要分别为每个数据库指定该选项。目前主服务器上的启动脚本请使用/data/mysql/bin/startmysql。另外，主机开机后自动启动mysqld的脚本也已经修改。\n#### 4.在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON SLAVE权限。\n\n\tmysql> GRANT REPLICATION SLAVE ON *.*\n    -> TO '帐号'@'从服务器IP' IDENTIFIED BY '密码';\n#### 5.备份数据库。\n\n\tshell> mysqldump --master-data  --opt database_name > backup-file.sql\n#### 6.查看主服务器的状态\n\n\tmysql> show master status/G;\n记录File 和 Position 项的值\n注：由于没有锁定主服务器，这里记录的主服务器二进制日志position值可能会大于做mysqldump时的值，这将导致从服务器丢失在此期间的更新。如果可以保证在此期间主服务器不会出现创建新表的更新，那么丢失的影响不大；否则，将导致从服务器复制线程失败，这时必须在做mysqldump时锁定主服务器。\n#### 7.在从服务器的my.cnf文件中添加下面的行：\n        \n\t\t[mysqld]\n        server-id=slave_id\nslave_id值必须为2到232–1之间的一个正整数值。ID值唯一的标识了复制群集中的主从服务器，因此它们必须各不相同。\n#### 8.使用--skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。\n\n\tshell> mysqladmin create target_db_name\n\tshell> mysql target_db_name < backup-file.sql\n####9.在从服务器上执行下面的语句，以系统的实际值替换选项值：\n        mysql> CHANGE MASTER TO\n            ->     MASTER_HOST='master_host_name',\n            ->     MASTER_USER='replication_user_name',\n            ->     MASTER_PASSWORD='replication_password',\n            ->     MASTER_LOG_FILE='recorded_log_file_name',\n            ->     MASTER_LOG_POS=recorded_log_position;\n其中recorded_log_file_name和recorded_log_position分别为步骤6所记录的File和Position值。\n#### 10.启动从服务器线程\n\n    mysql> START SLAVE；\n#### 11.执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的.err文件获取信息。\n \n### 四.主从复制如何提高可靠性\n目前采用的主从单向复制，从服务器只是实时的保存了主服务器的一个副本。当主服务器发生故障时，可以切换到从服务器继续做查询，但不能更新。\n如果采用双向复制，即两台mysql服务器即作为主服务器，又作为从服务器。那么两者都可以执行更新操作并能实现负载均衡，当一方出现故障时，另一方不受影响。但是，除非能保证任何更新操作顺序都是安全的，否则双向复制会导致失败。\n为了更好的提高可靠性和可用性，需要当主服务器不可用时，能够在从服务器上更新，当主服务器恢复后，能够将从服务器上的更新同步到主服务器上。目前设想的方法是当主服务器不可用时，令从服务器成为Master。原来的主服务器重新启动后，设定为Slave，并从新的Master上同步更新。待同步一致后，再重新各自切换为原来的角色。具体的操作方法有待实验验证。\n \nPS:主服务器产生的二进制日志会占据大量的磁盘空间，应定期删除过期的bin-log.目前通过crontab每天运行/data/mysql/data/log_auto_del.sh来删除3天前的二进制日志文件。\n博客来自：http://blog.csdn.net/libraworm/article/details/1703365","source":"_posts/blog/mysql/Mysql涓讳粠鍚屾.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2016-09-29\ntitle:  MySql主从备份\ntags: linux\n\ncategory: mysql\nstatus: publish\nsummary: MySQL支持单向、异步复制，复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。MySQL复制基于主服务器在二进制日志中跟踪所有对数据库的更改(更新、删除等等)\n---\n\n### 一.MySQL复制概述\nMySQL支持单向、异步复制，复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。MySQL复制基于主服务器在二进制日志中跟踪所有对数据库的更改(更新、删除等等)。因此，要进行复制，必须在主服务器上启用二进制日志。每个从服务器从主服务器接收主服务器已经记录到其二进制日志的保存的更新。当一个从服务器连接主服务器时，它通知主服务器从服务器在日志中读取的最后一次成功更新的位置。从服务器接收从那时起发生的任何更新，并在本机上执行相同的更新。然后封锁并等待主服务器通知新的更新。从服务器执行备份不会干扰主服务器，在备份过程中主服务器可以继续处理更新。\n \n### 二.复制实现细节\n   MySQL使用3个线程来执行复制功能(其中1个在主服务器上，另两个在从服务器上）。当发出START SLAVE时，从服务器创建一个I/O线程，以连接主服务器并让它发送记录在其二进制日志中的语句。主服务器创建一个线程将二进制日志中的内容发送到从服务器。该线程可以即为主服务器上SHOW PROCESSLIST的输出中的Binlog Dump线程。从服务器I/O线程读取主服务器Binlog Dump线程发送的内容并将该数据拷贝到从服务器数据目录中的本地文件中，即中继日志。第3个线程是SQL线程，由从服务器创建，用于读取中继日志并执行日志中包含的更新。在从服务器上，读取和执行更新语句被分成两个独立的任务。当从服务器启动时，其I/O线程可以很快地从主服务器索取所有二进制日志内容，即使SQL线程执行更新的远远滞后。\n  \n####1.复制线程状态\n通过show slave status/G和show master status可以查看复制线程状态。常见的线程状态有：\n#####（1）主服务器Binlog Dump线程\n·         \n        Has sent all binlog to slave; waiting for binlog to be updated\n线程已经从二进制日志读取所有主要的更新并已经发送到了从服务器。线程现在正空闲，等待由主服务器上新的更新导致的出现在二进制日志中的新事件。\n \n#####（2）从服务器I/O线程状态\n·         Waiting for master to send event\n线程已经连接上主服务器，正等待二进制日志事件到达。如果主服务器正空闲，会持续较长的时间。如果等待持续slave_read_timeout秒，则发生超时。此时，线程认为连接被中断并企图重新连接。\n#####（3）从服务器SQL线程状态\n·         Reading event from the relay log\n线程已经从中继日志读取一个事件，可以对事件进行处理了。\n·         Has read all relay log; waiting for the slave I/O thread to update it\n线程已经处理了中继日志文件中的所有事件，现在正等待I/O线程将新事件写入中继日志。\n \n#### 2.复制过程中使用的传递和状态文件\n默认情况，中继日志使用host_name-relay-bin.nnnnnn形式的文件名，其中host_name是从服务器主机名，nnnnnn是序列号。中继日志与二进制日志的格式相同，并且可以用mysqlbinlog读取。\n从服务器在data目录中另外创建两个小文件。这些状态文件默认名为主master.info和relay-log.info。状态文件保存在硬盘上，从服务器关闭时不会丢失。下次从服务器启动时，读取这些文件以确定它已经从主服务器读取了多少二进制日志，以及处理自己的中继日志的程度。\n \n如果要备份从服务器的数据，还应备份这两个小文件以及中继日志文件。它们用来在恢复从服务器的数据后继续进行复制。如果丢失了中继日志但仍然有relay-log.info文件，可以通过检查该文件来确定SQL线程已经执行的主服务器中二进制日志的程度。然后可以用Master_Log_File和Master_LOG_POS选项执行CHANGE MASTER TO来告诉从服务器重新从该点读取二进制日志。\n### 三.mysql建立主从服务器配置方法\n####1.确保主从服务器的版本兼容。从服务器至少与主服务器版本相同或更高。\n#### 2.确保主服务器上my.cnf文件的[mysqld]部分包括一个log-bin选项。该部分还应有一个server-id=Master_id选项，其中master_id必须为1到232–1之间的一个正整数值。如：\n\n\t[mysqld]\n\tlog-bin=mysql-bin\n\tserver-id=1\n####3.启动主服务器\n注意：主服务器需要指定对哪些数据库记录二进制日志，这通过在启动主服务器时，加上\n--binlog-do-db= db_name选项来实现。如果要记录多个数据库，要分别为每个数据库指定该选项。目前主服务器上的启动脚本请使用/data/mysql/bin/startmysql。另外，主机开机后自动启动mysqld的脚本也已经修改。\n#### 4.在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON SLAVE权限。\n\n\tmysql> GRANT REPLICATION SLAVE ON *.*\n    -> TO '帐号'@'从服务器IP' IDENTIFIED BY '密码';\n#### 5.备份数据库。\n\n\tshell> mysqldump --master-data  --opt database_name > backup-file.sql\n#### 6.查看主服务器的状态\n\n\tmysql> show master status/G;\n记录File 和 Position 项的值\n注：由于没有锁定主服务器，这里记录的主服务器二进制日志position值可能会大于做mysqldump时的值，这将导致从服务器丢失在此期间的更新。如果可以保证在此期间主服务器不会出现创建新表的更新，那么丢失的影响不大；否则，将导致从服务器复制线程失败，这时必须在做mysqldump时锁定主服务器。\n#### 7.在从服务器的my.cnf文件中添加下面的行：\n        \n\t\t[mysqld]\n        server-id=slave_id\nslave_id值必须为2到232–1之间的一个正整数值。ID值唯一的标识了复制群集中的主从服务器，因此它们必须各不相同。\n#### 8.使用--skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。\n\n\tshell> mysqladmin create target_db_name\n\tshell> mysql target_db_name < backup-file.sql\n####9.在从服务器上执行下面的语句，以系统的实际值替换选项值：\n        mysql> CHANGE MASTER TO\n            ->     MASTER_HOST='master_host_name',\n            ->     MASTER_USER='replication_user_name',\n            ->     MASTER_PASSWORD='replication_password',\n            ->     MASTER_LOG_FILE='recorded_log_file_name',\n            ->     MASTER_LOG_POS=recorded_log_position;\n其中recorded_log_file_name和recorded_log_position分别为步骤6所记录的File和Position值。\n#### 10.启动从服务器线程\n\n    mysql> START SLAVE；\n#### 11.执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的.err文件获取信息。\n \n### 四.主从复制如何提高可靠性\n目前采用的主从单向复制，从服务器只是实时的保存了主服务器的一个副本。当主服务器发生故障时，可以切换到从服务器继续做查询，但不能更新。\n如果采用双向复制，即两台mysql服务器即作为主服务器，又作为从服务器。那么两者都可以执行更新操作并能实现负载均衡，当一方出现故障时，另一方不受影响。但是，除非能保证任何更新操作顺序都是安全的，否则双向复制会导致失败。\n为了更好的提高可靠性和可用性，需要当主服务器不可用时，能够在从服务器上更新，当主服务器恢复后，能够将从服务器上的更新同步到主服务器上。目前设想的方法是当主服务器不可用时，令从服务器成为Master。原来的主服务器重新启动后，设定为Slave，并从新的Master上同步更新。待同步一致后，再重新各自切换为原来的角色。具体的操作方法有待实验验证。\n \nPS:主服务器产生的二进制日志会占据大量的磁盘空间，应定期删除过期的bin-log.目前通过crontab每天运行/data/mysql/data/log_auto_del.sh来删除3天前的二进制日志文件。\n博客来自：http://blog.csdn.net/libraworm/article/details/1703365","slug":"blog/mysql/Mysql涓讳粠鍚屾","published":1,"updated":"2018-08-01T08:24:32.065Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvfi0012pym6anccqm4f","content":"<h3 id=\"一-MySQL复制概述\"><a href=\"#一-MySQL复制概述\" class=\"headerlink\" title=\"一.MySQL复制概述\"></a>一.MySQL复制概述</h3><p>MySQL支持单向、异步复制，复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。MySQL复制基于主服务器在二进制日志中跟踪所有对数据库的更改(更新、删除等等)。因此，要进行复制，必须在主服务器上启用二进制日志。每个从服务器从主服务器接收主服务器已经记录到其二进制日志的保存的更新。当一个从服务器连接主服务器时，它通知主服务器从服务器在日志中读取的最后一次成功更新的位置。从服务器接收从那时起发生的任何更新，并在本机上执行相同的更新。然后封锁并等待主服务器通知新的更新。从服务器执行备份不会干扰主服务器，在备份过程中主服务器可以继续处理更新。</p>\n<h3 id=\"二-复制实现细节\"><a href=\"#二-复制实现细节\" class=\"headerlink\" title=\"二.复制实现细节\"></a>二.复制实现细节</h3><p>   MySQL使用3个线程来执行复制功能(其中1个在主服务器上，另两个在从服务器上）。当发出START SLAVE时，从服务器创建一个I/O线程，以连接主服务器并让它发送记录在其二进制日志中的语句。主服务器创建一个线程将二进制日志中的内容发送到从服务器。该线程可以即为主服务器上SHOW PROCESSLIST的输出中的Binlog Dump线程。从服务器I/O线程读取主服务器Binlog Dump线程发送的内容并将该数据拷贝到从服务器数据目录中的本地文件中，即中继日志。第3个线程是SQL线程，由从服务器创建，用于读取中继日志并执行日志中包含的更新。在从服务器上，读取和执行更新语句被分成两个独立的任务。当从服务器启动时，其I/O线程可以很快地从主服务器索取所有二进制日志内容，即使SQL线程执行更新的远远滞后。</p>\n<p>####1.复制线程状态<br>通过show slave status/G和show master status可以查看复制线程状态。常见的线程状态有：</p>\n<p>#####（1）主服务器Binlog Dump线程<br>·<br>        Has sent all binlog to slave; waiting for binlog to be updated<br>线程已经从二进制日志读取所有主要的更新并已经发送到了从服务器。线程现在正空闲，等待由主服务器上新的更新导致的出现在二进制日志中的新事件。</p>\n<p>#####（2）从服务器I/O线程状态<br>·         Waiting for master to send event<br>线程已经连接上主服务器，正等待二进制日志事件到达。如果主服务器正空闲，会持续较长的时间。如果等待持续slave_read_timeout秒，则发生超时。此时，线程认为连接被中断并企图重新连接。</p>\n<p>#####（3）从服务器SQL线程状态<br>·         Reading event from the relay log<br>线程已经从中继日志读取一个事件，可以对事件进行处理了。<br>·         Has read all relay log; waiting for the slave I/O thread to update it<br>线程已经处理了中继日志文件中的所有事件，现在正等待I/O线程将新事件写入中继日志。</p>\n<h4 id=\"2-复制过程中使用的传递和状态文件\"><a href=\"#2-复制过程中使用的传递和状态文件\" class=\"headerlink\" title=\"2.复制过程中使用的传递和状态文件\"></a>2.复制过程中使用的传递和状态文件</h4><p>默认情况，中继日志使用host_name-relay-bin.nnnnnn形式的文件名，其中host_name是从服务器主机名，nnnnnn是序列号。中继日志与二进制日志的格式相同，并且可以用mysqlbinlog读取。<br>从服务器在data目录中另外创建两个小文件。这些状态文件默认名为主master.info和relay-log.info。状态文件保存在硬盘上，从服务器关闭时不会丢失。下次从服务器启动时，读取这些文件以确定它已经从主服务器读取了多少二进制日志，以及处理自己的中继日志的程度。</p>\n<p>如果要备份从服务器的数据，还应备份这两个小文件以及中继日志文件。它们用来在恢复从服务器的数据后继续进行复制。如果丢失了中继日志但仍然有relay-log.info文件，可以通过检查该文件来确定SQL线程已经执行的主服务器中二进制日志的程度。然后可以用Master_Log_File和Master_LOG_POS选项执行CHANGE MASTER TO来告诉从服务器重新从该点读取二进制日志。</p>\n<h3 id=\"三-mysql建立主从服务器配置方法\"><a href=\"#三-mysql建立主从服务器配置方法\" class=\"headerlink\" title=\"三.mysql建立主从服务器配置方法\"></a>三.mysql建立主从服务器配置方法</h3><p>####1.确保主从服务器的版本兼容。从服务器至少与主服务器版本相同或更高。</p>\n<h4 id=\"2-确保主服务器上my-cnf文件的-mysqld-部分包括一个log-bin选项。该部分还应有一个server-id-Master-id选项，其中master-id必须为1到232–1之间的一个正整数值。如：\"><a href=\"#2-确保主服务器上my-cnf文件的-mysqld-部分包括一个log-bin选项。该部分还应有一个server-id-Master-id选项，其中master-id必须为1到232–1之间的一个正整数值。如：\" class=\"headerlink\" title=\"2.确保主服务器上my.cnf文件的[mysqld]部分包括一个log-bin选项。该部分还应有一个server-id=Master_id选项，其中master_id必须为1到232–1之间的一个正整数值。如：\"></a>2.确保主服务器上my.cnf文件的[mysqld]部分包括一个log-bin选项。该部分还应有一个server-id=Master_id选项，其中master_id必须为1到232–1之间的一个正整数值。如：</h4><pre><code>[mysqld]\nlog-bin=mysql-bin\nserver-id=1\n</code></pre><p>####3.启动主服务器<br>注意：主服务器需要指定对哪些数据库记录二进制日志，这通过在启动主服务器时，加上<br>–binlog-do-db= db_name选项来实现。如果要记录多个数据库，要分别为每个数据库指定该选项。目前主服务器上的启动脚本请使用/data/mysql/bin/startmysql。另外，主机开机后自动启动mysqld的脚本也已经修改。</p>\n<h4 id=\"4-在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON-SLAVE权限。\"><a href=\"#4-在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON-SLAVE权限。\" class=\"headerlink\" title=\"4.在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON SLAVE权限。\"></a>4.在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON SLAVE权限。</h4><pre><code>mysql&gt; GRANT REPLICATION SLAVE ON *.*\n-&gt; TO &apos;帐号&apos;@&apos;从服务器IP&apos; IDENTIFIED BY &apos;密码&apos;;\n</code></pre><h4 id=\"5-备份数据库。\"><a href=\"#5-备份数据库。\" class=\"headerlink\" title=\"5.备份数据库。\"></a>5.备份数据库。</h4><pre><code>shell&gt; mysqldump --master-data  --opt database_name &gt; backup-file.sql\n</code></pre><h4 id=\"6-查看主服务器的状态\"><a href=\"#6-查看主服务器的状态\" class=\"headerlink\" title=\"6.查看主服务器的状态\"></a>6.查看主服务器的状态</h4><pre><code>mysql&gt; show master status/G;\n</code></pre><p>记录File 和 Position 项的值<br>注：由于没有锁定主服务器，这里记录的主服务器二进制日志position值可能会大于做mysqldump时的值，这将导致从服务器丢失在此期间的更新。如果可以保证在此期间主服务器不会出现创建新表的更新，那么丢失的影响不大；否则，将导致从服务器复制线程失败，这时必须在做mysqldump时锁定主服务器。</p>\n<h4 id=\"7-在从服务器的my-cnf文件中添加下面的行：\"><a href=\"#7-在从服务器的my-cnf文件中添加下面的行：\" class=\"headerlink\" title=\"7.在从服务器的my.cnf文件中添加下面的行：\"></a>7.在从服务器的my.cnf文件中添加下面的行：</h4><pre><code>[mysqld]\nserver-id=slave_id\n</code></pre><p>slave_id值必须为2到232–1之间的一个正整数值。ID值唯一的标识了复制群集中的主从服务器，因此它们必须各不相同。</p>\n<h4 id=\"8-使用–skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。\"><a href=\"#8-使用–skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。\" class=\"headerlink\" title=\"8.使用–skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。\"></a>8.使用–skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。</h4><pre><code>shell&gt; mysqladmin create target_db_name\nshell&gt; mysql target_db_name &lt; backup-file.sql\n</code></pre><p>####9.在从服务器上执行下面的语句，以系统的实际值替换选项值：<br>        mysql&gt; CHANGE MASTER TO<br>            -&gt;     MASTER_HOST=’master_host_name’,<br>            -&gt;     MASTER_USER=’replication_user_name’,<br>            -&gt;     MASTER_PASSWORD=’replication_password’,<br>            -&gt;     MASTER_LOG_FILE=’recorded_log_file_name’,<br>            -&gt;     MASTER_LOG_POS=recorded_log_position;<br>其中recorded_log_file_name和recorded_log_position分别为步骤6所记录的File和Position值。</p>\n<h4 id=\"10-启动从服务器线程\"><a href=\"#10-启动从服务器线程\" class=\"headerlink\" title=\"10.启动从服务器线程\"></a>10.启动从服务器线程</h4><pre><code>mysql&gt; START SLAVE；\n</code></pre><h4 id=\"11-执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的-err文件获取信息。\"><a href=\"#11-执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的-err文件获取信息。\" class=\"headerlink\" title=\"11.执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的.err文件获取信息。\"></a>11.执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的.err文件获取信息。</h4><h3 id=\"四-主从复制如何提高可靠性\"><a href=\"#四-主从复制如何提高可靠性\" class=\"headerlink\" title=\"四.主从复制如何提高可靠性\"></a>四.主从复制如何提高可靠性</h3><p>目前采用的主从单向复制，从服务器只是实时的保存了主服务器的一个副本。当主服务器发生故障时，可以切换到从服务器继续做查询，但不能更新。<br>如果采用双向复制，即两台mysql服务器即作为主服务器，又作为从服务器。那么两者都可以执行更新操作并能实现负载均衡，当一方出现故障时，另一方不受影响。但是，除非能保证任何更新操作顺序都是安全的，否则双向复制会导致失败。<br>为了更好的提高可靠性和可用性，需要当主服务器不可用时，能够在从服务器上更新，当主服务器恢复后，能够将从服务器上的更新同步到主服务器上。目前设想的方法是当主服务器不可用时，令从服务器成为Master。原来的主服务器重新启动后，设定为Slave，并从新的Master上同步更新。待同步一致后，再重新各自切换为原来的角色。具体的操作方法有待实验验证。</p>\n<p>PS:主服务器产生的二进制日志会占据大量的磁盘空间，应定期删除过期的bin-log.目前通过crontab每天运行/data/mysql/data/log_auto_del.sh来删除3天前的二进制日志文件。<br>博客来自：<a href=\"http://blog.csdn.net/libraworm/article/details/1703365\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/libraworm/article/details/1703365</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"一-MySQL复制概述\"><a href=\"#一-MySQL复制概述\" class=\"headerlink\" title=\"一.MySQL复制概述\"></a>一.MySQL复制概述</h3><p>MySQL支持单向、异步复制，复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。MySQL复制基于主服务器在二进制日志中跟踪所有对数据库的更改(更新、删除等等)。因此，要进行复制，必须在主服务器上启用二进制日志。每个从服务器从主服务器接收主服务器已经记录到其二进制日志的保存的更新。当一个从服务器连接主服务器时，它通知主服务器从服务器在日志中读取的最后一次成功更新的位置。从服务器接收从那时起发生的任何更新，并在本机上执行相同的更新。然后封锁并等待主服务器通知新的更新。从服务器执行备份不会干扰主服务器，在备份过程中主服务器可以继续处理更新。</p>\n<h3 id=\"二-复制实现细节\"><a href=\"#二-复制实现细节\" class=\"headerlink\" title=\"二.复制实现细节\"></a>二.复制实现细节</h3><p>   MySQL使用3个线程来执行复制功能(其中1个在主服务器上，另两个在从服务器上）。当发出START SLAVE时，从服务器创建一个I/O线程，以连接主服务器并让它发送记录在其二进制日志中的语句。主服务器创建一个线程将二进制日志中的内容发送到从服务器。该线程可以即为主服务器上SHOW PROCESSLIST的输出中的Binlog Dump线程。从服务器I/O线程读取主服务器Binlog Dump线程发送的内容并将该数据拷贝到从服务器数据目录中的本地文件中，即中继日志。第3个线程是SQL线程，由从服务器创建，用于读取中继日志并执行日志中包含的更新。在从服务器上，读取和执行更新语句被分成两个独立的任务。当从服务器启动时，其I/O线程可以很快地从主服务器索取所有二进制日志内容，即使SQL线程执行更新的远远滞后。</p>\n<p>####1.复制线程状态<br>通过show slave status/G和show master status可以查看复制线程状态。常见的线程状态有：</p>\n<p>#####（1）主服务器Binlog Dump线程<br>·<br>        Has sent all binlog to slave; waiting for binlog to be updated<br>线程已经从二进制日志读取所有主要的更新并已经发送到了从服务器。线程现在正空闲，等待由主服务器上新的更新导致的出现在二进制日志中的新事件。</p>\n<p>#####（2）从服务器I/O线程状态<br>·         Waiting for master to send event<br>线程已经连接上主服务器，正等待二进制日志事件到达。如果主服务器正空闲，会持续较长的时间。如果等待持续slave_read_timeout秒，则发生超时。此时，线程认为连接被中断并企图重新连接。</p>\n<p>#####（3）从服务器SQL线程状态<br>·         Reading event from the relay log<br>线程已经从中继日志读取一个事件，可以对事件进行处理了。<br>·         Has read all relay log; waiting for the slave I/O thread to update it<br>线程已经处理了中继日志文件中的所有事件，现在正等待I/O线程将新事件写入中继日志。</p>\n<h4 id=\"2-复制过程中使用的传递和状态文件\"><a href=\"#2-复制过程中使用的传递和状态文件\" class=\"headerlink\" title=\"2.复制过程中使用的传递和状态文件\"></a>2.复制过程中使用的传递和状态文件</h4><p>默认情况，中继日志使用host_name-relay-bin.nnnnnn形式的文件名，其中host_name是从服务器主机名，nnnnnn是序列号。中继日志与二进制日志的格式相同，并且可以用mysqlbinlog读取。<br>从服务器在data目录中另外创建两个小文件。这些状态文件默认名为主master.info和relay-log.info。状态文件保存在硬盘上，从服务器关闭时不会丢失。下次从服务器启动时，读取这些文件以确定它已经从主服务器读取了多少二进制日志，以及处理自己的中继日志的程度。</p>\n<p>如果要备份从服务器的数据，还应备份这两个小文件以及中继日志文件。它们用来在恢复从服务器的数据后继续进行复制。如果丢失了中继日志但仍然有relay-log.info文件，可以通过检查该文件来确定SQL线程已经执行的主服务器中二进制日志的程度。然后可以用Master_Log_File和Master_LOG_POS选项执行CHANGE MASTER TO来告诉从服务器重新从该点读取二进制日志。</p>\n<h3 id=\"三-mysql建立主从服务器配置方法\"><a href=\"#三-mysql建立主从服务器配置方法\" class=\"headerlink\" title=\"三.mysql建立主从服务器配置方法\"></a>三.mysql建立主从服务器配置方法</h3><p>####1.确保主从服务器的版本兼容。从服务器至少与主服务器版本相同或更高。</p>\n<h4 id=\"2-确保主服务器上my-cnf文件的-mysqld-部分包括一个log-bin选项。该部分还应有一个server-id-Master-id选项，其中master-id必须为1到232–1之间的一个正整数值。如：\"><a href=\"#2-确保主服务器上my-cnf文件的-mysqld-部分包括一个log-bin选项。该部分还应有一个server-id-Master-id选项，其中master-id必须为1到232–1之间的一个正整数值。如：\" class=\"headerlink\" title=\"2.确保主服务器上my.cnf文件的[mysqld]部分包括一个log-bin选项。该部分还应有一个server-id=Master_id选项，其中master_id必须为1到232–1之间的一个正整数值。如：\"></a>2.确保主服务器上my.cnf文件的[mysqld]部分包括一个log-bin选项。该部分还应有一个server-id=Master_id选项，其中master_id必须为1到232–1之间的一个正整数值。如：</h4><pre><code>[mysqld]\nlog-bin=mysql-bin\nserver-id=1\n</code></pre><p>####3.启动主服务器<br>注意：主服务器需要指定对哪些数据库记录二进制日志，这通过在启动主服务器时，加上<br>–binlog-do-db= db_name选项来实现。如果要记录多个数据库，要分别为每个数据库指定该选项。目前主服务器上的启动脚本请使用/data/mysql/bin/startmysql。另外，主机开机后自动启动mysqld的脚本也已经修改。</p>\n<h4 id=\"4-在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON-SLAVE权限。\"><a href=\"#4-在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON-SLAVE权限。\" class=\"headerlink\" title=\"4.在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON SLAVE权限。\"></a>4.在主服务器上为从服务器建立一个连接帐户，该帐户必须授予REPLICAITON SLAVE权限。</h4><pre><code>mysql&gt; GRANT REPLICATION SLAVE ON *.*\n-&gt; TO &apos;帐号&apos;@&apos;从服务器IP&apos; IDENTIFIED BY &apos;密码&apos;;\n</code></pre><h4 id=\"5-备份数据库。\"><a href=\"#5-备份数据库。\" class=\"headerlink\" title=\"5.备份数据库。\"></a>5.备份数据库。</h4><pre><code>shell&gt; mysqldump --master-data  --opt database_name &gt; backup-file.sql\n</code></pre><h4 id=\"6-查看主服务器的状态\"><a href=\"#6-查看主服务器的状态\" class=\"headerlink\" title=\"6.查看主服务器的状态\"></a>6.查看主服务器的状态</h4><pre><code>mysql&gt; show master status/G;\n</code></pre><p>记录File 和 Position 项的值<br>注：由于没有锁定主服务器，这里记录的主服务器二进制日志position值可能会大于做mysqldump时的值，这将导致从服务器丢失在此期间的更新。如果可以保证在此期间主服务器不会出现创建新表的更新，那么丢失的影响不大；否则，将导致从服务器复制线程失败，这时必须在做mysqldump时锁定主服务器。</p>\n<h4 id=\"7-在从服务器的my-cnf文件中添加下面的行：\"><a href=\"#7-在从服务器的my-cnf文件中添加下面的行：\" class=\"headerlink\" title=\"7.在从服务器的my.cnf文件中添加下面的行：\"></a>7.在从服务器的my.cnf文件中添加下面的行：</h4><pre><code>[mysqld]\nserver-id=slave_id\n</code></pre><p>slave_id值必须为2到232–1之间的一个正整数值。ID值唯一的标识了复制群集中的主从服务器，因此它们必须各不相同。</p>\n<h4 id=\"8-使用–skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。\"><a href=\"#8-使用–skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。\" class=\"headerlink\" title=\"8.使用–skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。\"></a>8.使用–skip-slave-start选项启动从服务器启动从服务器，并导入备份数据库文件。</h4><pre><code>shell&gt; mysqladmin create target_db_name\nshell&gt; mysql target_db_name &lt; backup-file.sql\n</code></pre><p>####9.在从服务器上执行下面的语句，以系统的实际值替换选项值：<br>        mysql&gt; CHANGE MASTER TO<br>            -&gt;     MASTER_HOST=’master_host_name’,<br>            -&gt;     MASTER_USER=’replication_user_name’,<br>            -&gt;     MASTER_PASSWORD=’replication_password’,<br>            -&gt;     MASTER_LOG_FILE=’recorded_log_file_name’,<br>            -&gt;     MASTER_LOG_POS=recorded_log_position;<br>其中recorded_log_file_name和recorded_log_position分别为步骤6所记录的File和Position值。</p>\n<h4 id=\"10-启动从服务器线程\"><a href=\"#10-启动从服务器线程\" class=\"headerlink\" title=\"10.启动从服务器线程\"></a>10.启动从服务器线程</h4><pre><code>mysql&gt; START SLAVE；\n</code></pre><h4 id=\"11-执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的-err文件获取信息。\"><a href=\"#11-执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的-err文件获取信息。\" class=\"headerlink\" title=\"11.执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的.err文件获取信息。\"></a>11.执行上述程序后，从服务器应连接主服务器，并补充自从快照以来发生的任何更新。如果没有正确更新，请检查复制线程状态以及data目录下的.err文件获取信息。</h4><h3 id=\"四-主从复制如何提高可靠性\"><a href=\"#四-主从复制如何提高可靠性\" class=\"headerlink\" title=\"四.主从复制如何提高可靠性\"></a>四.主从复制如何提高可靠性</h3><p>目前采用的主从单向复制，从服务器只是实时的保存了主服务器的一个副本。当主服务器发生故障时，可以切换到从服务器继续做查询，但不能更新。<br>如果采用双向复制，即两台mysql服务器即作为主服务器，又作为从服务器。那么两者都可以执行更新操作并能实现负载均衡，当一方出现故障时，另一方不受影响。但是，除非能保证任何更新操作顺序都是安全的，否则双向复制会导致失败。<br>为了更好的提高可靠性和可用性，需要当主服务器不可用时，能够在从服务器上更新，当主服务器恢复后，能够将从服务器上的更新同步到主服务器上。目前设想的方法是当主服务器不可用时，令从服务器成为Master。原来的主服务器重新启动后，设定为Slave，并从新的Master上同步更新。待同步一致后，再重新各自切换为原来的角色。具体的操作方法有待实验验证。</p>\n<p>PS:主服务器产生的二进制日志会占据大量的磁盘空间，应定期删除过期的bin-log.目前通过crontab每天运行/data/mysql/data/log_auto_del.sh来删除3天前的二进制日志文件。<br>博客来自：<a href=\"http://blog.csdn.net/libraworm/article/details/1703365\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/libraworm/article/details/1703365</a></p>\n"},{"author":"qwerse","head":null,"date":"2017-07-18T16:00:00.000Z","title":"h3cne的放弃","images":null,"status":"publish","summary":"最终的原因，其实还是在我自己这一方面，把精力太分散了。没有精力去考h3cne。","_content":"\n# h3cne的放弃\n\n我信奉一个原则：对一件事，要么就做好，要么就不做。这是对自己负责，也是对别人负责。\n\n上次开个帖子说了我要在8月考个h3cne，但是现在开这个帖子，我要承认我放弃了他。\n\n最终的原因，其实还是在我自己这一方面，把精力太分散了。没有精力去考h3cne。\n\n近期把精力都放在了python的爬虫上，但是精力虽然放在了python上，但是我总是逃避学习python，总是想着睡觉。\n\n这就是很尴尬了。\n\n适当的休息是必须的，学习始终是放在第一位的，学习才能碰见更好玩的事情。\n\n\nh3cne这个证可以让别人帮你代考，这就搞得没意思了，侧面的说明，这个证一点含金量都没有。\n\n好好学习python，只是为了更好玩，顺便带点加薪。^……^\n\n\n也没有什么想说的，期待自己的改变。\n","source":"_posts/blog/python/h3cne鑰冭瘯鏀惧純.md","raw":"\n---\nauthor: qwerse\nhead: \ndate: 2017-07-19\ntitle: h3cne的放弃\ntags: python\nimages: \ncategory: python\nstatus: publish\nsummary: 最终的原因，其实还是在我自己这一方面，把精力太分散了。没有精力去考h3cne。\n---\n\n# h3cne的放弃\n\n我信奉一个原则：对一件事，要么就做好，要么就不做。这是对自己负责，也是对别人负责。\n\n上次开个帖子说了我要在8月考个h3cne，但是现在开这个帖子，我要承认我放弃了他。\n\n最终的原因，其实还是在我自己这一方面，把精力太分散了。没有精力去考h3cne。\n\n近期把精力都放在了python的爬虫上，但是精力虽然放在了python上，但是我总是逃避学习python，总是想着睡觉。\n\n这就是很尴尬了。\n\n适当的休息是必须的，学习始终是放在第一位的，学习才能碰见更好玩的事情。\n\n\nh3cne这个证可以让别人帮你代考，这就搞得没意思了，侧面的说明，这个证一点含金量都没有。\n\n好好学习python，只是为了更好玩，顺便带点加薪。^……^\n\n\n也没有什么想说的，期待自己的改变。\n","slug":"blog/python/h3cne鑰冭瘯鏀惧純","published":1,"updated":"2018-08-01T08:22:05.113Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvfl0016pym698zns5x6","content":"<h1 id=\"h3cne的放弃\"><a href=\"#h3cne的放弃\" class=\"headerlink\" title=\"h3cne的放弃\"></a>h3cne的放弃</h1><p>我信奉一个原则：对一件事，要么就做好，要么就不做。这是对自己负责，也是对别人负责。</p>\n<p>上次开个帖子说了我要在8月考个h3cne，但是现在开这个帖子，我要承认我放弃了他。</p>\n<p>最终的原因，其实还是在我自己这一方面，把精力太分散了。没有精力去考h3cne。</p>\n<p>近期把精力都放在了python的爬虫上，但是精力虽然放在了python上，但是我总是逃避学习python，总是想着睡觉。</p>\n<p>这就是很尴尬了。</p>\n<p>适当的休息是必须的，学习始终是放在第一位的，学习才能碰见更好玩的事情。</p>\n<p>h3cne这个证可以让别人帮你代考，这就搞得没意思了，侧面的说明，这个证一点含金量都没有。</p>\n<p>好好学习python，只是为了更好玩，顺便带点加薪。^……^</p>\n<p>也没有什么想说的，期待自己的改变。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"h3cne的放弃\"><a href=\"#h3cne的放弃\" class=\"headerlink\" title=\"h3cne的放弃\"></a>h3cne的放弃</h1><p>我信奉一个原则：对一件事，要么就做好，要么就不做。这是对自己负责，也是对别人负责。</p>\n<p>上次开个帖子说了我要在8月考个h3cne，但是现在开这个帖子，我要承认我放弃了他。</p>\n<p>最终的原因，其实还是在我自己这一方面，把精力太分散了。没有精力去考h3cne。</p>\n<p>近期把精力都放在了python的爬虫上，但是精力虽然放在了python上，但是我总是逃避学习python，总是想着睡觉。</p>\n<p>这就是很尴尬了。</p>\n<p>适当的休息是必须的，学习始终是放在第一位的，学习才能碰见更好玩的事情。</p>\n<p>h3cne这个证可以让别人帮你代考，这就搞得没意思了，侧面的说明，这个证一点含金量都没有。</p>\n<p>好好学习python，只是为了更好玩，顺便带点加薪。^……^</p>\n<p>也没有什么想说的，期待自己的改变。</p>\n"},{"author":"QwerSe","head":null,"date":"2018-04-26T16:00:00.000Z","title":"numpy函数split的用法","status":"publish","summary":"np.split(a,10)","_content":"\n\n```python\nimport numpy as np\nimport pandas as pd\n```\n\n### 建立一个2维数组\n\n\n```python\na = np.arange(1,101).reshape((10,10))\na\n```\n\n\n\n\n    array([[  1,   2,   3,   4,   5,   6,   7,   8,   9,  10],\n           [ 11,  12,  13,  14,  15,  16,  17,  18,  19,  20],\n           [ 21,  22,  23,  24,  25,  26,  27,  28,  29,  30],\n           [ 31,  32,  33,  34,  35,  36,  37,  38,  39,  40],\n           [ 41,  42,  43,  44,  45,  46,  47,  48,  49,  50],\n           [ 51,  52,  53,  54,  55,  56,  57,  58,  59,  60],\n           [ 61,  62,  63,  64,  65,  66,  67,  68,  69,  70],\n           [ 71,  72,  73,  74,  75,  76,  77,  78,  79,  80],\n           [ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n           [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])\n\n\n\n### split 的普通用法\n\n\n```python\nnp.split(a,10) #把a这个ndarray,放在第一位，把要分割的次数放在第二位.!第二位数字一定是能被元素和整除。\n```\n\n\n\n\n    [array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10]]),\n     array([[11, 12, 13, 14, 15, 16, 17, 18, 19, 20]]),\n     array([[21, 22, 23, 24, 25, 26, 27, 28, 29, 30]]),\n     array([[31, 32, 33, 34, 35, 36, 37, 38, 39, 40]]),\n     array([[41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n     array([[51, 52, 53, 54, 55, 56, 57, 58, 59, 60]]),\n     array([[61, 62, 63, 64, 65, 66, 67, 68, 69, 70]]),\n     array([[71, 72, 73, 74, 75, 76, 77, 78, 79, 80]]),\n     array([[81, 82, 83, 84, 85, 86, 87, 88, 89, 90]]),\n     array([[ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])]\n\n\n\n### 犀利一点的语法\n\n\n```python\nnp.split(a,2,axis=1)  #axis为0按行分割，为1按列分割\n```\n\n\n\n\n    [array([[ 1,  2,  3,  4,  5],\n            [11, 12, 13, 14, 15],\n            [21, 22, 23, 24, 25],\n            [31, 32, 33, 34, 35],\n            [41, 42, 43, 44, 45],\n            [51, 52, 53, 54, 55],\n            [61, 62, 63, 64, 65],\n            [71, 72, 73, 74, 75],\n            [81, 82, 83, 84, 85],\n            [91, 92, 93, 94, 95]]), array([[  6,   7,   8,   9,  10],\n            [ 16,  17,  18,  19,  20],\n            [ 26,  27,  28,  29,  30],\n            [ 36,  37,  38,  39,  40],\n            [ 46,  47,  48,  49,  50],\n            [ 56,  57,  58,  59,  60],\n            [ 66,  67,  68,  69,  70],\n            [ 76,  77,  78,  79,  80],\n            [ 86,  87,  88,  89,  90],\n            [ 96,  97,  98,  99, 100]])]\n\n\n\n\n```python\nnp.split(a,2,axis=0)\n```\n\n\n\n\n    [array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10],\n            [11, 12, 13, 14, 15, 16, 17, 18, 19, 20],\n            [21, 22, 23, 24, 25, 26, 27, 28, 29, 30],\n            [31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n            [41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n     array([[ 51,  52,  53,  54,  55,  56,  57,  58,  59,  60],\n            [ 61,  62,  63,  64,  65,  66,  67,  68,  69,  70],\n            [ 71,  72,  73,  74,  75,  76,  77,  78,  79,  80],\n            [ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n            [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])]\n\n\n\n### 高级用法\n\n\n```python\nnp.split(a,[2,5,8,10])\n'''\n分割值按照列表的形式存在\n它是这样分割的\na的shape是10，10。\n轴是10\n列表中第一个2，代表分割前2行，还剩下3-10，共7行。\n列表中第二个5，分割剩下的行直到5，还剩下6-10，共4行。\n列表中第三个8，分割剩下的行直到8，还剩下9-10，共2行。\n列表中第四个10，分割剩下的行直到10，还剩下0，共0行。\n这样的方法会使得还会多余一个空的array\n\n'''\n```\n\n\n\n\n    [array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10],\n            [11, 12, 13, 14, 15, 16, 17, 18, 19, 20]]),\n     array([[21, 22, 23, 24, 25, 26, 27, 28, 29, 30],\n            [31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n            [41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n     array([[51, 52, 53, 54, 55, 56, 57, 58, 59, 60],\n            [61, 62, 63, 64, 65, 66, 67, 68, 69, 70],\n            [71, 72, 73, 74, 75, 76, 77, 78, 79, 80]]),\n     array([[ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n            [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]]),\n     array([], shape=(0, 10), dtype=int64)]\n\n\n","source":"_posts/blog/python/numpy鍑芥暟split鐨勭敤娉昣.md","raw":"---\nauthor: QwerSe\nhead:\ndate: 2018-04-27\ntitle: numpy函数split的用法\ntags: python\n\ncategory: coding\nstatus: publish\nsummary: np.split(a,10) #把a这个ndarray,放在第一位，把要分割的次数放在第二位.!第二位数字一定是能被元素和整除。\n---\n\n\n```python\nimport numpy as np\nimport pandas as pd\n```\n\n### 建立一个2维数组\n\n\n```python\na = np.arange(1,101).reshape((10,10))\na\n```\n\n\n\n\n    array([[  1,   2,   3,   4,   5,   6,   7,   8,   9,  10],\n           [ 11,  12,  13,  14,  15,  16,  17,  18,  19,  20],\n           [ 21,  22,  23,  24,  25,  26,  27,  28,  29,  30],\n           [ 31,  32,  33,  34,  35,  36,  37,  38,  39,  40],\n           [ 41,  42,  43,  44,  45,  46,  47,  48,  49,  50],\n           [ 51,  52,  53,  54,  55,  56,  57,  58,  59,  60],\n           [ 61,  62,  63,  64,  65,  66,  67,  68,  69,  70],\n           [ 71,  72,  73,  74,  75,  76,  77,  78,  79,  80],\n           [ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n           [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])\n\n\n\n### split 的普通用法\n\n\n```python\nnp.split(a,10) #把a这个ndarray,放在第一位，把要分割的次数放在第二位.!第二位数字一定是能被元素和整除。\n```\n\n\n\n\n    [array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10]]),\n     array([[11, 12, 13, 14, 15, 16, 17, 18, 19, 20]]),\n     array([[21, 22, 23, 24, 25, 26, 27, 28, 29, 30]]),\n     array([[31, 32, 33, 34, 35, 36, 37, 38, 39, 40]]),\n     array([[41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n     array([[51, 52, 53, 54, 55, 56, 57, 58, 59, 60]]),\n     array([[61, 62, 63, 64, 65, 66, 67, 68, 69, 70]]),\n     array([[71, 72, 73, 74, 75, 76, 77, 78, 79, 80]]),\n     array([[81, 82, 83, 84, 85, 86, 87, 88, 89, 90]]),\n     array([[ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])]\n\n\n\n### 犀利一点的语法\n\n\n```python\nnp.split(a,2,axis=1)  #axis为0按行分割，为1按列分割\n```\n\n\n\n\n    [array([[ 1,  2,  3,  4,  5],\n            [11, 12, 13, 14, 15],\n            [21, 22, 23, 24, 25],\n            [31, 32, 33, 34, 35],\n            [41, 42, 43, 44, 45],\n            [51, 52, 53, 54, 55],\n            [61, 62, 63, 64, 65],\n            [71, 72, 73, 74, 75],\n            [81, 82, 83, 84, 85],\n            [91, 92, 93, 94, 95]]), array([[  6,   7,   8,   9,  10],\n            [ 16,  17,  18,  19,  20],\n            [ 26,  27,  28,  29,  30],\n            [ 36,  37,  38,  39,  40],\n            [ 46,  47,  48,  49,  50],\n            [ 56,  57,  58,  59,  60],\n            [ 66,  67,  68,  69,  70],\n            [ 76,  77,  78,  79,  80],\n            [ 86,  87,  88,  89,  90],\n            [ 96,  97,  98,  99, 100]])]\n\n\n\n\n```python\nnp.split(a,2,axis=0)\n```\n\n\n\n\n    [array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10],\n            [11, 12, 13, 14, 15, 16, 17, 18, 19, 20],\n            [21, 22, 23, 24, 25, 26, 27, 28, 29, 30],\n            [31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n            [41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n     array([[ 51,  52,  53,  54,  55,  56,  57,  58,  59,  60],\n            [ 61,  62,  63,  64,  65,  66,  67,  68,  69,  70],\n            [ 71,  72,  73,  74,  75,  76,  77,  78,  79,  80],\n            [ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n            [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])]\n\n\n\n### 高级用法\n\n\n```python\nnp.split(a,[2,5,8,10])\n'''\n分割值按照列表的形式存在\n它是这样分割的\na的shape是10，10。\n轴是10\n列表中第一个2，代表分割前2行，还剩下3-10，共7行。\n列表中第二个5，分割剩下的行直到5，还剩下6-10，共4行。\n列表中第三个8，分割剩下的行直到8，还剩下9-10，共2行。\n列表中第四个10，分割剩下的行直到10，还剩下0，共0行。\n这样的方法会使得还会多余一个空的array\n\n'''\n```\n\n\n\n\n    [array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10],\n            [11, 12, 13, 14, 15, 16, 17, 18, 19, 20]]),\n     array([[21, 22, 23, 24, 25, 26, 27, 28, 29, 30],\n            [31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n            [41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n     array([[51, 52, 53, 54, 55, 56, 57, 58, 59, 60],\n            [61, 62, 63, 64, 65, 66, 67, 68, 69, 70],\n            [71, 72, 73, 74, 75, 76, 77, 78, 79, 80]]),\n     array([[ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n            [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]]),\n     array([], shape=(0, 10), dtype=int64)]\n\n\n","slug":"blog/python/numpy鍑芥暟split鐨勭敤娉昣","published":1,"updated":"2018-08-01T08:22:05.406Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvfp001apym6zjs8qrxb","content":"<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br></pre></td></tr></table></figure>\n<h3 id=\"建立一个2维数组\"><a href=\"#建立一个2维数组\" class=\"headerlink\" title=\"建立一个2维数组\"></a>建立一个2维数组</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = np.arange(<span class=\"number\">1</span>,<span class=\"number\">101</span>).reshape((<span class=\"number\">10</span>,<span class=\"number\">10</span>))</span><br><span class=\"line\">a</span><br></pre></td></tr></table></figure>\n<pre><code>array([[  1,   2,   3,   4,   5,   6,   7,   8,   9,  10],\n       [ 11,  12,  13,  14,  15,  16,  17,  18,  19,  20],\n       [ 21,  22,  23,  24,  25,  26,  27,  28,  29,  30],\n       [ 31,  32,  33,  34,  35,  36,  37,  38,  39,  40],\n       [ 41,  42,  43,  44,  45,  46,  47,  48,  49,  50],\n       [ 51,  52,  53,  54,  55,  56,  57,  58,  59,  60],\n       [ 61,  62,  63,  64,  65,  66,  67,  68,  69,  70],\n       [ 71,  72,  73,  74,  75,  76,  77,  78,  79,  80],\n       [ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n       [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])\n</code></pre><h3 id=\"split-的普通用法\"><a href=\"#split-的普通用法\" class=\"headerlink\" title=\"split 的普通用法\"></a>split 的普通用法</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">np.split(a,<span class=\"number\">10</span>) <span class=\"comment\">#把a这个ndarray,放在第一位，把要分割的次数放在第二位.!第二位数字一定是能被元素和整除。</span></span><br></pre></td></tr></table></figure>\n<pre><code>[array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10]]),\n array([[11, 12, 13, 14, 15, 16, 17, 18, 19, 20]]),\n array([[21, 22, 23, 24, 25, 26, 27, 28, 29, 30]]),\n array([[31, 32, 33, 34, 35, 36, 37, 38, 39, 40]]),\n array([[41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n array([[51, 52, 53, 54, 55, 56, 57, 58, 59, 60]]),\n array([[61, 62, 63, 64, 65, 66, 67, 68, 69, 70]]),\n array([[71, 72, 73, 74, 75, 76, 77, 78, 79, 80]]),\n array([[81, 82, 83, 84, 85, 86, 87, 88, 89, 90]]),\n array([[ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])]\n</code></pre><h3 id=\"犀利一点的语法\"><a href=\"#犀利一点的语法\" class=\"headerlink\" title=\"犀利一点的语法\"></a>犀利一点的语法</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">np.split(a,<span class=\"number\">2</span>,axis=<span class=\"number\">1</span>)  <span class=\"comment\">#axis为0按行分割，为1按列分割</span></span><br></pre></td></tr></table></figure>\n<pre><code>[array([[ 1,  2,  3,  4,  5],\n        [11, 12, 13, 14, 15],\n        [21, 22, 23, 24, 25],\n        [31, 32, 33, 34, 35],\n        [41, 42, 43, 44, 45],\n        [51, 52, 53, 54, 55],\n        [61, 62, 63, 64, 65],\n        [71, 72, 73, 74, 75],\n        [81, 82, 83, 84, 85],\n        [91, 92, 93, 94, 95]]), array([[  6,   7,   8,   9,  10],\n        [ 16,  17,  18,  19,  20],\n        [ 26,  27,  28,  29,  30],\n        [ 36,  37,  38,  39,  40],\n        [ 46,  47,  48,  49,  50],\n        [ 56,  57,  58,  59,  60],\n        [ 66,  67,  68,  69,  70],\n        [ 76,  77,  78,  79,  80],\n        [ 86,  87,  88,  89,  90],\n        [ 96,  97,  98,  99, 100]])]\n</code></pre><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">np.split(a,<span class=\"number\">2</span>,axis=<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n<pre><code>[array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10],\n        [11, 12, 13, 14, 15, 16, 17, 18, 19, 20],\n        [21, 22, 23, 24, 25, 26, 27, 28, 29, 30],\n        [31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n        [41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n array([[ 51,  52,  53,  54,  55,  56,  57,  58,  59,  60],\n        [ 61,  62,  63,  64,  65,  66,  67,  68,  69,  70],\n        [ 71,  72,  73,  74,  75,  76,  77,  78,  79,  80],\n        [ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n        [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])]\n</code></pre><h3 id=\"高级用法\"><a href=\"#高级用法\" class=\"headerlink\" title=\"高级用法\"></a>高级用法</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">np.split(a,[<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>,<span class=\"number\">10</span>])</span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">分割值按照列表的形式存在</span></span><br><span class=\"line\"><span class=\"string\">它是这样分割的</span></span><br><span class=\"line\"><span class=\"string\">a的shape是10，10。</span></span><br><span class=\"line\"><span class=\"string\">轴是10</span></span><br><span class=\"line\"><span class=\"string\">列表中第一个2，代表分割前2行，还剩下3-10，共7行。</span></span><br><span class=\"line\"><span class=\"string\">列表中第二个5，分割剩下的行直到5，还剩下6-10，共4行。</span></span><br><span class=\"line\"><span class=\"string\">列表中第三个8，分割剩下的行直到8，还剩下9-10，共2行。</span></span><br><span class=\"line\"><span class=\"string\">列表中第四个10，分割剩下的行直到10，还剩下0，共0行。</span></span><br><span class=\"line\"><span class=\"string\">这样的方法会使得还会多余一个空的array</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br></pre></td></tr></table></figure>\n<pre><code>[array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10],\n        [11, 12, 13, 14, 15, 16, 17, 18, 19, 20]]),\n array([[21, 22, 23, 24, 25, 26, 27, 28, 29, 30],\n        [31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n        [41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n array([[51, 52, 53, 54, 55, 56, 57, 58, 59, 60],\n        [61, 62, 63, 64, 65, 66, 67, 68, 69, 70],\n        [71, 72, 73, 74, 75, 76, 77, 78, 79, 80]]),\n array([[ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n        [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]]),\n array([], shape=(0, 10), dtype=int64)]\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br></pre></td></tr></table></figure>\n<h3 id=\"建立一个2维数组\"><a href=\"#建立一个2维数组\" class=\"headerlink\" title=\"建立一个2维数组\"></a>建立一个2维数组</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = np.arange(<span class=\"number\">1</span>,<span class=\"number\">101</span>).reshape((<span class=\"number\">10</span>,<span class=\"number\">10</span>))</span><br><span class=\"line\">a</span><br></pre></td></tr></table></figure>\n<pre><code>array([[  1,   2,   3,   4,   5,   6,   7,   8,   9,  10],\n       [ 11,  12,  13,  14,  15,  16,  17,  18,  19,  20],\n       [ 21,  22,  23,  24,  25,  26,  27,  28,  29,  30],\n       [ 31,  32,  33,  34,  35,  36,  37,  38,  39,  40],\n       [ 41,  42,  43,  44,  45,  46,  47,  48,  49,  50],\n       [ 51,  52,  53,  54,  55,  56,  57,  58,  59,  60],\n       [ 61,  62,  63,  64,  65,  66,  67,  68,  69,  70],\n       [ 71,  72,  73,  74,  75,  76,  77,  78,  79,  80],\n       [ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n       [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])\n</code></pre><h3 id=\"split-的普通用法\"><a href=\"#split-的普通用法\" class=\"headerlink\" title=\"split 的普通用法\"></a>split 的普通用法</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">np.split(a,<span class=\"number\">10</span>) <span class=\"comment\">#把a这个ndarray,放在第一位，把要分割的次数放在第二位.!第二位数字一定是能被元素和整除。</span></span><br></pre></td></tr></table></figure>\n<pre><code>[array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10]]),\n array([[11, 12, 13, 14, 15, 16, 17, 18, 19, 20]]),\n array([[21, 22, 23, 24, 25, 26, 27, 28, 29, 30]]),\n array([[31, 32, 33, 34, 35, 36, 37, 38, 39, 40]]),\n array([[41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n array([[51, 52, 53, 54, 55, 56, 57, 58, 59, 60]]),\n array([[61, 62, 63, 64, 65, 66, 67, 68, 69, 70]]),\n array([[71, 72, 73, 74, 75, 76, 77, 78, 79, 80]]),\n array([[81, 82, 83, 84, 85, 86, 87, 88, 89, 90]]),\n array([[ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])]\n</code></pre><h3 id=\"犀利一点的语法\"><a href=\"#犀利一点的语法\" class=\"headerlink\" title=\"犀利一点的语法\"></a>犀利一点的语法</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">np.split(a,<span class=\"number\">2</span>,axis=<span class=\"number\">1</span>)  <span class=\"comment\">#axis为0按行分割，为1按列分割</span></span><br></pre></td></tr></table></figure>\n<pre><code>[array([[ 1,  2,  3,  4,  5],\n        [11, 12, 13, 14, 15],\n        [21, 22, 23, 24, 25],\n        [31, 32, 33, 34, 35],\n        [41, 42, 43, 44, 45],\n        [51, 52, 53, 54, 55],\n        [61, 62, 63, 64, 65],\n        [71, 72, 73, 74, 75],\n        [81, 82, 83, 84, 85],\n        [91, 92, 93, 94, 95]]), array([[  6,   7,   8,   9,  10],\n        [ 16,  17,  18,  19,  20],\n        [ 26,  27,  28,  29,  30],\n        [ 36,  37,  38,  39,  40],\n        [ 46,  47,  48,  49,  50],\n        [ 56,  57,  58,  59,  60],\n        [ 66,  67,  68,  69,  70],\n        [ 76,  77,  78,  79,  80],\n        [ 86,  87,  88,  89,  90],\n        [ 96,  97,  98,  99, 100]])]\n</code></pre><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">np.split(a,<span class=\"number\">2</span>,axis=<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n<pre><code>[array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10],\n        [11, 12, 13, 14, 15, 16, 17, 18, 19, 20],\n        [21, 22, 23, 24, 25, 26, 27, 28, 29, 30],\n        [31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n        [41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n array([[ 51,  52,  53,  54,  55,  56,  57,  58,  59,  60],\n        [ 61,  62,  63,  64,  65,  66,  67,  68,  69,  70],\n        [ 71,  72,  73,  74,  75,  76,  77,  78,  79,  80],\n        [ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n        [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]])]\n</code></pre><h3 id=\"高级用法\"><a href=\"#高级用法\" class=\"headerlink\" title=\"高级用法\"></a>高级用法</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">np.split(a,[<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>,<span class=\"number\">10</span>])</span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">分割值按照列表的形式存在</span></span><br><span class=\"line\"><span class=\"string\">它是这样分割的</span></span><br><span class=\"line\"><span class=\"string\">a的shape是10，10。</span></span><br><span class=\"line\"><span class=\"string\">轴是10</span></span><br><span class=\"line\"><span class=\"string\">列表中第一个2，代表分割前2行，还剩下3-10，共7行。</span></span><br><span class=\"line\"><span class=\"string\">列表中第二个5，分割剩下的行直到5，还剩下6-10，共4行。</span></span><br><span class=\"line\"><span class=\"string\">列表中第三个8，分割剩下的行直到8，还剩下9-10，共2行。</span></span><br><span class=\"line\"><span class=\"string\">列表中第四个10，分割剩下的行直到10，还剩下0，共0行。</span></span><br><span class=\"line\"><span class=\"string\">这样的方法会使得还会多余一个空的array</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br></pre></td></tr></table></figure>\n<pre><code>[array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10],\n        [11, 12, 13, 14, 15, 16, 17, 18, 19, 20]]),\n array([[21, 22, 23, 24, 25, 26, 27, 28, 29, 30],\n        [31, 32, 33, 34, 35, 36, 37, 38, 39, 40],\n        [41, 42, 43, 44, 45, 46, 47, 48, 49, 50]]),\n array([[51, 52, 53, 54, 55, 56, 57, 58, 59, 60],\n        [61, 62, 63, 64, 65, 66, 67, 68, 69, 70],\n        [71, 72, 73, 74, 75, 76, 77, 78, 79, 80]]),\n array([[ 81,  82,  83,  84,  85,  86,  87,  88,  89,  90],\n        [ 91,  92,  93,  94,  95,  96,  97,  98,  99, 100]]),\n array([], shape=(0, 10), dtype=int64)]\n</code></pre>"},{"author":"QwerSe","head":null,"date":"2017-07-03T16:00:00.000Z","title":"用wingide6,搭建python开发环境","status":"publish","summary":"wingide6，是当前最新的pythonide","_content":"\n### 下载wingide6\n\t1,官网里面下必须是6，才能用下面的软件破解\n\t\thttp://wingware.com/downloads/wing-pro\n\n\t2，微云下载：\n\t\thttps://share.weiyun.com/2ab08fc88f2ed22cbce9a6b54fb9b172\n\n\n### 破解wingide6\n\n\t1,下载破解软件：\n\t\thttps://share.weiyun.com/e1bae3eb120a4cee3f8d0766cb3ef329\n\n\t2，算号软件：\n\t\thttps://share.weiyun.com/9af74fd022e96d32e2920f7077d742e2\n\n###使用方法：\n\thttp://www.lizenghai.com/archives/491.html\n\n\twingide是我用过不重，但又功能齐全的软件，符合我！\n\t\n\n\n","source":"_posts/blog/python/wingide6鐨勬惌寤轰笌鐮磋В.md","raw":"---\nauthor: QwerSe\nhead:\ndate: 2017-07-04\ntitle: 用wingide6,搭建python开发环境\ntags: python\ncategory: python\nstatus: publish\nsummary: wingide6，是当前最新的pythonide\n---\n\n### 下载wingide6\n\t1,官网里面下必须是6，才能用下面的软件破解\n\t\thttp://wingware.com/downloads/wing-pro\n\n\t2，微云下载：\n\t\thttps://share.weiyun.com/2ab08fc88f2ed22cbce9a6b54fb9b172\n\n\n### 破解wingide6\n\n\t1,下载破解软件：\n\t\thttps://share.weiyun.com/e1bae3eb120a4cee3f8d0766cb3ef329\n\n\t2，算号软件：\n\t\thttps://share.weiyun.com/9af74fd022e96d32e2920f7077d742e2\n\n###使用方法：\n\thttp://www.lizenghai.com/archives/491.html\n\n\twingide是我用过不重，但又功能齐全的软件，符合我！\n\t\n\n\n","slug":"blog/python/wingide6鐨勬惌寤轰笌鐮磋В","published":1,"updated":"2018-08-01T08:31:04.763Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvfs001epym6b4cabec1","content":"<h3 id=\"下载wingide6\"><a href=\"#下载wingide6\" class=\"headerlink\" title=\"下载wingide6\"></a>下载wingide6</h3><pre><code>1,官网里面下必须是6，才能用下面的软件破解\n    http://wingware.com/downloads/wing-pro\n\n2，微云下载：\n    https://share.weiyun.com/2ab08fc88f2ed22cbce9a6b54fb9b172\n</code></pre><h3 id=\"破解wingide6\"><a href=\"#破解wingide6\" class=\"headerlink\" title=\"破解wingide6\"></a>破解wingide6</h3><pre><code>1,下载破解软件：\n    https://share.weiyun.com/e1bae3eb120a4cee3f8d0766cb3ef329\n\n2，算号软件：\n    https://share.weiyun.com/9af74fd022e96d32e2920f7077d742e2\n</code></pre><p>###使用方法：<br>    <a href=\"http://www.lizenghai.com/archives/491.html\" target=\"_blank\" rel=\"noopener\">http://www.lizenghai.com/archives/491.html</a></p>\n<pre><code>wingide是我用过不重，但又功能齐全的软件，符合我！\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"下载wingide6\"><a href=\"#下载wingide6\" class=\"headerlink\" title=\"下载wingide6\"></a>下载wingide6</h3><pre><code>1,官网里面下必须是6，才能用下面的软件破解\n    http://wingware.com/downloads/wing-pro\n\n2，微云下载：\n    https://share.weiyun.com/2ab08fc88f2ed22cbce9a6b54fb9b172\n</code></pre><h3 id=\"破解wingide6\"><a href=\"#破解wingide6\" class=\"headerlink\" title=\"破解wingide6\"></a>破解wingide6</h3><pre><code>1,下载破解软件：\n    https://share.weiyun.com/e1bae3eb120a4cee3f8d0766cb3ef329\n\n2，算号软件：\n    https://share.weiyun.com/9af74fd022e96d32e2920f7077d742e2\n</code></pre><p>###使用方法：<br>    <a href=\"http://www.lizenghai.com/archives/491.html\" target=\"_blank\" rel=\"noopener\">http://www.lizenghai.com/archives/491.html</a></p>\n<pre><code>wingide是我用过不重，但又功能齐全的软件，符合我！\n</code></pre>"},{"author":"QwerSe","head":null,"date":"2017-05-20T16:00:00.000Z","title":"用atom打造python IDE","status":"publish","summary":"用atom建立一个完整的python ide","_content":"\n\n\n\n  这期间从9点一直干到下午2:48，好难受啊！最后还是选择了atom，期间我也试过vscode和sublime。\n配置全部都太难了，而且文档也不是很健全。慢慢折腾，我终于ok了。虽然atom是英文的！\n\n#### 安装期间要安装这几个插件：\n\t\n\tscript  可以让你在atom里直接运行脚本\n\tpython-autopep8   自动符合pep8代码规范\n\tautocomplete-python  自动补全\n\tpython-tools  工具\n\n### 安装时候要FQ出去，不然有些插件会出错\n\n安装完毕建立一个.py结尾的文件写上内容ctrl+shift+b 就ok了\n","source":"_posts/blog/python/鐢╝tom鎵撻€爌ython-IDE.md","raw":"---\nauthor: QwerSe\nhead:\ndate: 2017-05-21\ntitle: 用atom打造python IDE\ntags: python\n\n\n\ncategory: coding\nstatus: publish\nsummary: 用atom建立一个完整的python ide\n---\n\n\n\n\n  这期间从9点一直干到下午2:48，好难受啊！最后还是选择了atom，期间我也试过vscode和sublime。\n配置全部都太难了，而且文档也不是很健全。慢慢折腾，我终于ok了。虽然atom是英文的！\n\n#### 安装期间要安装这几个插件：\n\t\n\tscript  可以让你在atom里直接运行脚本\n\tpython-autopep8   自动符合pep8代码规范\n\tautocomplete-python  自动补全\n\tpython-tools  工具\n\n### 安装时候要FQ出去，不然有些插件会出错\n\n安装完毕建立一个.py结尾的文件写上内容ctrl+shift+b 就ok了\n","slug":"blog/python/鐢╝tom鎵撻€爌ython-IDE","published":1,"updated":"2018-08-01T08:22:05.511Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvfv001ipym6jicpd0i0","content":"<p>  这期间从9点一直干到下午2:48，好难受啊！最后还是选择了atom，期间我也试过vscode和sublime。<br>配置全部都太难了，而且文档也不是很健全。慢慢折腾，我终于ok了。虽然atom是英文的！</p>\n<h4 id=\"安装期间要安装这几个插件：\"><a href=\"#安装期间要安装这几个插件：\" class=\"headerlink\" title=\"安装期间要安装这几个插件：\"></a>安装期间要安装这几个插件：</h4><pre><code>script  可以让你在atom里直接运行脚本\npython-autopep8   自动符合pep8代码规范\nautocomplete-python  自动补全\npython-tools  工具\n</code></pre><h3 id=\"安装时候要FQ出去，不然有些插件会出错\"><a href=\"#安装时候要FQ出去，不然有些插件会出错\" class=\"headerlink\" title=\"安装时候要FQ出去，不然有些插件会出错\"></a>安装时候要FQ出去，不然有些插件会出错</h3><p>安装完毕建立一个.py结尾的文件写上内容ctrl+shift+b 就ok了</p>\n","site":{"data":{}},"excerpt":"","more":"<p>  这期间从9点一直干到下午2:48，好难受啊！最后还是选择了atom，期间我也试过vscode和sublime。<br>配置全部都太难了，而且文档也不是很健全。慢慢折腾，我终于ok了。虽然atom是英文的！</p>\n<h4 id=\"安装期间要安装这几个插件：\"><a href=\"#安装期间要安装这几个插件：\" class=\"headerlink\" title=\"安装期间要安装这几个插件：\"></a>安装期间要安装这几个插件：</h4><pre><code>script  可以让你在atom里直接运行脚本\npython-autopep8   自动符合pep8代码规范\nautocomplete-python  自动补全\npython-tools  工具\n</code></pre><h3 id=\"安装时候要FQ出去，不然有些插件会出错\"><a href=\"#安装时候要FQ出去，不然有些插件会出错\" class=\"headerlink\" title=\"安装时候要FQ出去，不然有些插件会出错\"></a>安装时候要FQ出去，不然有些插件会出错</h3><p>安装完毕建立一个.py结尾的文件写上内容ctrl+shift+b 就ok了</p>\n"},{"author":"QwerSe","head":null,"date":"2016-10-02T16:00:00.000Z","title":"http 状态代码表","status":"publish","summary":"所有 HTTP 状态代码及其定义","_content":"　  \n#### 2xx  成功  \n200  正常；请求已完成。  \n201  正常；紧接 POST 命令。  \n202  正常；已接受用于处理，但处理尚未完成。  \n203  正常；部分信息 — 返回的信息只是一部分。  \n204  正常；无响应 — 已接收请求，但不存在要回送的信息。  \n#### 3xx  重定向  \n301  已移动 — 请求的数据具有新的位置且更改是永久的。  \n302  已找到 — 请求的数据临时具有不同 URI。  \n303  请参阅其它 — 可在另一 URI 下找到对请求的响应，且应使用 GET 方法检索此响应。  \n304  未修改 — 未按预期修改文档。  \n305  使用代理 — 必须通过位置字段中提供的代理来访问请求的资源。  \n306  未使用 — 不再使用；保留此代码以便将来使用。  \n#### 4xx  客户机中出现的错误  \n400  错误请求 — 请求中有语法问题，或不能满足请求。  \n401  未授权 — 未授权客户机访问数据。  \n402  需要付款 — 表示计费系统已有效。  \n403  禁止 — 即使有授权也不需要访问。  \n404  找不到 — 服务器找不到给定的资源；文档不存在。  \n407  代理认证请求 — 客户机首先必须使用代理认证自身。  \n415  介质类型不受支持 — 服务器拒绝服务请求，因为不支持请求实体的格式。  \n#### 5xx  服务器中出现的错误  \n500  内部错误 — 因为意外情况，服务器不能完成请求。  \n501  未执行 — 服务器不支持请求的工具。  \n502  错误网关 — 服务器接收到来自上游服务器的无效响应。  \n503  无法获得服务 — 由于临时过载或维护，服务器无法处理请求。\n\nHTTP 400 - 请求无效 \n\nHTTP 401.1 - 未授权：登录失败 \n\nHTTP 401.2 - 未授权：服务器配置问题导致登录失败 \n\nHTTP 401.3 - ACL 禁止访问资源 \n\nHTTP 401.4 - 未授权：授权被筛选器拒绝 \n\nHTTP 401.5 - 未授权：ISAPI 或 CGI 授权失败  \n\nHTTP 403 - 禁止访问 \n\nHTTP 403 - 对 Internet 服务管理器 (HTML) 的访问仅限于 Localhost \n\nHTTP 403.1 禁止访问：禁止可执行访问 \n\nHTTP 403.2 - 禁止访问：禁止读访问 \n\nHTTP 403.3 - 禁止访问：禁止写访问 \n\nHTTP 403.4 - 禁止访问：要求 SSL \n\nHTTP 403.5 - 禁止访问：要求 SSL 128 \n\nHTTP 403.6 - 禁止访问：IP 地址被拒绝 \n\nHTTP 403.7 - 禁止访问：要求客户证书 \n\nHTTP 403.8 - 禁止访问：禁止站点访问 \n\nHTTP 403.9 - 禁止访问：连接的用户过多 \n\nHTTP 403.10 - 禁止访问：配置无效 \n\nHTTP 403.11 - 禁止访问：密码更改 \n\nHTTP 403.12 - 禁止访问：映射器拒绝访问 \n\nHTTP 403.13 - 禁止访问：客户证书已被吊销 \n\nHTTP 403.15 - 禁止访问：客户访问许可过多 \n\nHTTP 403.16 - 禁止访问：客户证书不可信或者无效 \n\nHTTP 403.17 - 禁止访问：客户证书已经到期或者尚未生效 \n\nHTTP 404.1 - 无法找到 Web 站点 \n\nHTTP 404 - 无法找到文件 \n\nHTTP 405 - 资源被禁止 \n\nHTTP 406 - 无法接受 \n\nHTTP 407 - 要求代理身份验证 \n\nHTTP 410 - 永远不可用 \n\nHTTP 412 - 先决条件失败 \n\nHTTP 414 - 请求 - URI 太长 \n\nHTTP 500 - 内部服务器错误 \n\nHTTP 500.100 - 内部服务器错误 - ASP 错误 \n\nHTTP 500-11 服务器关闭 \n\nHTTP 500-12 应用程序重新启动 \n\nHTTP 500-13 - 服务器太忙 \n\nHTTP 500-14 - 应用程序无效 \n\nHTTP 500-15 - 不允许请求 global.asa \n\nError 501 - 未实现 \n\nHTTP 502 - 网关错误 \n\n\n","source":"_posts/blog/web/http鐘舵€佽〃.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2016-10-3\ntitle:  http 状态代码表\ntags: linux\n\ncategory: webnet\nstatus: publish\nsummary: 所有 HTTP 状态代码及其定义 \n---\n　  \n#### 2xx  成功  \n200  正常；请求已完成。  \n201  正常；紧接 POST 命令。  \n202  正常；已接受用于处理，但处理尚未完成。  \n203  正常；部分信息 — 返回的信息只是一部分。  \n204  正常；无响应 — 已接收请求，但不存在要回送的信息。  \n#### 3xx  重定向  \n301  已移动 — 请求的数据具有新的位置且更改是永久的。  \n302  已找到 — 请求的数据临时具有不同 URI。  \n303  请参阅其它 — 可在另一 URI 下找到对请求的响应，且应使用 GET 方法检索此响应。  \n304  未修改 — 未按预期修改文档。  \n305  使用代理 — 必须通过位置字段中提供的代理来访问请求的资源。  \n306  未使用 — 不再使用；保留此代码以便将来使用。  \n#### 4xx  客户机中出现的错误  \n400  错误请求 — 请求中有语法问题，或不能满足请求。  \n401  未授权 — 未授权客户机访问数据。  \n402  需要付款 — 表示计费系统已有效。  \n403  禁止 — 即使有授权也不需要访问。  \n404  找不到 — 服务器找不到给定的资源；文档不存在。  \n407  代理认证请求 — 客户机首先必须使用代理认证自身。  \n415  介质类型不受支持 — 服务器拒绝服务请求，因为不支持请求实体的格式。  \n#### 5xx  服务器中出现的错误  \n500  内部错误 — 因为意外情况，服务器不能完成请求。  \n501  未执行 — 服务器不支持请求的工具。  \n502  错误网关 — 服务器接收到来自上游服务器的无效响应。  \n503  无法获得服务 — 由于临时过载或维护，服务器无法处理请求。\n\nHTTP 400 - 请求无效 \n\nHTTP 401.1 - 未授权：登录失败 \n\nHTTP 401.2 - 未授权：服务器配置问题导致登录失败 \n\nHTTP 401.3 - ACL 禁止访问资源 \n\nHTTP 401.4 - 未授权：授权被筛选器拒绝 \n\nHTTP 401.5 - 未授权：ISAPI 或 CGI 授权失败  \n\nHTTP 403 - 禁止访问 \n\nHTTP 403 - 对 Internet 服务管理器 (HTML) 的访问仅限于 Localhost \n\nHTTP 403.1 禁止访问：禁止可执行访问 \n\nHTTP 403.2 - 禁止访问：禁止读访问 \n\nHTTP 403.3 - 禁止访问：禁止写访问 \n\nHTTP 403.4 - 禁止访问：要求 SSL \n\nHTTP 403.5 - 禁止访问：要求 SSL 128 \n\nHTTP 403.6 - 禁止访问：IP 地址被拒绝 \n\nHTTP 403.7 - 禁止访问：要求客户证书 \n\nHTTP 403.8 - 禁止访问：禁止站点访问 \n\nHTTP 403.9 - 禁止访问：连接的用户过多 \n\nHTTP 403.10 - 禁止访问：配置无效 \n\nHTTP 403.11 - 禁止访问：密码更改 \n\nHTTP 403.12 - 禁止访问：映射器拒绝访问 \n\nHTTP 403.13 - 禁止访问：客户证书已被吊销 \n\nHTTP 403.15 - 禁止访问：客户访问许可过多 \n\nHTTP 403.16 - 禁止访问：客户证书不可信或者无效 \n\nHTTP 403.17 - 禁止访问：客户证书已经到期或者尚未生效 \n\nHTTP 404.1 - 无法找到 Web 站点 \n\nHTTP 404 - 无法找到文件 \n\nHTTP 405 - 资源被禁止 \n\nHTTP 406 - 无法接受 \n\nHTTP 407 - 要求代理身份验证 \n\nHTTP 410 - 永远不可用 \n\nHTTP 412 - 先决条件失败 \n\nHTTP 414 - 请求 - URI 太长 \n\nHTTP 500 - 内部服务器错误 \n\nHTTP 500.100 - 内部服务器错误 - ASP 错误 \n\nHTTP 500-11 服务器关闭 \n\nHTTP 500-12 应用程序重新启动 \n\nHTTP 500-13 - 服务器太忙 \n\nHTTP 500-14 - 应用程序无效 \n\nHTTP 500-15 - 不允许请求 global.asa \n\nError 501 - 未实现 \n\nHTTP 502 - 网关错误 \n\n\n","slug":"blog/web/http鐘舵€佽〃","published":1,"updated":"2018-08-01T08:33:47.144Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvfz001mpym6ad23xdwm","content":"<p>　  </p>\n<h4 id=\"2xx-成功\"><a href=\"#2xx-成功\" class=\"headerlink\" title=\"2xx  成功\"></a>2xx  成功</h4><p>200  正常；请求已完成。<br>201  正常；紧接 POST 命令。<br>202  正常；已接受用于处理，但处理尚未完成。<br>203  正常；部分信息 — 返回的信息只是一部分。<br>204  正常；无响应 — 已接收请求，但不存在要回送的信息。  </p>\n<h4 id=\"3xx-重定向\"><a href=\"#3xx-重定向\" class=\"headerlink\" title=\"3xx  重定向\"></a>3xx  重定向</h4><p>301  已移动 — 请求的数据具有新的位置且更改是永久的。<br>302  已找到 — 请求的数据临时具有不同 URI。<br>303  请参阅其它 — 可在另一 URI 下找到对请求的响应，且应使用 GET 方法检索此响应。<br>304  未修改 — 未按预期修改文档。<br>305  使用代理 — 必须通过位置字段中提供的代理来访问请求的资源。<br>306  未使用 — 不再使用；保留此代码以便将来使用。  </p>\n<h4 id=\"4xx-客户机中出现的错误\"><a href=\"#4xx-客户机中出现的错误\" class=\"headerlink\" title=\"4xx  客户机中出现的错误\"></a>4xx  客户机中出现的错误</h4><p>400  错误请求 — 请求中有语法问题，或不能满足请求。<br>401  未授权 — 未授权客户机访问数据。<br>402  需要付款 — 表示计费系统已有效。<br>403  禁止 — 即使有授权也不需要访问。<br>404  找不到 — 服务器找不到给定的资源；文档不存在。<br>407  代理认证请求 — 客户机首先必须使用代理认证自身。<br>415  介质类型不受支持 — 服务器拒绝服务请求，因为不支持请求实体的格式。  </p>\n<h4 id=\"5xx-服务器中出现的错误\"><a href=\"#5xx-服务器中出现的错误\" class=\"headerlink\" title=\"5xx  服务器中出现的错误\"></a>5xx  服务器中出现的错误</h4><p>500  内部错误 — 因为意外情况，服务器不能完成请求。<br>501  未执行 — 服务器不支持请求的工具。<br>502  错误网关 — 服务器接收到来自上游服务器的无效响应。<br>503  无法获得服务 — 由于临时过载或维护，服务器无法处理请求。</p>\n<p>HTTP 400 - 请求无效 </p>\n<p>HTTP 401.1 - 未授权：登录失败 </p>\n<p>HTTP 401.2 - 未授权：服务器配置问题导致登录失败 </p>\n<p>HTTP 401.3 - ACL 禁止访问资源 </p>\n<p>HTTP 401.4 - 未授权：授权被筛选器拒绝 </p>\n<p>HTTP 401.5 - 未授权：ISAPI 或 CGI 授权失败  </p>\n<p>HTTP 403 - 禁止访问 </p>\n<p>HTTP 403 - 对 Internet 服务管理器 (HTML) 的访问仅限于 Localhost </p>\n<p>HTTP 403.1 禁止访问：禁止可执行访问 </p>\n<p>HTTP 403.2 - 禁止访问：禁止读访问 </p>\n<p>HTTP 403.3 - 禁止访问：禁止写访问 </p>\n<p>HTTP 403.4 - 禁止访问：要求 SSL </p>\n<p>HTTP 403.5 - 禁止访问：要求 SSL 128 </p>\n<p>HTTP 403.6 - 禁止访问：IP 地址被拒绝 </p>\n<p>HTTP 403.7 - 禁止访问：要求客户证书 </p>\n<p>HTTP 403.8 - 禁止访问：禁止站点访问 </p>\n<p>HTTP 403.9 - 禁止访问：连接的用户过多 </p>\n<p>HTTP 403.10 - 禁止访问：配置无效 </p>\n<p>HTTP 403.11 - 禁止访问：密码更改 </p>\n<p>HTTP 403.12 - 禁止访问：映射器拒绝访问 </p>\n<p>HTTP 403.13 - 禁止访问：客户证书已被吊销 </p>\n<p>HTTP 403.15 - 禁止访问：客户访问许可过多 </p>\n<p>HTTP 403.16 - 禁止访问：客户证书不可信或者无效 </p>\n<p>HTTP 403.17 - 禁止访问：客户证书已经到期或者尚未生效 </p>\n<p>HTTP 404.1 - 无法找到 Web 站点 </p>\n<p>HTTP 404 - 无法找到文件 </p>\n<p>HTTP 405 - 资源被禁止 </p>\n<p>HTTP 406 - 无法接受 </p>\n<p>HTTP 407 - 要求代理身份验证 </p>\n<p>HTTP 410 - 永远不可用 </p>\n<p>HTTP 412 - 先决条件失败 </p>\n<p>HTTP 414 - 请求 - URI 太长 </p>\n<p>HTTP 500 - 内部服务器错误 </p>\n<p>HTTP 500.100 - 内部服务器错误 - ASP 错误 </p>\n<p>HTTP 500-11 服务器关闭 </p>\n<p>HTTP 500-12 应用程序重新启动 </p>\n<p>HTTP 500-13 - 服务器太忙 </p>\n<p>HTTP 500-14 - 应用程序无效 </p>\n<p>HTTP 500-15 - 不允许请求 global.asa </p>\n<p>Error 501 - 未实现 </p>\n<p>HTTP 502 - 网关错误 </p>\n","site":{"data":{}},"excerpt":"","more":"<p>　  </p>\n<h4 id=\"2xx-成功\"><a href=\"#2xx-成功\" class=\"headerlink\" title=\"2xx  成功\"></a>2xx  成功</h4><p>200  正常；请求已完成。<br>201  正常；紧接 POST 命令。<br>202  正常；已接受用于处理，但处理尚未完成。<br>203  正常；部分信息 — 返回的信息只是一部分。<br>204  正常；无响应 — 已接收请求，但不存在要回送的信息。  </p>\n<h4 id=\"3xx-重定向\"><a href=\"#3xx-重定向\" class=\"headerlink\" title=\"3xx  重定向\"></a>3xx  重定向</h4><p>301  已移动 — 请求的数据具有新的位置且更改是永久的。<br>302  已找到 — 请求的数据临时具有不同 URI。<br>303  请参阅其它 — 可在另一 URI 下找到对请求的响应，且应使用 GET 方法检索此响应。<br>304  未修改 — 未按预期修改文档。<br>305  使用代理 — 必须通过位置字段中提供的代理来访问请求的资源。<br>306  未使用 — 不再使用；保留此代码以便将来使用。  </p>\n<h4 id=\"4xx-客户机中出现的错误\"><a href=\"#4xx-客户机中出现的错误\" class=\"headerlink\" title=\"4xx  客户机中出现的错误\"></a>4xx  客户机中出现的错误</h4><p>400  错误请求 — 请求中有语法问题，或不能满足请求。<br>401  未授权 — 未授权客户机访问数据。<br>402  需要付款 — 表示计费系统已有效。<br>403  禁止 — 即使有授权也不需要访问。<br>404  找不到 — 服务器找不到给定的资源；文档不存在。<br>407  代理认证请求 — 客户机首先必须使用代理认证自身。<br>415  介质类型不受支持 — 服务器拒绝服务请求，因为不支持请求实体的格式。  </p>\n<h4 id=\"5xx-服务器中出现的错误\"><a href=\"#5xx-服务器中出现的错误\" class=\"headerlink\" title=\"5xx  服务器中出现的错误\"></a>5xx  服务器中出现的错误</h4><p>500  内部错误 — 因为意外情况，服务器不能完成请求。<br>501  未执行 — 服务器不支持请求的工具。<br>502  错误网关 — 服务器接收到来自上游服务器的无效响应。<br>503  无法获得服务 — 由于临时过载或维护，服务器无法处理请求。</p>\n<p>HTTP 400 - 请求无效 </p>\n<p>HTTP 401.1 - 未授权：登录失败 </p>\n<p>HTTP 401.2 - 未授权：服务器配置问题导致登录失败 </p>\n<p>HTTP 401.3 - ACL 禁止访问资源 </p>\n<p>HTTP 401.4 - 未授权：授权被筛选器拒绝 </p>\n<p>HTTP 401.5 - 未授权：ISAPI 或 CGI 授权失败  </p>\n<p>HTTP 403 - 禁止访问 </p>\n<p>HTTP 403 - 对 Internet 服务管理器 (HTML) 的访问仅限于 Localhost </p>\n<p>HTTP 403.1 禁止访问：禁止可执行访问 </p>\n<p>HTTP 403.2 - 禁止访问：禁止读访问 </p>\n<p>HTTP 403.3 - 禁止访问：禁止写访问 </p>\n<p>HTTP 403.4 - 禁止访问：要求 SSL </p>\n<p>HTTP 403.5 - 禁止访问：要求 SSL 128 </p>\n<p>HTTP 403.6 - 禁止访问：IP 地址被拒绝 </p>\n<p>HTTP 403.7 - 禁止访问：要求客户证书 </p>\n<p>HTTP 403.8 - 禁止访问：禁止站点访问 </p>\n<p>HTTP 403.9 - 禁止访问：连接的用户过多 </p>\n<p>HTTP 403.10 - 禁止访问：配置无效 </p>\n<p>HTTP 403.11 - 禁止访问：密码更改 </p>\n<p>HTTP 403.12 - 禁止访问：映射器拒绝访问 </p>\n<p>HTTP 403.13 - 禁止访问：客户证书已被吊销 </p>\n<p>HTTP 403.15 - 禁止访问：客户访问许可过多 </p>\n<p>HTTP 403.16 - 禁止访问：客户证书不可信或者无效 </p>\n<p>HTTP 403.17 - 禁止访问：客户证书已经到期或者尚未生效 </p>\n<p>HTTP 404.1 - 无法找到 Web 站点 </p>\n<p>HTTP 404 - 无法找到文件 </p>\n<p>HTTP 405 - 资源被禁止 </p>\n<p>HTTP 406 - 无法接受 </p>\n<p>HTTP 407 - 要求代理身份验证 </p>\n<p>HTTP 410 - 永远不可用 </p>\n<p>HTTP 412 - 先决条件失败 </p>\n<p>HTTP 414 - 请求 - URI 太长 </p>\n<p>HTTP 500 - 内部服务器错误 </p>\n<p>HTTP 500.100 - 内部服务器错误 - ASP 错误 </p>\n<p>HTTP 500-11 服务器关闭 </p>\n<p>HTTP 500-12 应用程序重新启动 </p>\n<p>HTTP 500-13 - 服务器太忙 </p>\n<p>HTTP 500-14 - 应用程序无效 </p>\n<p>HTTP 500-15 - 不允许请求 global.asa </p>\n<p>Error 501 - 未实现 </p>\n<p>HTTP 502 - 网关错误 </p>\n"},{"author":"qwerse","head":null,"date":"2017-11-22T16:00:00.000Z","title":"thinkpad x260重装系统遇到的麻烦及解决方式","images":null,"status":"publish","summary":"本地硬盘安装，也是非常不错的。但前提是现在用的系统能够进入系统执行onekey。","_content":"\n\n审计部的小伙伴电脑出现了问题，用尽了各种方法：\n\n###u盘启动\n\n\tu盘是好的，里面也有pe。但电脑就是识别不了，按照网上的参数设置bios还是不行。索性就放弃了，用光盘噶事。\n\n###外置光驱启动\n\n\tx260本身没有光驱，幸好老王拿来了外置光驱，我马上拿来用。\n\n\t能看到dvd的启动项，但是进不去光盘，选了还是进入硬盘的系统。\n\n\t思来想去，既然保险的方法，都不能用。那我就本地硬盘安装，速度快还高效。\n\n\t就怕装的过程中出错，那就危险大发了，因为没有保险手段恢复。\n\n#####首先本地硬盘安装要有两样东西\n\n\tonekey和ghost镜像\n\n\t非常简单打开onekey指定ghost镜像，就好了，重启自动使用dos安装，给力。\n\t\t\n\t系统装好了，没有网卡驱动。在官网上下网卡驱动，再下个联想驱动管理。把所有的驱动都打好。就OK了\n\n\t其实我感觉外置光盘应该能够装系统，ghost安装好之后，电脑重启，默认从光盘启动（看到了windows10dvd启动界面）。\n\n\t感觉外置光盘，应该是给电脑装系统的万能工具。\n\n\t本地硬盘安装，也是非常不错的。但前提是现在用的系统能够进入系统执行onekey。\n\t\n","source":"_posts/blog/windows/thinkpad+x260绯荤粺閲嶈.md","raw":"---\nauthor: qwerse\nhead: \ndate: 2017-11-23\ntitle: thinkpad x260重装系统遇到的麻烦及解决方式\ntags: windows\nimages: \ncategory: windows\nstatus: publish\nsummary: 本地硬盘安装，也是非常不错的。但前提是现在用的系统能够进入系统执行onekey。\n---\n\n\n审计部的小伙伴电脑出现了问题，用尽了各种方法：\n\n###u盘启动\n\n\tu盘是好的，里面也有pe。但电脑就是识别不了，按照网上的参数设置bios还是不行。索性就放弃了，用光盘噶事。\n\n###外置光驱启动\n\n\tx260本身没有光驱，幸好老王拿来了外置光驱，我马上拿来用。\n\n\t能看到dvd的启动项，但是进不去光盘，选了还是进入硬盘的系统。\n\n\t思来想去，既然保险的方法，都不能用。那我就本地硬盘安装，速度快还高效。\n\n\t就怕装的过程中出错，那就危险大发了，因为没有保险手段恢复。\n\n#####首先本地硬盘安装要有两样东西\n\n\tonekey和ghost镜像\n\n\t非常简单打开onekey指定ghost镜像，就好了，重启自动使用dos安装，给力。\n\t\t\n\t系统装好了，没有网卡驱动。在官网上下网卡驱动，再下个联想驱动管理。把所有的驱动都打好。就OK了\n\n\t其实我感觉外置光盘应该能够装系统，ghost安装好之后，电脑重启，默认从光盘启动（看到了windows10dvd启动界面）。\n\n\t感觉外置光盘，应该是给电脑装系统的万能工具。\n\n\t本地硬盘安装，也是非常不错的。但前提是现在用的系统能够进入系统执行onekey。\n\t\n","slug":"blog/windows/thinkpad+x260绯荤粺閲嶈","published":1,"updated":"2018-08-01T08:15:57.940Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvg1001npym6fa2olkbe","content":"<p>审计部的小伙伴电脑出现了问题，用尽了各种方法：</p>\n<p>###u盘启动</p>\n<pre><code>u盘是好的，里面也有pe。但电脑就是识别不了，按照网上的参数设置bios还是不行。索性就放弃了，用光盘噶事。\n</code></pre><p>###外置光驱启动</p>\n<pre><code>x260本身没有光驱，幸好老王拿来了外置光驱，我马上拿来用。\n\n能看到dvd的启动项，但是进不去光盘，选了还是进入硬盘的系统。\n\n思来想去，既然保险的方法，都不能用。那我就本地硬盘安装，速度快还高效。\n\n就怕装的过程中出错，那就危险大发了，因为没有保险手段恢复。\n</code></pre><p>#####首先本地硬盘安装要有两样东西</p>\n<pre><code>onekey和ghost镜像\n\n非常简单打开onekey指定ghost镜像，就好了，重启自动使用dos安装，给力。\n\n系统装好了，没有网卡驱动。在官网上下网卡驱动，再下个联想驱动管理。把所有的驱动都打好。就OK了\n\n其实我感觉外置光盘应该能够装系统，ghost安装好之后，电脑重启，默认从光盘启动（看到了windows10dvd启动界面）。\n\n感觉外置光盘，应该是给电脑装系统的万能工具。\n\n本地硬盘安装，也是非常不错的。但前提是现在用的系统能够进入系统执行onekey。\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<p>审计部的小伙伴电脑出现了问题，用尽了各种方法：</p>\n<p>###u盘启动</p>\n<pre><code>u盘是好的，里面也有pe。但电脑就是识别不了，按照网上的参数设置bios还是不行。索性就放弃了，用光盘噶事。\n</code></pre><p>###外置光驱启动</p>\n<pre><code>x260本身没有光驱，幸好老王拿来了外置光驱，我马上拿来用。\n\n能看到dvd的启动项，但是进不去光盘，选了还是进入硬盘的系统。\n\n思来想去，既然保险的方法，都不能用。那我就本地硬盘安装，速度快还高效。\n\n就怕装的过程中出错，那就危险大发了，因为没有保险手段恢复。\n</code></pre><p>#####首先本地硬盘安装要有两样东西</p>\n<pre><code>onekey和ghost镜像\n\n非常简单打开onekey指定ghost镜像，就好了，重启自动使用dos安装，给力。\n\n系统装好了，没有网卡驱动。在官网上下网卡驱动，再下个联想驱动管理。把所有的驱动都打好。就OK了\n\n其实我感觉外置光盘应该能够装系统，ghost安装好之后，电脑重启，默认从光盘启动（看到了windows10dvd启动界面）。\n\n感觉外置光盘，应该是给电脑装系统的万能工具。\n\n本地硬盘安装，也是非常不错的。但前提是现在用的系统能够进入系统执行onekey。\n</code></pre>"},{"author":"qwerse","head":null,"date":"2017-07-12T16:00:00.000Z","title":"windows下硬盘安装linux(全能版)","images":null,"status":"publish","summary":"这个方法几乎能安装所有的操作系统，关键在于那10个G的硬盘，和启动文件的放置。","_content":"\n\n\n\n\n\n\n\n\n本文主要是对windows下硬盘安装linux进行知识梳理。\n用到的环境：win7(64)+centos6.9\n\n\n\t\t\n\n软件下载地址：http://qwerse.hk.ufileos.com/linuxyp安装.7z\n### 安装所需软件\n\n1.分区助手专业版(必需)：用来对硬盘分区，将磁盘的一部分格式化成Linux可以识别的ext3格式\n\n2.extfs ：主要是在windows下可以读写ext3的分区\n\n3.EasyBCD(必需)：用于添加和修改启动项\n\n4.WinGrub(建议使用)：用于看分区编号\n\n5.动态磁盘转换器(视情况)：Linux只能安装在基本磁盘，我是因为第一次安装错误导致磁盘变成了动态磁盘，所以需要用到这个，关于动态磁盘的概念请自行百度，一般现在的系统都是基本磁盘。\n\n6.CentOS-6.9.iso : 镜像文件\n\n\n\n\n\n\nCentOS的安装文件需要自行另外下载(各大高校的ftp上应该有)或者购买安装光碟。\n\n下面主要介绍硬盘安装双系统的方法，光盘安装的步骤会少些，也一并介绍了：\n\n### 在Windows7上面的准备工作\n\n打开磁盘管理器：\nWin徽标键+R键调出运行框，输入指令diskmgmt.msc回车调出磁盘管理器。在最后一个分区上面右键选择压缩卷，如果磁盘空间不够的话一定注意要备份该分区上的数据哦\n\n\n！！！也可以选择删除卷，但这样做的话一定要将数据备份\n\n！！！压缩多少视自己硬盘情况和想要Linux系统占用多大空间而定，硬盘大的话建议100G以上。这步完成后磁盘上会出现一部分未分配空间，如下图：\n\n安装分区助手专业版:\n![](http://photo.blog.sina.com.cn/showpic.html#blogid=86e874d30101e3d8&url=http://album.sina.com.cn/pic/002taUQrzy6IcO7hONC74)\n\n\t\t在磁盘未分配空间上右键->创建分区，创建一个10GB的分区用于存放CentOS 6.9的安装文件(光盘安装可以跳过这步)，\n\n\t\t这里的文件系统说明一下，如果是安装32位的CentOS的话，因为安装文件小于4GB，可以选择使用FAT32文件系统。如果是安装64位的CentOS，则只能使用EXT3的文件系统。在高级选项中记得选择创建为“逻辑分区”。\n\n\t\t确定后在主界面选择提交执行。\n\n在剩下的未分配空间上创建一个Ext3格式的主分区，方法同上。\n![](http://s4.sinaimg.cn/mw690/002taUQrzy6IcP7rDnd73&690)\n\n\t\t但是注意必须在高级选项中选择创建为“主分区”，如果“创建为”后面是不可以选择为“主分区”的，则说明主分区的数量已经到达上限，可以用下面方法将其中一个原本为“主分区”磁盘转换为“逻辑分区”。\n\n\n\n安装extfs软件\n\n\n安装完成后在分配的10GB磁盘空间上右键->Service Management，在弹出的页面选点Start，再点Apply。如下图，注意勾选项：\n![](http://s12.sinaimg.cn/mw690/002taUQrzy6IcRGX6C77b&690)\n\n然后在“我的电脑”中就可以看到ext3格式的10GB的空间了。\n\n将CentOS-6.9-x86_64.iso也复制到10GB的存放分区中。\n![](http://s14.sinaimg.cn/mw690/002taUQrzy6IcSimAsB2d&690)\n\n\n安装WinGrub，在Tool->Partition List打开的页面中找到存放10GB的分区的编号：如：我这里是(hd0,5)，记下来这个编号，后面有用。\n![](http://s16.sinaimg.cn/mw690/002taUQrzy6IcSOUhX12f&690)\n![](http://s4.sinaimg.cn/mw690/002taUQrzy6IcSTcAsrc3&690)\n\n安装EasyBCD，打开后找到Add New Entry，点NeoGrub标签。点Install然后点Configure。\n![](http://s6.sinaimg.cn/mw690/002taUQrzy6IcThA5c915&690)\n\t\t在弹出的文档中加入下面内容，这里的(hd0,5)是上一步中找到的分区编号\n\n\t\t\n\t\ttitle Install CentOS\n\n\t\tkernel (hd0,5)/isolinux/vmlinuz\n\n\t\tinitrd (hd0,5)/isolinux/initrd.img\n\n\t\t保存后重启。\n\n### 开始安装\n\n\n！！！\n。。。。\n\n\n\n\n\n这里就会提示要写磁盘了：\n![](http://s6.sinaimg.cn/mw690/002taUQrzy6Id01Enrf05&690)\n\n这里一定要更改设置，否则他会默认把启动文件放到Windows所在分区，这样会损坏Win7的启动文件，造成Win7无法启动！！！\n\n\n建议选Desktop，这个安装最完整：\n\n\n好了，完成：\n\n\n3.启动进入Win7之后打开EasyBCD,在Add New Entry的NeoGrub标签下点Remove。然后如图添加一个CentOS 6.9的启动项，安装了CentOS系统的磁盘分区一定要选对：\n\nAdd Entry重启后就可以进入CentOS 6.9了。\n\n4.原来放CentOS系统安装文件的那10GB的分区可以删除了还给Win7使用，这步之后磁盘号可能会发生变化，导致不能进入CentOS，这种情况下需要重复一下上面的第3步。\n\n","source":"_posts/blog/windows/windows涓嬪畨瑁卨inux鍏ㄦ柟浣嶈瀹炵敤.md","raw":"---\nauthor: qwerse\nhead: \ndate: 2017-07-13\ntitle: windows下硬盘安装linux(全能版)\ntags: windows\nimages: \ncategory: windows\nstatus: publish\nsummary: 这个方法几乎能安装所有的操作系统，关键在于那10个G的硬盘，和启动文件的放置。\n---\n\n\n\n\n\n\n\n\n\n本文主要是对windows下硬盘安装linux进行知识梳理。\n用到的环境：win7(64)+centos6.9\n\n\n\t\t\n\n软件下载地址：http://qwerse.hk.ufileos.com/linuxyp安装.7z\n### 安装所需软件\n\n1.分区助手专业版(必需)：用来对硬盘分区，将磁盘的一部分格式化成Linux可以识别的ext3格式\n\n2.extfs ：主要是在windows下可以读写ext3的分区\n\n3.EasyBCD(必需)：用于添加和修改启动项\n\n4.WinGrub(建议使用)：用于看分区编号\n\n5.动态磁盘转换器(视情况)：Linux只能安装在基本磁盘，我是因为第一次安装错误导致磁盘变成了动态磁盘，所以需要用到这个，关于动态磁盘的概念请自行百度，一般现在的系统都是基本磁盘。\n\n6.CentOS-6.9.iso : 镜像文件\n\n\n\n\n\n\nCentOS的安装文件需要自行另外下载(各大高校的ftp上应该有)或者购买安装光碟。\n\n下面主要介绍硬盘安装双系统的方法，光盘安装的步骤会少些，也一并介绍了：\n\n### 在Windows7上面的准备工作\n\n打开磁盘管理器：\nWin徽标键+R键调出运行框，输入指令diskmgmt.msc回车调出磁盘管理器。在最后一个分区上面右键选择压缩卷，如果磁盘空间不够的话一定注意要备份该分区上的数据哦\n\n\n！！！也可以选择删除卷，但这样做的话一定要将数据备份\n\n！！！压缩多少视自己硬盘情况和想要Linux系统占用多大空间而定，硬盘大的话建议100G以上。这步完成后磁盘上会出现一部分未分配空间，如下图：\n\n安装分区助手专业版:\n![](http://photo.blog.sina.com.cn/showpic.html#blogid=86e874d30101e3d8&url=http://album.sina.com.cn/pic/002taUQrzy6IcO7hONC74)\n\n\t\t在磁盘未分配空间上右键->创建分区，创建一个10GB的分区用于存放CentOS 6.9的安装文件(光盘安装可以跳过这步)，\n\n\t\t这里的文件系统说明一下，如果是安装32位的CentOS的话，因为安装文件小于4GB，可以选择使用FAT32文件系统。如果是安装64位的CentOS，则只能使用EXT3的文件系统。在高级选项中记得选择创建为“逻辑分区”。\n\n\t\t确定后在主界面选择提交执行。\n\n在剩下的未分配空间上创建一个Ext3格式的主分区，方法同上。\n![](http://s4.sinaimg.cn/mw690/002taUQrzy6IcP7rDnd73&690)\n\n\t\t但是注意必须在高级选项中选择创建为“主分区”，如果“创建为”后面是不可以选择为“主分区”的，则说明主分区的数量已经到达上限，可以用下面方法将其中一个原本为“主分区”磁盘转换为“逻辑分区”。\n\n\n\n安装extfs软件\n\n\n安装完成后在分配的10GB磁盘空间上右键->Service Management，在弹出的页面选点Start，再点Apply。如下图，注意勾选项：\n![](http://s12.sinaimg.cn/mw690/002taUQrzy6IcRGX6C77b&690)\n\n然后在“我的电脑”中就可以看到ext3格式的10GB的空间了。\n\n将CentOS-6.9-x86_64.iso也复制到10GB的存放分区中。\n![](http://s14.sinaimg.cn/mw690/002taUQrzy6IcSimAsB2d&690)\n\n\n安装WinGrub，在Tool->Partition List打开的页面中找到存放10GB的分区的编号：如：我这里是(hd0,5)，记下来这个编号，后面有用。\n![](http://s16.sinaimg.cn/mw690/002taUQrzy6IcSOUhX12f&690)\n![](http://s4.sinaimg.cn/mw690/002taUQrzy6IcSTcAsrc3&690)\n\n安装EasyBCD，打开后找到Add New Entry，点NeoGrub标签。点Install然后点Configure。\n![](http://s6.sinaimg.cn/mw690/002taUQrzy6IcThA5c915&690)\n\t\t在弹出的文档中加入下面内容，这里的(hd0,5)是上一步中找到的分区编号\n\n\t\t\n\t\ttitle Install CentOS\n\n\t\tkernel (hd0,5)/isolinux/vmlinuz\n\n\t\tinitrd (hd0,5)/isolinux/initrd.img\n\n\t\t保存后重启。\n\n### 开始安装\n\n\n！！！\n。。。。\n\n\n\n\n\n这里就会提示要写磁盘了：\n![](http://s6.sinaimg.cn/mw690/002taUQrzy6Id01Enrf05&690)\n\n这里一定要更改设置，否则他会默认把启动文件放到Windows所在分区，这样会损坏Win7的启动文件，造成Win7无法启动！！！\n\n\n建议选Desktop，这个安装最完整：\n\n\n好了，完成：\n\n\n3.启动进入Win7之后打开EasyBCD,在Add New Entry的NeoGrub标签下点Remove。然后如图添加一个CentOS 6.9的启动项，安装了CentOS系统的磁盘分区一定要选对：\n\nAdd Entry重启后就可以进入CentOS 6.9了。\n\n4.原来放CentOS系统安装文件的那10GB的分区可以删除了还给Win7使用，这步之后磁盘号可能会发生变化，导致不能进入CentOS，这种情况下需要重复一下上面的第3步。\n\n","slug":"blog/windows/windows涓嬪畨瑁卨inux鍏ㄦ柟浣嶈瀹炵敤","published":1,"updated":"2018-08-02T03:15:26.872Z","_id":"cjkbvhvg5001spym6vndsqryg","comments":1,"layout":"post","photos":[],"link":"","content":"<p>本文主要是对windows下硬盘安装linux进行知识梳理。<br>用到的环境：win7(64)+centos6.9</p>\n<p>软件下载地址：<a href=\"http://qwerse.hk.ufileos.com/linuxyp安装.7z\" target=\"_blank\" rel=\"noopener\">http://qwerse.hk.ufileos.com/linuxyp安装.7z</a></p>\n<h3 id=\"安装所需软件\"><a href=\"#安装所需软件\" class=\"headerlink\" title=\"安装所需软件\"></a>安装所需软件</h3><p>1.分区助手专业版(必需)：用来对硬盘分区，将磁盘的一部分格式化成Linux可以识别的ext3格式</p>\n<p>2.extfs ：主要是在windows下可以读写ext3的分区</p>\n<p>3.EasyBCD(必需)：用于添加和修改启动项</p>\n<p>4.WinGrub(建议使用)：用于看分区编号</p>\n<p>5.动态磁盘转换器(视情况)：Linux只能安装在基本磁盘，我是因为第一次安装错误导致磁盘变成了动态磁盘，所以需要用到这个，关于动态磁盘的概念请自行百度，一般现在的系统都是基本磁盘。</p>\n<p>6.CentOS-6.9.iso : 镜像文件</p>\n<p>CentOS的安装文件需要自行另外下载(各大高校的ftp上应该有)或者购买安装光碟。</p>\n<p>下面主要介绍硬盘安装双系统的方法，光盘安装的步骤会少些，也一并介绍了：</p>\n<h3 id=\"在Windows7上面的准备工作\"><a href=\"#在Windows7上面的准备工作\" class=\"headerlink\" title=\"在Windows7上面的准备工作\"></a>在Windows7上面的准备工作</h3><p>打开磁盘管理器：<br>Win徽标键+R键调出运行框，输入指令diskmgmt.msc回车调出磁盘管理器。在最后一个分区上面右键选择压缩卷，如果磁盘空间不够的话一定注意要备份该分区上的数据哦</p>\n<p>！！！也可以选择删除卷，但这样做的话一定要将数据备份</p>\n<p>！！！压缩多少视自己硬盘情况和想要Linux系统占用多大空间而定，硬盘大的话建议100G以上。这步完成后磁盘上会出现一部分未分配空间，如下图：</p>\n<p>安装分区助手专业版:<br><img src=\"http://photo.blog.sina.com.cn/showpic.html#blogid=86e874d30101e3d8&amp;url=http://album.sina.com.cn/pic/002taUQrzy6IcO7hONC74\" alt=\"\"></p>\n<pre><code>在磁盘未分配空间上右键-&gt;创建分区，创建一个10GB的分区用于存放CentOS 6.9的安装文件(光盘安装可以跳过这步)，\n\n这里的文件系统说明一下，如果是安装32位的CentOS的话，因为安装文件小于4GB，可以选择使用FAT32文件系统。如果是安装64位的CentOS，则只能使用EXT3的文件系统。在高级选项中记得选择创建为“逻辑分区”。\n\n确定后在主界面选择提交执行。\n</code></pre><p>在剩下的未分配空间上创建一个Ext3格式的主分区，方法同上。<br><img src=\"http://s4.sinaimg.cn/mw690/002taUQrzy6IcP7rDnd73&amp;690\" alt=\"\"></p>\n<pre><code>但是注意必须在高级选项中选择创建为“主分区”，如果“创建为”后面是不可以选择为“主分区”的，则说明主分区的数量已经到达上限，可以用下面方法将其中一个原本为“主分区”磁盘转换为“逻辑分区”。\n</code></pre><p>安装extfs软件</p>\n<p>安装完成后在分配的10GB磁盘空间上右键-&gt;Service Management，在弹出的页面选点Start，再点Apply。如下图，注意勾选项：<br><img src=\"http://s12.sinaimg.cn/mw690/002taUQrzy6IcRGX6C77b&amp;690\" alt=\"\"></p>\n<p>然后在“我的电脑”中就可以看到ext3格式的10GB的空间了。</p>\n<p>将CentOS-6.9-x86_64.iso也复制到10GB的存放分区中。<br><img src=\"http://s14.sinaimg.cn/mw690/002taUQrzy6IcSimAsB2d&amp;690\" alt=\"\"></p>\n<p>安装WinGrub，在Tool-&gt;Partition List打开的页面中找到存放10GB的分区的编号：如：我这里是(hd0,5)，记下来这个编号，后面有用。<br><img src=\"http://s16.sinaimg.cn/mw690/002taUQrzy6IcSOUhX12f&amp;690\" alt=\"\"><br><img src=\"http://s4.sinaimg.cn/mw690/002taUQrzy6IcSTcAsrc3&amp;690\" alt=\"\"></p>\n<p>安装EasyBCD，打开后找到Add New Entry，点NeoGrub标签。点Install然后点Configure。<br><img src=\"http://s6.sinaimg.cn/mw690/002taUQrzy6IcThA5c915&amp;690\" alt=\"\"><br>        在弹出的文档中加入下面内容，这里的(hd0,5)是上一步中找到的分区编号</p>\n<pre><code>title Install CentOS\n\nkernel (hd0,5)/isolinux/vmlinuz\n\ninitrd (hd0,5)/isolinux/initrd.img\n\n保存后重启。\n</code></pre><h3 id=\"开始安装\"><a href=\"#开始安装\" class=\"headerlink\" title=\"开始安装\"></a>开始安装</h3><p>！！！<br>。。。。</p>\n<p>这里就会提示要写磁盘了：<br><img src=\"http://s6.sinaimg.cn/mw690/002taUQrzy6Id01Enrf05&amp;690\" alt=\"\"></p>\n<p>这里一定要更改设置，否则他会默认把启动文件放到Windows所在分区，这样会损坏Win7的启动文件，造成Win7无法启动！！！</p>\n<p>建议选Desktop，这个安装最完整：</p>\n<p>好了，完成：</p>\n<p>3.启动进入Win7之后打开EasyBCD,在Add New Entry的NeoGrub标签下点Remove。然后如图添加一个CentOS 6.9的启动项，安装了CentOS系统的磁盘分区一定要选对：</p>\n<p>Add Entry重启后就可以进入CentOS 6.9了。</p>\n<p>4.原来放CentOS系统安装文件的那10GB的分区可以删除了还给Win7使用，这步之后磁盘号可能会发生变化，导致不能进入CentOS，这种情况下需要重复一下上面的第3步。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>本文主要是对windows下硬盘安装linux进行知识梳理。<br>用到的环境：win7(64)+centos6.9</p>\n<p>软件下载地址：<a href=\"http://qwerse.hk.ufileos.com/linuxyp安装.7z\" target=\"_blank\" rel=\"noopener\">http://qwerse.hk.ufileos.com/linuxyp安装.7z</a></p>\n<h3 id=\"安装所需软件\"><a href=\"#安装所需软件\" class=\"headerlink\" title=\"安装所需软件\"></a>安装所需软件</h3><p>1.分区助手专业版(必需)：用来对硬盘分区，将磁盘的一部分格式化成Linux可以识别的ext3格式</p>\n<p>2.extfs ：主要是在windows下可以读写ext3的分区</p>\n<p>3.EasyBCD(必需)：用于添加和修改启动项</p>\n<p>4.WinGrub(建议使用)：用于看分区编号</p>\n<p>5.动态磁盘转换器(视情况)：Linux只能安装在基本磁盘，我是因为第一次安装错误导致磁盘变成了动态磁盘，所以需要用到这个，关于动态磁盘的概念请自行百度，一般现在的系统都是基本磁盘。</p>\n<p>6.CentOS-6.9.iso : 镜像文件</p>\n<p>CentOS的安装文件需要自行另外下载(各大高校的ftp上应该有)或者购买安装光碟。</p>\n<p>下面主要介绍硬盘安装双系统的方法，光盘安装的步骤会少些，也一并介绍了：</p>\n<h3 id=\"在Windows7上面的准备工作\"><a href=\"#在Windows7上面的准备工作\" class=\"headerlink\" title=\"在Windows7上面的准备工作\"></a>在Windows7上面的准备工作</h3><p>打开磁盘管理器：<br>Win徽标键+R键调出运行框，输入指令diskmgmt.msc回车调出磁盘管理器。在最后一个分区上面右键选择压缩卷，如果磁盘空间不够的话一定注意要备份该分区上的数据哦</p>\n<p>！！！也可以选择删除卷，但这样做的话一定要将数据备份</p>\n<p>！！！压缩多少视自己硬盘情况和想要Linux系统占用多大空间而定，硬盘大的话建议100G以上。这步完成后磁盘上会出现一部分未分配空间，如下图：</p>\n<p>安装分区助手专业版:<br><img src=\"http://photo.blog.sina.com.cn/showpic.html#blogid=86e874d30101e3d8&amp;url=http://album.sina.com.cn/pic/002taUQrzy6IcO7hONC74\" alt=\"\"></p>\n<pre><code>在磁盘未分配空间上右键-&gt;创建分区，创建一个10GB的分区用于存放CentOS 6.9的安装文件(光盘安装可以跳过这步)，\n\n这里的文件系统说明一下，如果是安装32位的CentOS的话，因为安装文件小于4GB，可以选择使用FAT32文件系统。如果是安装64位的CentOS，则只能使用EXT3的文件系统。在高级选项中记得选择创建为“逻辑分区”。\n\n确定后在主界面选择提交执行。\n</code></pre><p>在剩下的未分配空间上创建一个Ext3格式的主分区，方法同上。<br><img src=\"http://s4.sinaimg.cn/mw690/002taUQrzy6IcP7rDnd73&amp;690\" alt=\"\"></p>\n<pre><code>但是注意必须在高级选项中选择创建为“主分区”，如果“创建为”后面是不可以选择为“主分区”的，则说明主分区的数量已经到达上限，可以用下面方法将其中一个原本为“主分区”磁盘转换为“逻辑分区”。\n</code></pre><p>安装extfs软件</p>\n<p>安装完成后在分配的10GB磁盘空间上右键-&gt;Service Management，在弹出的页面选点Start，再点Apply。如下图，注意勾选项：<br><img src=\"http://s12.sinaimg.cn/mw690/002taUQrzy6IcRGX6C77b&amp;690\" alt=\"\"></p>\n<p>然后在“我的电脑”中就可以看到ext3格式的10GB的空间了。</p>\n<p>将CentOS-6.9-x86_64.iso也复制到10GB的存放分区中。<br><img src=\"http://s14.sinaimg.cn/mw690/002taUQrzy6IcSimAsB2d&amp;690\" alt=\"\"></p>\n<p>安装WinGrub，在Tool-&gt;Partition List打开的页面中找到存放10GB的分区的编号：如：我这里是(hd0,5)，记下来这个编号，后面有用。<br><img src=\"http://s16.sinaimg.cn/mw690/002taUQrzy6IcSOUhX12f&amp;690\" alt=\"\"><br><img src=\"http://s4.sinaimg.cn/mw690/002taUQrzy6IcSTcAsrc3&amp;690\" alt=\"\"></p>\n<p>安装EasyBCD，打开后找到Add New Entry，点NeoGrub标签。点Install然后点Configure。<br><img src=\"http://s6.sinaimg.cn/mw690/002taUQrzy6IcThA5c915&amp;690\" alt=\"\"><br>        在弹出的文档中加入下面内容，这里的(hd0,5)是上一步中找到的分区编号</p>\n<pre><code>title Install CentOS\n\nkernel (hd0,5)/isolinux/vmlinuz\n\ninitrd (hd0,5)/isolinux/initrd.img\n\n保存后重启。\n</code></pre><h3 id=\"开始安装\"><a href=\"#开始安装\" class=\"headerlink\" title=\"开始安装\"></a>开始安装</h3><p>！！！<br>。。。。</p>\n<p>这里就会提示要写磁盘了：<br><img src=\"http://s6.sinaimg.cn/mw690/002taUQrzy6Id01Enrf05&amp;690\" alt=\"\"></p>\n<p>这里一定要更改设置，否则他会默认把启动文件放到Windows所在分区，这样会损坏Win7的启动文件，造成Win7无法启动！！！</p>\n<p>建议选Desktop，这个安装最完整：</p>\n<p>好了，完成：</p>\n<p>3.启动进入Win7之后打开EasyBCD,在Add New Entry的NeoGrub标签下点Remove。然后如图添加一个CentOS 6.9的启动项，安装了CentOS系统的磁盘分区一定要选对：</p>\n<p>Add Entry重启后就可以进入CentOS 6.9了。</p>\n<p>4.原来放CentOS系统安装文件的那10GB的分区可以删除了还给Win7使用，这步之后磁盘号可能会发生变化，导致不能进入CentOS，这种情况下需要重复一下上面的第3步。</p>\n"},{"author":"QwerSe","head":null,"date":"2018-07-19T16:00:00.000Z","title":"出现PAGE_FAULT_IN_NONPAGED_AREA错误","status":"publish","summary":"出现PAGE_FAULT_IN_NONPAGED_AREA 错误解决方式","_content":"\n\n\n\n![](http://ww1.sinaimg.cn/large/ab318c02gy1ftg6ekwd9gj20cw0h8q49.jpg)\n\n连续4台电脑出现这个问题往上面找了，说是内存的原因，感觉不对。\n\n怎么感觉都是系统的原因，同事老王说是windows打补丁的结果，-_-||。\n\n最后还是老王 在pe下使用`chkdsk c: /f /r` 进行了修复，重启果然就好了。。\n\n！！！注意c是系统盘","source":"_posts/blog/windows/电脑蓝屏_PAGE_FAULT_IN_NONPAGED_AREA.md","raw":"---\nauthor: QwerSe\nhead:\ndate: 2018-07-20\ntitle: 出现PAGE_FAULT_IN_NONPAGED_AREA错误\ntags: windows\n\ncategory: windows\nstatus: publish\nsummary: 出现PAGE_FAULT_IN_NONPAGED_AREA 错误解决方式\n---\n\n\n\n\n![](http://ww1.sinaimg.cn/large/ab318c02gy1ftg6ekwd9gj20cw0h8q49.jpg)\n\n连续4台电脑出现这个问题往上面找了，说是内存的原因，感觉不对。\n\n怎么感觉都是系统的原因，同事老王说是windows打补丁的结果，-_-||。\n\n最后还是老王 在pe下使用`chkdsk c: /f /r` 进行了修复，重启果然就好了。。\n\n！！！注意c是系统盘","slug":"blog/windows/电脑蓝屏_PAGE_FAULT_IN_NONPAGED_AREA","published":1,"updated":"2018-08-01T08:15:31.676Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvg8001upym6wnxjvhtn","content":"<p><img src=\"http://ww1.sinaimg.cn/large/ab318c02gy1ftg6ekwd9gj20cw0h8q49.jpg\" alt=\"\"></p>\n<p>连续4台电脑出现这个问题往上面找了，说是内存的原因，感觉不对。</p>\n<p>怎么感觉都是系统的原因，同事老王说是windows打补丁的结果，-_-||。</p>\n<p>最后还是老王 在pe下使用<code>chkdsk c: /f /r</code> 进行了修复，重启果然就好了。。</p>\n<p>！！！注意c是系统盘</p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"http://ww1.sinaimg.cn/large/ab318c02gy1ftg6ekwd9gj20cw0h8q49.jpg\" alt=\"\"></p>\n<p>连续4台电脑出现这个问题往上面找了，说是内存的原因，感觉不对。</p>\n<p>怎么感觉都是系统的原因，同事老王说是windows打补丁的结果，-_-||。</p>\n<p>最后还是老王 在pe下使用<code>chkdsk c: /f /r</code> 进行了修复，重启果然就好了。。</p>\n<p>！！！注意c是系统盘</p>\n"},{"author":"QwerSe","head":null,"date":"2017-05-12T16:00:00.000Z","title":"勒索软件攻击防范","status":"publish","summary":"在国内外网络中发现爆发基于Windows网络共享协议进行攻击传播的蠕虫恶意代码","_content":"\n2017年5月12日起，在国内外网络中发现爆发基于Windows网络共享协议\n进行攻击传播的蠕虫恶意代码，这是不法分子通过改造之前泄露的NSA黑客武\n器库中“永恒之蓝”攻击程序发起的网络攻击事件。        \n目前发现的蠕虫会扫描开放445文件共享端口的Windows机器，无需用户任\n何操作，只要开机上网，不法分子就能在电脑和服务器中植入执行勒索程序、远\n程控制木马、虚拟货币挖矿机等恶意程序。        \n此蠕虫目前在没有对445端口进行严格访问控制的教育网及企业内网大量传\n播，呈现爆发的态势，受感染系统会被勒索高额金钱，不能按时支付赎金的系统\n会被销毁数据造成严重损失。该蠕虫攻击事件已经造成非常严重的现实危害，各\n类规模的企业内网也已经面临此类威胁。        \n360安全监测与响应中心也将持续关注该事件的进展，并第一时间为您更新\n该事件信息。        \n前情提要：北京时间2017年4月14日晚，一大批新的NSA相关网络攻击工\n具及文档被Shadow        Brokers组织公布，其中包含了涉及多个Windows系统服务\n（SMB、RDP、IIS）的远程命令执行工具。\n\n---\n## 预防感染办法:\n\n\n\t①控制面板->系统与安全->启用Windows防火墙->点击”高级设置”->点击“入站规则”->选择”新建规则”->规则类型选择“端口”->应用于“TCP”协议 特定本地端口并输入“445”->“操作”选择“阻止连接”->“配置文件”中“规则应用”全部勾选->规则名称任意输入并点击完成\n\n\t②打上最新官方补丁https://technet.microsoft.com/zh-cn/library/security/MS17-010\n\n\t（各系统具体补丁：win7 : https://mirror.sdu.edu.cn/ms17-010/win7/  \n\n\twin8 : https://mirror.sdu.edu.cn/ms17-010/win8/\n\n\twin10 : https://mirror.sdu.edu.cn/ms17-010/win10/）\n\n\n\t③XP win2003 以下  https://dl.360safe.com/nsa/nsatool.exe  （360的检测与修复工具）\n\n\t④个人蔫脑最直接的办法就是用杀软快速扫描一下，基本上能够检测出开了哪些风险端口并处理关闭\n\n提示：官方补丁完成后，可以下载文章内那个360的检测以下 是不是修复完成。\n\n另外附加一个H大发布的已经被感染电脑的解决办法：\n1:打开那个勒索软件界面，点击copy. （复制黑客的比特币地址）\n2:把copy粘贴到btc.com （区块链查询器）\n3:在区块链查询器中找到黑客收款地址的交易记录，然后随意选择一个txid（交易哈希值）\n4:把txid 复制粘贴给 勒索软件界面按钮connect us.\n5:等黑客看到后 你再点击勒索软件上的check payment.\n6:再点击decrypt 解密文件即可。\n此方法不知道有没有用，想看看的人可以找个样本在虚拟机里面尝试一下（附上样本文件哈勃分析结果报告：https://habo.qq.com/file/showdetail?pk=ADEGY11uB2IIPVs5）\n\n再附上一个最新解决已感染文件找回办法：\n到卡巴斯基下载文件解锁工具https://ransom.kaspersky.com/（据说是攻破了黑客的密钥库，利用已有密钥研究出了反向破解的黑科技），有一定概率能够恢复文件\n（此方法来自网络具体结果可以自己在已经感染的电脑上尝试恢复）\n\n大部分内容来自吾爱论坛","source":"_posts/blog/瀹夊叏/鍕掔储杞欢鏀诲嚮闃茶寖.md","raw":"---\nauthor: QwerSe\nhead: \ndate: 2017-5-13\ntitle:  勒索软件攻击防范\ntags: 安全\n\ncategory: 安全\nstatus: publish\nsummary: 在国内外网络中发现爆发基于Windows网络共享协议进行攻击传播的蠕虫恶意代码\n---\n\n2017年5月12日起，在国内外网络中发现爆发基于Windows网络共享协议\n进行攻击传播的蠕虫恶意代码，这是不法分子通过改造之前泄露的NSA黑客武\n器库中“永恒之蓝”攻击程序发起的网络攻击事件。        \n目前发现的蠕虫会扫描开放445文件共享端口的Windows机器，无需用户任\n何操作，只要开机上网，不法分子就能在电脑和服务器中植入执行勒索程序、远\n程控制木马、虚拟货币挖矿机等恶意程序。        \n此蠕虫目前在没有对445端口进行严格访问控制的教育网及企业内网大量传\n播，呈现爆发的态势，受感染系统会被勒索高额金钱，不能按时支付赎金的系统\n会被销毁数据造成严重损失。该蠕虫攻击事件已经造成非常严重的现实危害，各\n类规模的企业内网也已经面临此类威胁。        \n360安全监测与响应中心也将持续关注该事件的进展，并第一时间为您更新\n该事件信息。        \n前情提要：北京时间2017年4月14日晚，一大批新的NSA相关网络攻击工\n具及文档被Shadow        Brokers组织公布，其中包含了涉及多个Windows系统服务\n（SMB、RDP、IIS）的远程命令执行工具。\n\n---\n## 预防感染办法:\n\n\n\t①控制面板->系统与安全->启用Windows防火墙->点击”高级设置”->点击“入站规则”->选择”新建规则”->规则类型选择“端口”->应用于“TCP”协议 特定本地端口并输入“445”->“操作”选择“阻止连接”->“配置文件”中“规则应用”全部勾选->规则名称任意输入并点击完成\n\n\t②打上最新官方补丁https://technet.microsoft.com/zh-cn/library/security/MS17-010\n\n\t（各系统具体补丁：win7 : https://mirror.sdu.edu.cn/ms17-010/win7/  \n\n\twin8 : https://mirror.sdu.edu.cn/ms17-010/win8/\n\n\twin10 : https://mirror.sdu.edu.cn/ms17-010/win10/）\n\n\n\t③XP win2003 以下  https://dl.360safe.com/nsa/nsatool.exe  （360的检测与修复工具）\n\n\t④个人蔫脑最直接的办法就是用杀软快速扫描一下，基本上能够检测出开了哪些风险端口并处理关闭\n\n提示：官方补丁完成后，可以下载文章内那个360的检测以下 是不是修复完成。\n\n另外附加一个H大发布的已经被感染电脑的解决办法：\n1:打开那个勒索软件界面，点击copy. （复制黑客的比特币地址）\n2:把copy粘贴到btc.com （区块链查询器）\n3:在区块链查询器中找到黑客收款地址的交易记录，然后随意选择一个txid（交易哈希值）\n4:把txid 复制粘贴给 勒索软件界面按钮connect us.\n5:等黑客看到后 你再点击勒索软件上的check payment.\n6:再点击decrypt 解密文件即可。\n此方法不知道有没有用，想看看的人可以找个样本在虚拟机里面尝试一下（附上样本文件哈勃分析结果报告：https://habo.qq.com/file/showdetail?pk=ADEGY11uB2IIPVs5）\n\n再附上一个最新解决已感染文件找回办法：\n到卡巴斯基下载文件解锁工具https://ransom.kaspersky.com/（据说是攻破了黑客的密钥库，利用已有密钥研究出了反向破解的黑科技），有一定概率能够恢复文件\n（此方法来自网络具体结果可以自己在已经感染的电脑上尝试恢复）\n\n大部分内容来自吾爱论坛","slug":"blog/瀹夊叏/鍕掔储杞欢鏀诲嚮闃茶寖","published":1,"updated":"2018-08-01T04:16:18.645Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkbvhvgb001ypym69n6h241o","content":"<p>2017年5月12日起，在国内外网络中发现爆发基于Windows网络共享协议<br>进行攻击传播的蠕虫恶意代码，这是不法分子通过改造之前泄露的NSA黑客武<br>器库中“永恒之蓝”攻击程序发起的网络攻击事件。<br>目前发现的蠕虫会扫描开放445文件共享端口的Windows机器，无需用户任<br>何操作，只要开机上网，不法分子就能在电脑和服务器中植入执行勒索程序、远<br>程控制木马、虚拟货币挖矿机等恶意程序。<br>此蠕虫目前在没有对445端口进行严格访问控制的教育网及企业内网大量传<br>播，呈现爆发的态势，受感染系统会被勒索高额金钱，不能按时支付赎金的系统<br>会被销毁数据造成严重损失。该蠕虫攻击事件已经造成非常严重的现实危害，各<br>类规模的企业内网也已经面临此类威胁。<br>360安全监测与响应中心也将持续关注该事件的进展，并第一时间为您更新<br>该事件信息。<br>前情提要：北京时间2017年4月14日晚，一大批新的NSA相关网络攻击工<br>具及文档被Shadow        Brokers组织公布，其中包含了涉及多个Windows系统服务<br>（SMB、RDP、IIS）的远程命令执行工具。</p>\n<hr>\n<h2 id=\"预防感染办法\"><a href=\"#预防感染办法\" class=\"headerlink\" title=\"预防感染办法:\"></a>预防感染办法:</h2><pre><code>①控制面板-&gt;系统与安全-&gt;启用Windows防火墙-&gt;点击”高级设置”-&gt;点击“入站规则”-&gt;选择”新建规则”-&gt;规则类型选择“端口”-&gt;应用于“TCP”协议 特定本地端口并输入“445”-&gt;“操作”选择“阻止连接”-&gt;“配置文件”中“规则应用”全部勾选-&gt;规则名称任意输入并点击完成\n\n②打上最新官方补丁https://technet.microsoft.com/zh-cn/library/security/MS17-010\n\n（各系统具体补丁：win7 : https://mirror.sdu.edu.cn/ms17-010/win7/  \n\nwin8 : https://mirror.sdu.edu.cn/ms17-010/win8/\n\nwin10 : https://mirror.sdu.edu.cn/ms17-010/win10/）\n\n\n③XP win2003 以下  https://dl.360safe.com/nsa/nsatool.exe  （360的检测与修复工具）\n\n④个人蔫脑最直接的办法就是用杀软快速扫描一下，基本上能够检测出开了哪些风险端口并处理关闭\n</code></pre><p>提示：官方补丁完成后，可以下载文章内那个360的检测以下 是不是修复完成。</p>\n<p>另外附加一个H大发布的已经被感染电脑的解决办法：<br>1:打开那个勒索软件界面，点击copy. （复制黑客的比特币地址）<br>2:把copy粘贴到btc.com （区块链查询器）<br>3:在区块链查询器中找到黑客收款地址的交易记录，然后随意选择一个txid（交易哈希值）<br>4:把txid 复制粘贴给 勒索软件界面按钮connect us.<br>5:等黑客看到后 你再点击勒索软件上的check payment.<br>6:再点击decrypt 解密文件即可。<br>此方法不知道有没有用，想看看的人可以找个样本在虚拟机里面尝试一下（附上样本文件哈勃分析结果报告：<a href=\"https://habo.qq.com/file/showdetail?pk=ADEGY11uB2IIPVs5）\" target=\"_blank\" rel=\"noopener\">https://habo.qq.com/file/showdetail?pk=ADEGY11uB2IIPVs5）</a></p>\n<p>再附上一个最新解决已感染文件找回办法：<br>到卡巴斯基下载文件解锁工具<a href=\"https://ransom.kaspersky.com/（据说是攻破了黑客的密钥库，利用已有密钥研究出了反向破解的黑科技），有一定概率能够恢复文件\" target=\"_blank\" rel=\"noopener\">https://ransom.kaspersky.com/（据说是攻破了黑客的密钥库，利用已有密钥研究出了反向破解的黑科技），有一定概率能够恢复文件</a><br>（此方法来自网络具体结果可以自己在已经感染的电脑上尝试恢复）</p>\n<p>大部分内容来自吾爱论坛</p>\n","site":{"data":{}},"excerpt":"","more":"<p>2017年5月12日起，在国内外网络中发现爆发基于Windows网络共享协议<br>进行攻击传播的蠕虫恶意代码，这是不法分子通过改造之前泄露的NSA黑客武<br>器库中“永恒之蓝”攻击程序发起的网络攻击事件。<br>目前发现的蠕虫会扫描开放445文件共享端口的Windows机器，无需用户任<br>何操作，只要开机上网，不法分子就能在电脑和服务器中植入执行勒索程序、远<br>程控制木马、虚拟货币挖矿机等恶意程序。<br>此蠕虫目前在没有对445端口进行严格访问控制的教育网及企业内网大量传<br>播，呈现爆发的态势，受感染系统会被勒索高额金钱，不能按时支付赎金的系统<br>会被销毁数据造成严重损失。该蠕虫攻击事件已经造成非常严重的现实危害，各<br>类规模的企业内网也已经面临此类威胁。<br>360安全监测与响应中心也将持续关注该事件的进展，并第一时间为您更新<br>该事件信息。<br>前情提要：北京时间2017年4月14日晚，一大批新的NSA相关网络攻击工<br>具及文档被Shadow        Brokers组织公布，其中包含了涉及多个Windows系统服务<br>（SMB、RDP、IIS）的远程命令执行工具。</p>\n<hr>\n<h2 id=\"预防感染办法\"><a href=\"#预防感染办法\" class=\"headerlink\" title=\"预防感染办法:\"></a>预防感染办法:</h2><pre><code>①控制面板-&gt;系统与安全-&gt;启用Windows防火墙-&gt;点击”高级设置”-&gt;点击“入站规则”-&gt;选择”新建规则”-&gt;规则类型选择“端口”-&gt;应用于“TCP”协议 特定本地端口并输入“445”-&gt;“操作”选择“阻止连接”-&gt;“配置文件”中“规则应用”全部勾选-&gt;规则名称任意输入并点击完成\n\n②打上最新官方补丁https://technet.microsoft.com/zh-cn/library/security/MS17-010\n\n（各系统具体补丁：win7 : https://mirror.sdu.edu.cn/ms17-010/win7/  \n\nwin8 : https://mirror.sdu.edu.cn/ms17-010/win8/\n\nwin10 : https://mirror.sdu.edu.cn/ms17-010/win10/）\n\n\n③XP win2003 以下  https://dl.360safe.com/nsa/nsatool.exe  （360的检测与修复工具）\n\n④个人蔫脑最直接的办法就是用杀软快速扫描一下，基本上能够检测出开了哪些风险端口并处理关闭\n</code></pre><p>提示：官方补丁完成后，可以下载文章内那个360的检测以下 是不是修复完成。</p>\n<p>另外附加一个H大发布的已经被感染电脑的解决办法：<br>1:打开那个勒索软件界面，点击copy. （复制黑客的比特币地址）<br>2:把copy粘贴到btc.com （区块链查询器）<br>3:在区块链查询器中找到黑客收款地址的交易记录，然后随意选择一个txid（交易哈希值）<br>4:把txid 复制粘贴给 勒索软件界面按钮connect us.<br>5:等黑客看到后 你再点击勒索软件上的check payment.<br>6:再点击decrypt 解密文件即可。<br>此方法不知道有没有用，想看看的人可以找个样本在虚拟机里面尝试一下（附上样本文件哈勃分析结果报告：<a href=\"https://habo.qq.com/file/showdetail?pk=ADEGY11uB2IIPVs5）\" target=\"_blank\" rel=\"noopener\">https://habo.qq.com/file/showdetail?pk=ADEGY11uB2IIPVs5）</a></p>\n<p>再附上一个最新解决已感染文件找回办法：<br>到卡巴斯基下载文件解锁工具<a href=\"https://ransom.kaspersky.com/（据说是攻破了黑客的密钥库，利用已有密钥研究出了反向破解的黑科技），有一定概率能够恢复文件\" target=\"_blank\" rel=\"noopener\">https://ransom.kaspersky.com/（据说是攻破了黑客的密钥库，利用已有密钥研究出了反向破解的黑科技），有一定概率能够恢复文件</a><br>（此方法来自网络具体结果可以自己在已经感染的电脑上尝试恢复）</p>\n<p>大部分内容来自吾爱论坛</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cjkbvhvdo0003pym6i04lxve1","category_id":"cjkbvhve10005pym6lnitxict","_id":"cjkbvhveu000fpym635tgv6ge"},{"post_id":"cjkbvhvdw0004pym6vv7e737v","category_id":"cjkbvhvel000apym61i4qnvdh","_id":"cjkbvhvf1000lpym6f8luil5v"},{"post_id":"cjkbvhvea0007pym6mrvcdcis","category_id":"cjkbvhveu000gpym69w9xn7qf","_id":"cjkbvhvf9000spym6blcuu9rk"},{"post_id":"cjkbvhvee0008pym6s2bdk1ww","category_id":"cjkbvhvf1000mpym6ojrlbpbf","_id":"cjkbvhvfh0011pym6j93nguf5"},{"post_id":"cjkbvhvf7000rpym6o3b4jnq4","category_id":"cjkbvhvf1000mpym6ojrlbpbf","_id":"cjkbvhvfl0015pym646gxda43"},{"post_id":"cjkbvhvfb000wpym6l34pn34e","category_id":"cjkbvhvf1000mpym6ojrlbpbf","_id":"cjkbvhvfo0019pym64c5vdim4"},{"post_id":"cjkbvhvfe000ypym6wcqs4frd","category_id":"cjkbvhvf1000mpym6ojrlbpbf","_id":"cjkbvhvfs001dpym6cqxeohd6"},{"post_id":"cjkbvhveh0009pym6rwlvadvy","category_id":"cjkbvhvfa000vpym6w4y4jfdf","_id":"cjkbvhvfv001gpym6jc921svy"},{"post_id":"cjkbvhven000dpym611lcnm91","category_id":"cjkbvhvf1000mpym6ojrlbpbf","_id":"cjkbvhvfy001lpym69pvvg650"},{"post_id":"cjkbvhver000epym6ot807d9c","category_id":"cjkbvhvf1000mpym6ojrlbpbf","_id":"cjkbvhvg4001ppym60huyzgr3"},{"post_id":"cjkbvhvev000ipym6nlg808wp","category_id":"cjkbvhvf1000mpym6ojrlbpbf","_id":"cjkbvhvga001wpym6l3e10cll"},{"post_id":"cjkbvhvey000kpym6mds8ix5e","category_id":"cjkbvhvfa000vpym6w4y4jfdf","_id":"cjkbvhvgd0020pym6zaqvfj8s"},{"post_id":"cjkbvhvfi0012pym6anccqm4f","category_id":"cjkbvhvg9001vpym66oevkbp2","_id":"cjkbvhvgf0024pym6but5ungl"},{"post_id":"cjkbvhvfl0016pym698zns5x6","category_id":"cjkbvhvge0021pym6qp17nvld","_id":"cjkbvhvgh0029pym6lrm3s34f"},{"post_id":"cjkbvhvfp001apym6zjs8qrxb","category_id":"cjkbvhvgg0026pym6mr0t2qyf","_id":"cjkbvhvgk002epym6e67v3xsu"},{"post_id":"cjkbvhvfs001epym6b4cabec1","category_id":"cjkbvhvge0021pym6qp17nvld","_id":"cjkbvhvgm002ipym63i5i7pdf"},{"post_id":"cjkbvhvfv001ipym6jicpd0i0","category_id":"cjkbvhvgg0026pym6mr0t2qyf","_id":"cjkbvhvgm002kpym67gvemhw5"},{"post_id":"cjkbvhvfz001mpym6ad23xdwm","category_id":"cjkbvhvgl002hpym6ovtnh8o3","_id":"cjkbvhvgn002npym6f09lnuug"},{"post_id":"cjkbvhvg1001npym6fa2olkbe","category_id":"cjkbvhvgn002lpym69fqv9yx3","_id":"cjkbvhvgp002qpym65r718z20"},{"post_id":"cjkbvhvg8001upym6wnxjvhtn","category_id":"cjkbvhvgn002lpym69fqv9yx3","_id":"cjkbvhvgq002rpym6blj0liyc"},{"post_id":"cjkbvhvgb001ypym69n6h241o","category_id":"cjkbvhvgp002ppym6i465clnh","_id":"cjkbvhvgq002spym6uglx5kzv"},{"post_id":"cjkbvhvf4000ppym6m2rc4qv7","category_id":"cjkbvhveu000gpym69w9xn7qf","_id":"cjkbzknut000176m6a949kqr5"},{"post_id":"cjkbvhvg5001spym6vndsqryg","category_id":"cjkbvhvgn002lpym69fqv9yx3","_id":"cjkbzmgio000476m6o4sp4znb"}],"PostTag":[{"post_id":"cjkbvhvdo0003pym6i04lxve1","tag_id":"cjkbvhve90006pym6zgq6egnt","_id":"cjkbvhven000cpym62fhnxluz"},{"post_id":"cjkbvhvdw0004pym6vv7e737v","tag_id":"cjkbvhvem000bpym628i0vwcj","_id":"cjkbvhvex000jpym6g0pwxxhs"},{"post_id":"cjkbvhvev000ipym6nlg808wp","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvf2000opym69tbo8voa"},{"post_id":"cjkbvhvea0007pym6mrvcdcis","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvf7000qpym67mq3agr0"},{"post_id":"cjkbvhvey000kpym6mds8ix5e","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvfa000upym66qw4x4w8"},{"post_id":"cjkbvhvee0008pym6s2bdk1ww","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvfe000xpym663ymvk6f"},{"post_id":"cjkbvhvf7000rpym6o3b4jnq4","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvfh0010pym6d3dfkt19"},{"post_id":"cjkbvhveh0009pym6rwlvadvy","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvfl0014pym66u1vgn2x"},{"post_id":"cjkbvhvfe000ypym6wcqs4frd","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvfo0018pym6li2hzdyn"},{"post_id":"cjkbvhvfi0012pym6anccqm4f","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvfs001cpym6yjnq9jpv"},{"post_id":"cjkbvhven000dpym611lcnm91","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvfv001fpym6qqaj0f2v"},{"post_id":"cjkbvhver000epym6ot807d9c","tag_id":"cjkbvhvfo0017pym6o8ck2qyg","_id":"cjkbvhvfy001kpym6i6a3n08w"},{"post_id":"cjkbvhvfz001mpym6ad23xdwm","tag_id":"cjkbvhvev000hpym6qgbq9a7j","_id":"cjkbvhvg5001rpym60ylaibjv"},{"post_id":"cjkbvhvfb000wpym6l34pn34e","tag_id":"cjkbvhvfv001hpym6xcp9ruda","_id":"cjkbvhvg7001tpym63wm2xnqo"},{"post_id":"cjkbvhvfl0016pym698zns5x6","tag_id":"cjkbvhvg4001qpym6txs41rab","_id":"cjkbvhvgd001zpym6ncz5cvc5"},{"post_id":"cjkbvhvfp001apym6zjs8qrxb","tag_id":"cjkbvhvg4001qpym6txs41rab","_id":"cjkbvhvgf0023pym6his9crsk"},{"post_id":"cjkbvhvfs001epym6b4cabec1","tag_id":"cjkbvhvg4001qpym6txs41rab","_id":"cjkbvhvgh0027pym6et11cfj2"},{"post_id":"cjkbvhvfv001ipym6jicpd0i0","tag_id":"cjkbvhvg4001qpym6txs41rab","_id":"cjkbvhvgi002bpym6qem8m6pf"},{"post_id":"cjkbvhvg1001npym6fa2olkbe","tag_id":"cjkbvhvgh0028pym6wt0c4pnx","_id":"cjkbvhvgk002fpym6e8ry9jyz"},{"post_id":"cjkbvhvg8001upym6wnxjvhtn","tag_id":"cjkbvhvgh0028pym6wt0c4pnx","_id":"cjkbvhvgm002jpym62eqziydl"},{"post_id":"cjkbvhvgb001ypym69n6h241o","tag_id":"cjkbvhvgl002gpym60wznh1bb","_id":"cjkbvhvgn002mpym6yybjr9pv"},{"post_id":"cjkbvhvf4000ppym6m2rc4qv7","tag_id":"cjkbzknur000076m6menjzq0q","_id":"cjkbzknuu000276m6np7j4t67"},{"post_id":"cjkbvhvg5001spym6vndsqryg","tag_id":"cjkbvhvgh0028pym6wt0c4pnx","_id":"cjkbzmgin000376m63sast0h1"}],"Tag":[{"name":"GitBlog","_id":"cjkbvhve90006pym6zgq6egnt"},{"name":"工作","_id":"cjkbvhvem000bpym628i0vwcj"},{"name":"linux","_id":"cjkbvhvev000hpym6qgbq9a7j"},{"name":"cobbler","_id":"cjkbvhvfo0017pym6o8ck2qyg"},{"name":"dns","_id":"cjkbvhvfv001hpym6xcp9ruda"},{"name":"python","_id":"cjkbvhvg4001qpym6txs41rab"},{"name":"windows","_id":"cjkbvhvgh0028pym6wt0c4pnx"},{"name":"安全","_id":"cjkbvhvgl002gpym60wznh1bb"},{"name":"Linux","_id":"cjkbzknur000076m6menjzq0q"}]}}