---
author: QwerSe
head: 
date: 2017-12-19
title:  windows磁盘管理复习笔记
tags: windows

category: windows
status: publish
summary:  因为MBR仅仅为分区表项保留了64个字节的存储空间，而每个分区则占用16个字节，也

就是说只能分4个分区，而4个分区在生产环境下往往不是最合理的分区方式，因此就

产生了扩展分区，在扩展分区中进一步划分逻辑分区，每个逻辑分区的分区信息都

存储在一个类似于MBR的扩展引导记录中（EBR），扩展引导记录包括分区表和结束标志

结束标志（55AA）。


---
###一、磁盘概述
#####1、磁盘硬件了解


1）扇区：
磁盘上的每个磁盘被等分为若干个孤段，这些孤段便是磁盘的扇区，扇区磁盘上最小的
物理磁盘单元，每个扇区可以存放512个字节（Byte）的信息，磁盘驱动器在向磁盘读取
和写入数据时，要以扇区为单位


2）簇：
是DOS进行分配的最小单位，当创建一个很小的文件时，如是一个字节，则它在磁盘上并
不是只占一个字节的空间，而是占有整个簇。簇是操作系统使用的逻辑概念，是最小的
存储单元。


3）大小：8字节  实际占用空间：4096字节=515字节*8个扇区


##### 2、MBR磁盘与GPT磁盘

1）MBR磁盘(BIOS+MBR)

###### 引导代码

占扇区前446个字节，计算机在上电完成BIOS自检后，会将该主引导扇区加载到内存
中产a执行前446个字节的引导程序，引导程序首先会在分区表中查找活动分区，如果
存在活动分区 ，则根据活动分区的偏移量找到该活动分区上的引导扇区的地址，将
引导扇区加载到内存中，同时检查引导扇区的有效性，然后根据该引导盲区的规则去
引导操作系统。
######分区表 
占扇区中间64个字节，分区表是磁盘管理的重要部分，通过分区表信息来定位各个
分区，访问用户的数据。分区表包含4个分区表项，每一个分区项通过位置偏移、分区
大小来唯一的确定一个分区是主分区还是扩展分区。每个分区项占16个字节。
因为MBR仅仅为分区表项保留了64个字节的存储空间，而每个分区则占用16个字节，也
就是说只能分4个分区，而4个分区在生产环境下往往不是最合理的分区方式，因此就
产生了扩展分区，在扩展分区中进一步划分逻辑分区，每个逻辑分区的分区信息都
存储在一个类似于MBR的扩展引导记录中（EBR），扩展引导记录包括分区表和结束标志
结束标志（55AA）


a.主分区：用来启动操作系统

b.扩展磁盘分区：用来存储数据

2）GPT磁盘(UEFI+GPT)
	a.EFI系统磁盘分区（ESP）
	b.Windows RE磁盘分区
	c.MSR磁盘分区
	d.windows磁盘分区
##基本磁盘与动态磁盘
###二、基本卷的管理

	1、压缩卷
	2、安装新磁盘
	3、创建主分区
	4、建立扩展磁盘分区
	5、指定“活动”磁盘分区
	6、磁盘分区的格式化、卷标、转换文件系统与删除
	7、更改驱动器号及路径
	8、扩展基本卷
###三、动态磁盘的管理
	
	1、将基本磁盘转移为动态磁盘
	1、administrators/backup operators
	2、建议关闭所有运行的应用程序
	3、原有的主分区与逻辑分区都会变成简单卷
	4、一旦转换完成，整个磁盘内不会再有任何基本卷,但被保护的分区除外
	5、一理转换完成，就无法再转换为基本磁盘，除非先删除磁盘内的所有卷，也就是空磁盘才可以被转换为基本磁盘
	6、一个磁盘内如果安装了多套win操作系统，也不要做转换，一旦转换后，除目前用的操作系统外，其他系统将无法启动。
卷类型：
	简单卷（simple volume）
	扩展简单卷（extend volume）
	跨区卷（spanned volume）
	带区卷（striped volume）
	镜像卷（mirror volume）
	RAID-5卷
###四、移动磁盘
	1、将基本磁盘移动到另外一台计算机内
		1）在移动时，目标机器会自动检测硬盘，自动分配盘符，优先考虑保持原来的盘符，如果有
			冲突，则选用下一个可用的盘符
		2）如果原来没有盘符，则移动后也没有
	2、将动态磁盘移动到另外一台计算机
		1）因为被移动的磁盘移动到目的服务器后会被识为“外部磁盘”，因此先“导入外部磁盘”
		2）1）在移动时，目标机器会自动检测硬盘，自动分配盘符，优先考虑保持原来的盘符，
			如果有冲突，则选用下一个可用的盘符
###五、存储空间
	1、虚拟磁盘与卷(池-虚拟磁盘-卷)
		1）虚拟磁盘配置类型
	a.simple:
	a)数据跨越各硬盘，主要功能是扩大磁盘容量
	b)会降低数据访问的可靠性
	c)存储池内至少需要有1块磁盘才可以实现这种功能
	b.2-Way Mirror
	a)同一份数据会存储2份，且是跨越各个磁盘（并非仅存储在2个磁盘内）
	b)两份相同的数据可以提高数据访问的可靠性，但也因此占用两倍的磁盘空间、降低
		磁盘实际可存储的数据量
	c)存储池内至少需要2块磁盘
	d)只容忍有2块磁盘出现故障
	c.3-Way Mirror
	a)同一份数据会存储3份，因此数据的可靠性更高，但会占用更多的磁盘空间
	b)存储池内至少需要5块磁盘才可以使用
	c)可以容忍两块磁盘损坏
	d.Parity:
	a)数据跨越各硬盘，可以提高数据访问的可靠性，便也会因为同位数据功能占用硬盘
		空间而降低磁盘实际可存储数据的容量
	b)存储池内至少需要3块硬盘才可以实现
	c)只容忍1块磁盘损坏
